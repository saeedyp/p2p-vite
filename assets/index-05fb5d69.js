(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function vn(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const q={},_t=[],Me=()=>{},Os=()=>!1,Ds=/^on[^a-z]/,Rr=e=>Ds.test(e),yn=e=>e.startsWith("onUpdate:"),ie=Object.assign,_n=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Ms=Object.prototype.hasOwnProperty,z=(e,t)=>Ms.call(e,t),B=Array.isArray,wt=e=>kr(e)==="[object Map]",Is=e=>kr(e)==="[object Set]",U=e=>typeof e=="function",se=e=>typeof e=="string",bn=e=>typeof e=="symbol",ee=e=>e!==null&&typeof e=="object",Yi=e=>ee(e)&&U(e.then)&&U(e.catch),js=Object.prototype.toString,kr=e=>js.call(e),As=e=>kr(e).slice(8,-1),Fs=e=>kr(e)==="[object Object]",Cn=e=>se(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ur=vn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Or=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Bs=/-(\w)/g,St=Or(e=>e.replace(Bs,(t,r)=>r?r.toUpperCase():"")),Ls=/\B([A-Z])/g,Et=Or(e=>e.replace(Ls,"-$1").toLowerCase()),Qi=Or(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ur=Or(e=>e?`on${Qi(e)}`:""),Jt=(e,t)=>!Object.is(e,t),pr=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},br=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Vr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Vn;const Wr=()=>Vn||(Vn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sn(e){if(B(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=se(n)?zs(n):Sn(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(se(e))return e;if(ee(e))return e}}const Us=/;(?![^(]*\))/g,$s=/:([^]+)/,Ns=/\/\*[^]*?\*\//g;function zs(e){const t={};return e.replace(Ns,"").split(Us).forEach(r=>{if(r){const n=r.split($s);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Tn(e){let t="";if(se(e))t=e;else if(B(e))for(let r=0;r<e.length;r++){const n=Tn(e[r]);n&&(t+=n+" ")}else if(ee(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const ws="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gs=vn(ws);function Xi(e){return!!e||e===""}let Ee;class Zi{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=Ee;try{return Ee=this,t()}finally{Ee=r}}}on(){Ee=this}off(){Ee=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Hs(e){return new Zi(e)}function Ks(e,t=Ee){t&&t.active&&t.effects.push(e)}function Js(){return Ee}const Pn=e=>{const t=new Set(e);return t.w=0,t.n=0,t},eo=e=>(e.w&Ze)>0,to=e=>(e.n&Ze)>0,Vs=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ze},Ws=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];eo(i)&&!to(i)?i.delete(e):t[r++]=i,i.w&=~Ze,i.n&=~Ze}t.length=r}},qr=new WeakMap;let Lt=0,Ze=1;const Yr=30;let Re;const ct=Symbol(""),Qr=Symbol("");class xn{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Ks(this,n)}run(){if(!this.active)return this.fn();let t=Re,r=Qe;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Re,Re=this,Qe=!0,Ze=1<<++Lt,Lt<=Yr?Vs(this):Wn(this),this.fn()}finally{Lt<=Yr&&Ws(this),Ze=1<<--Lt,Re=this.parent,Qe=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Re===this?this.deferStop=!0:this.active&&(Wn(this),this.onStop&&this.onStop(),this.active=!1)}}function Wn(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Qe=!0;const ro=[];function Rt(){ro.push(Qe),Qe=!1}function kt(){const e=ro.pop();Qe=e===void 0?!0:e}function _e(e,t,r){if(Qe&&Re){let n=qr.get(e);n||qr.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Pn()),no(i)}}function no(e,t){let r=!1;Lt<=Yr?to(e)||(e.n|=Ze,r=!eo(e)):r=!e.has(Re),r&&(e.add(Re),Re.deps.push(e))}function He(e,t,r,n,i,o){const a=qr.get(e);if(!a)return;let l=[];if(t==="clear")l=[...a.values()];else if(r==="length"&&B(e)){const s=Number(n);a.forEach((c,f)=>{(f==="length"||f>=s)&&l.push(c)})}else switch(r!==void 0&&l.push(a.get(r)),t){case"add":B(e)?Cn(r)&&l.push(a.get("length")):(l.push(a.get(ct)),wt(e)&&l.push(a.get(Qr)));break;case"delete":B(e)||(l.push(a.get(ct)),wt(e)&&l.push(a.get(Qr)));break;case"set":wt(e)&&l.push(a.get(ct));break}if(l.length===1)l[0]&&Xr(l[0]);else{const s=[];for(const c of l)c&&s.push(...c);Xr(Pn(s))}}function Xr(e,t){const r=B(e)?e:[...e];for(const n of r)n.computed&&qn(n);for(const n of r)n.computed||qn(n)}function qn(e,t){(e!==Re||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const qs=vn("__proto__,__v_isRef,__isVue"),io=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(bn)),Ys=En(),Qs=En(!1,!0),Xs=En(!0),Yn=Zs();function Zs(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=H(this);for(let o=0,a=this.length;o<a;o++)_e(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(H)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Rt();const n=H(this)[t].apply(this,r);return kt(),n}}),e}function ea(e){const t=H(this);return _e(t,"has",e),t.hasOwnProperty(e)}function En(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?ga:lo:t?co:ao).get(n))return n;const a=B(n);if(!e){if(a&&z(Yn,i))return Reflect.get(Yn,i,o);if(i==="hasOwnProperty")return ea}const l=Reflect.get(n,i,o);return(bn(i)?io.has(i):qs(i))||(e||_e(n,"get",i),t)?l:de(l)?a&&Cn(i)?l:l.value:ee(l)?e?fo(l):On(l):l}}const ta=oo(),ra=oo(!0);function oo(e=!1){return function(r,n,i,o){let a=r[n];if(Tt(a)&&de(a)&&!de(i))return!1;if(!e&&(!Cr(i)&&!Tt(i)&&(a=H(a),i=H(i)),!B(r)&&de(a)&&!de(i)))return a.value=i,!0;const l=B(r)&&Cn(n)?Number(n)<r.length:z(r,n),s=Reflect.set(r,n,i,o);return r===H(o)&&(l?Jt(i,a)&&He(r,"set",n,i):He(r,"add",n,i)),s}}function na(e,t){const r=z(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&He(e,"delete",t,void 0),n}function ia(e,t){const r=Reflect.has(e,t);return(!bn(t)||!io.has(t))&&_e(e,"has",t),r}function oa(e){return _e(e,"iterate",B(e)?"length":ct),Reflect.ownKeys(e)}const so={get:Ys,set:ta,deleteProperty:na,has:ia,ownKeys:oa},sa={get:Xs,set(e,t){return!0},deleteProperty(e,t){return!0}},aa=ie({},so,{get:Qs,set:ra}),Rn=e=>e,Dr=e=>Reflect.getPrototypeOf(e);function rr(e,t,r=!1,n=!1){e=e.__v_raw;const i=H(e),o=H(t);r||(t!==o&&_e(i,"get",t),_e(i,"get",o));const{has:a}=Dr(i),l=n?Rn:r?In:Vt;if(a.call(i,t))return l(e.get(t));if(a.call(i,o))return l(e.get(o));e!==i&&e.get(t)}function nr(e,t=!1){const r=this.__v_raw,n=H(r),i=H(e);return t||(e!==i&&_e(n,"has",e),_e(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function ir(e,t=!1){return e=e.__v_raw,!t&&_e(H(e),"iterate",ct),Reflect.get(e,"size",e)}function Qn(e){e=H(e);const t=H(this);return Dr(t).has.call(t,e)||(t.add(e),He(t,"add",e,e)),this}function Xn(e,t){t=H(t);const r=H(this),{has:n,get:i}=Dr(r);let o=n.call(r,e);o||(e=H(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Jt(t,a)&&He(r,"set",e,t):He(r,"add",e,t),this}function Zn(e){const t=H(this),{has:r,get:n}=Dr(t);let i=r.call(t,e);i||(e=H(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&He(t,"delete",e,void 0),o}function ei(){const e=H(this),t=e.size!==0,r=e.clear();return t&&He(e,"clear",void 0,void 0),r}function or(e,t){return function(n,i){const o=this,a=o.__v_raw,l=H(a),s=t?Rn:e?In:Vt;return!e&&_e(l,"iterate",ct),a.forEach((c,f)=>n.call(i,s(c),s(f),o))}}function sr(e,t,r){return function(...n){const i=this.__v_raw,o=H(i),a=wt(o),l=e==="entries"||e===Symbol.iterator&&a,s=e==="keys"&&a,c=i[e](...n),f=r?Rn:t?In:Vt;return!t&&_e(o,"iterate",s?Qr:ct),{next(){const{value:u,done:p}=c.next();return p?{value:u,done:p}:{value:l?[f(u[0]),f(u[1])]:f(u),done:p}},[Symbol.iterator](){return this}}}}function qe(e){return function(...t){return e==="delete"?!1:this}}function ca(){const e={get(o){return rr(this,o)},get size(){return ir(this)},has:nr,add:Qn,set:Xn,delete:Zn,clear:ei,forEach:or(!1,!1)},t={get(o){return rr(this,o,!1,!0)},get size(){return ir(this)},has:nr,add:Qn,set:Xn,delete:Zn,clear:ei,forEach:or(!1,!0)},r={get(o){return rr(this,o,!0)},get size(){return ir(this,!0)},has(o){return nr.call(this,o,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:or(!0,!1)},n={get(o){return rr(this,o,!0,!0)},get size(){return ir(this,!0)},has(o){return nr.call(this,o,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:or(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=sr(o,!1,!1),r[o]=sr(o,!0,!1),t[o]=sr(o,!1,!0),n[o]=sr(o,!0,!0)}),[e,r,t,n]}const[la,fa,ua,pa]=ca();function kn(e,t){const r=t?e?pa:ua:e?fa:la;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(z(r,i)&&i in n?r:n,i,o)}const da={get:kn(!1,!1)},ha={get:kn(!1,!0)},ma={get:kn(!0,!1)},ao=new WeakMap,co=new WeakMap,lo=new WeakMap,ga=new WeakMap;function va(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ya(e){return e.__v_skip||!Object.isExtensible(e)?0:va(As(e))}function On(e){return Tt(e)?e:Dn(e,!1,so,da,ao)}function _a(e){return Dn(e,!1,aa,ha,co)}function fo(e){return Dn(e,!0,sa,ma,lo)}function Dn(e,t,r,n,i){if(!ee(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=ya(e);if(a===0)return e;const l=new Proxy(e,a===2?n:r);return i.set(e,l),l}function bt(e){return Tt(e)?bt(e.__v_raw):!!(e&&e.__v_isReactive)}function Tt(e){return!!(e&&e.__v_isReadonly)}function Cr(e){return!!(e&&e.__v_isShallow)}function uo(e){return bt(e)||Tt(e)}function H(e){const t=e&&e.__v_raw;return t?H(t):e}function Mn(e){return br(e,"__v_skip",!0),e}const Vt=e=>ee(e)?On(e):e,In=e=>ee(e)?fo(e):e;function po(e){Qe&&Re&&(e=H(e),no(e.dep||(e.dep=Pn())))}function ho(e,t){e=H(e);const r=e.dep;r&&Xr(r)}function de(e){return!!(e&&e.__v_isRef===!0)}function vt(e){return ba(e,!1)}function ba(e,t){return de(e)?e:new Ca(e,t)}class Ca{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:H(t),this._value=r?t:Vt(t)}get value(){return po(this),this._value}set value(t){const r=this.__v_isShallow||Cr(t)||Tt(t);t=r?t:H(t),Jt(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Vt(t),ho(this))}}function Sa(e){return de(e)?e.value:e}const Ta={get:(e,t,r)=>Sa(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return de(i)&&!de(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function mo(e){return bt(e)?e:new Proxy(e,Ta)}class Pa{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new xn(t,()=>{this._dirty||(this._dirty=!0,ho(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=H(this);return po(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function xa(e,t,r=!1){let n,i;const o=U(e);return o?(n=e,i=Me):(n=e.get,i=e.set),new Pa(n,i,o||!i,r)}function Xe(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){Mr(o,t,r)}return i}function Ie(e,t,r,n){if(U(e)){const o=Xe(e,t,r,n);return o&&Yi(o)&&o.catch(a=>{Mr(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ie(e[o],t,r,n));return i}function Mr(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,l=r;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,a,l)===!1)return}o=o.parent}const s=t.appContext.config.errorHandler;if(s){Xe(s,null,10,[e,a,l]);return}}Ea(e,r,i,n)}function Ea(e,t,r,n=!0){console.error(e)}let Wt=!1,Zr=!1;const ue=[];let Ue=0;const Ct=[];let Ne=null,ot=0;const go=Promise.resolve();let jn=null;function Ra(e){const t=jn||go;return e?t.then(this?e.bind(this):e):t}function ka(e){let t=Ue+1,r=ue.length;for(;t<r;){const n=t+r>>>1;qt(ue[n])<e?t=n+1:r=n}return t}function An(e){(!ue.length||!ue.includes(e,Wt&&e.allowRecurse?Ue+1:Ue))&&(e.id==null?ue.push(e):ue.splice(ka(e.id),0,e),vo())}function vo(){!Wt&&!Zr&&(Zr=!0,jn=go.then(_o))}function Oa(e){const t=ue.indexOf(e);t>Ue&&ue.splice(t,1)}function Da(e){B(e)?Ct.push(...e):(!Ne||!Ne.includes(e,e.allowRecurse?ot+1:ot))&&Ct.push(e),vo()}function ti(e,t=Wt?Ue+1:0){for(;t<ue.length;t++){const r=ue[t];r&&r.pre&&(ue.splice(t,1),t--,r())}}function yo(e){if(Ct.length){const t=[...new Set(Ct)];if(Ct.length=0,Ne){Ne.push(...t);return}for(Ne=t,Ne.sort((r,n)=>qt(r)-qt(n)),ot=0;ot<Ne.length;ot++)Ne[ot]();Ne=null,ot=0}}const qt=e=>e.id==null?1/0:e.id,Ma=(e,t)=>{const r=qt(e)-qt(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function _o(e){Zr=!1,Wt=!0,ue.sort(Ma);const t=Me;try{for(Ue=0;Ue<ue.length;Ue++){const r=ue[Ue];r&&r.active!==!1&&Xe(r,null,14)}}finally{Ue=0,ue.length=0,yo(),Wt=!1,jn=null,(ue.length||Ct.length)&&_o()}}function Ia(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||q;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:p}=n[f]||q;p&&(i=r.map(m=>se(m)?m.trim():m)),u&&(i=r.map(Vr))}let l,s=n[l=Ur(t)]||n[l=Ur(St(t))];!s&&o&&(s=n[l=Ur(Et(t))]),s&&Ie(s,e,6,i);const c=n[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ie(c,e,6,i)}}function bo(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},l=!1;if(!U(e)){const s=c=>{const f=bo(c,t,!0);f&&(l=!0,ie(a,f))};!r&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!o&&!l?(ee(e)&&n.set(e,null),null):(B(o)?o.forEach(s=>a[s]=null):ie(a,o),ee(e)&&n.set(e,a),a)}function Ir(e,t){return!e||!Rr(t)?!1:(t=t.slice(2).replace(/Once$/,""),z(e,t[0].toLowerCase()+t.slice(1))||z(e,Et(t))||z(e,t))}let Oe=null,Co=null;function Sr(e){const t=Oe;return Oe=e,Co=e&&e.type.__scopeId||null,t}function ja(e,t=Oe,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&pi(-1);const o=Sr(t);let a;try{a=e(...i)}finally{Sr(o),n._d&&pi(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function $r(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:l,attrs:s,emit:c,render:f,renderCache:u,data:p,setupState:m,ctx:g,inheritAttrs:b}=e;let L,E;const k=Sr(e);try{if(r.shapeFlag&4){const D=i||n;L=Le(f.call(D,D,u,o,m,p,g)),E=s}else{const D=t;L=Le(D.length>1?D(o,{attrs:s,slots:l,emit:c}):D(o,null)),E=t.props?s:Aa(s)}}catch(D){Ht.length=0,Mr(D,e,1),L=lt(Yt)}let w=L;if(E&&b!==!1){const D=Object.keys(E),{shapeFlag:G}=w;D.length&&G&7&&(a&&D.some(yn)&&(E=Fa(E,a)),w=Pt(w,E))}return r.dirs&&(w=Pt(w),w.dirs=w.dirs?w.dirs.concat(r.dirs):r.dirs),r.transition&&(w.transition=r.transition),L=w,Sr(k),L}const Aa=e=>{let t;for(const r in e)(r==="class"||r==="style"||Rr(r))&&((t||(t={}))[r]=e[r]);return t},Fa=(e,t)=>{const r={};for(const n in e)(!yn(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Ba(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:l,patchFlag:s}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&s>=0){if(s&1024)return!0;if(s&16)return n?ri(n,a,c):!!a;if(s&8){const f=t.dynamicProps;for(let u=0;u<f.length;u++){const p=f[u];if(a[p]!==n[p]&&!Ir(c,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?ri(n,a,c):!0:!!a;return!1}function ri(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!Ir(r,o))return!0}return!1}function La({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Ua=e=>e.__isSuspense;function $a(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):Da(e)}const ar={};function Nr(e,t,r){return So(e,t,r)}function So(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=q){var l;const s=Js()===((l=pe)==null?void 0:l.scope)?pe:null;let c,f=!1,u=!1;if(de(e)?(c=()=>e.value,f=Cr(e)):bt(e)?(c=()=>e,n=!0):B(e)?(u=!0,f=e.some(D=>bt(D)||Cr(D)),c=()=>e.map(D=>{if(de(D))return D.value;if(bt(D))return at(D);if(U(D))return Xe(D,s,2)})):U(e)?t?c=()=>Xe(e,s,2):c=()=>{if(!(s&&s.isUnmounted))return p&&p(),Ie(e,s,3,[m])}:c=Me,t&&n){const D=c;c=()=>at(D())}let p,m=D=>{p=k.onStop=()=>{Xe(D,s,4)}},g;if(Xt)if(m=Me,t?r&&Ie(t,s,3,[c(),u?[]:void 0,m]):c(),i==="sync"){const D=Bc();g=D.__watcherHandles||(D.__watcherHandles=[])}else return Me;let b=u?new Array(e.length).fill(ar):ar;const L=()=>{if(k.active)if(t){const D=k.run();(n||f||(u?D.some((G,te)=>Jt(G,b[te])):Jt(D,b)))&&(p&&p(),Ie(t,s,3,[D,b===ar?void 0:u&&b[0]===ar?[]:b,m]),b=D)}else k.run()};L.allowRecurse=!!t;let E;i==="sync"?E=L:i==="post"?E=()=>ve(L,s&&s.suspense):(L.pre=!0,s&&(L.id=s.uid),E=()=>An(L));const k=new xn(c,E);t?r?L():b=k.run():i==="post"?ve(k.run.bind(k),s&&s.suspense):k.run();const w=()=>{k.stop(),s&&s.scope&&_n(s.scope.effects,k)};return g&&g.push(w),w}function Na(e,t,r){const n=this.proxy,i=se(e)?e.includes(".")?To(n,e):()=>n[e]:e.bind(n,n);let o;U(t)?o=t:(o=t.handler,r=t);const a=pe;xt(this);const l=So(i,o.bind(n),r);return a?xt(a):ft(),l}function To(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function at(e,t){if(!ee(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),de(e))at(e.value,t);else if(B(e))for(let r=0;r<e.length;r++)at(e[r],t);else if(Is(e)||wt(e))e.forEach(r=>{at(r,t)});else if(Fs(e))for(const r in e)at(e[r],t);return e}function ni(e,t){const r=Oe;if(r===null)return e;const n=Br(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,s,c=q]=t[o];a&&(U(a)&&(a={mounted:a,updated:a}),a.deep&&at(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:s,modifiers:c}))}return e}function tt(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const l=i[a];o&&(l.oldValue=o[a].value);let s=l.dir[n];s&&(Rt(),Ie(s,r,8,[e.el,l,e,t]),kt())}}function za(e,t){return U(e)?(()=>ie({name:e.name},t,{setup:e}))():e}const dr=e=>!!e.type.__asyncLoader,Po=e=>e.type.__isKeepAlive;function wa(e,t){xo(e,"a",t)}function Ga(e,t){xo(e,"da",t)}function xo(e,t,r=pe){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(jr(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Po(i.parent.vnode)&&Ha(n,t,r,i),i=i.parent}}function Ha(e,t,r,n){const i=jr(t,e,n,!0);Ro(()=>{_n(n[t],i)},r)}function jr(e,t,r=pe,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Rt(),xt(r);const l=Ie(t,r,e,a);return ft(),kt(),l});return n?i.unshift(o):i.push(o),o}}const Ke=e=>(t,r=pe)=>(!Xt||e==="sp")&&jr(e,(...n)=>t(...n),r),Ka=Ke("bm"),Eo=Ke("m"),Ja=Ke("bu"),Va=Ke("u"),Wa=Ke("bum"),Ro=Ke("um"),qa=Ke("sp"),Ya=Ke("rtg"),Qa=Ke("rtc");function Xa(e,t=pe){jr("ec",e,t)}const Za=Symbol.for("v-ndc"),en=e=>e?Lo(e)?Br(e)||e.proxy:en(e.parent):null,Gt=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>en(e.parent),$root:e=>en(e.root),$emit:e=>e.emit,$options:e=>Fn(e),$forceUpdate:e=>e.f||(e.f=()=>An(e.update)),$nextTick:e=>e.n||(e.n=Ra.bind(e.proxy)),$watch:e=>Na.bind(e)}),zr=(e,t)=>e!==q&&!e.__isScriptSetup&&z(e,t),ec={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:l,appContext:s}=e;let c;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(zr(n,t))return a[t]=1,n[t];if(i!==q&&z(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&z(c,t))return a[t]=3,o[t];if(r!==q&&z(r,t))return a[t]=4,r[t];tn&&(a[t]=0)}}const f=Gt[t];let u,p;if(f)return t==="$attrs"&&_e(e,"get",t),f(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(r!==q&&z(r,t))return a[t]=4,r[t];if(p=s.config.globalProperties,z(p,t))return p[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return zr(i,t)?(i[t]=r,!0):n!==q&&z(n,t)?(n[t]=r,!0):z(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let l;return!!r[a]||e!==q&&z(e,a)||zr(t,a)||(l=o[0])&&z(l,a)||z(n,a)||z(Gt,a)||z(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:z(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function ii(e){return B(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let tn=!0;function tc(e){const t=Fn(e),r=e.proxy,n=e.ctx;tn=!1,t.beforeCreate&&oi(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:l,provide:s,inject:c,created:f,beforeMount:u,mounted:p,beforeUpdate:m,updated:g,activated:b,deactivated:L,beforeDestroy:E,beforeUnmount:k,destroyed:w,unmounted:D,render:G,renderTracked:te,renderTriggered:re,errorCaptured:Y,serverPrefetch:ut,expose:A,inheritAttrs:Je,components:je,directives:Ve,filters:be}=t;if(c&&rc(c,n,null),a)for(const J in a){const $=a[J];U($)&&(n[J]=$.bind(r))}if(i){const J=i.call(r,r);ee(J)&&(e.data=On(J))}if(tn=!0,o)for(const J in o){const $=o[J],Ae=U($)?$.bind(r,r):U($.get)?$.get.bind(r,r):Me,et=!U($)&&U($.set)?$.set.bind(r):Me,Pe=Ac({get:Ae,set:et});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:Ce=>Pe.value=Ce})}if(l)for(const J in l)ko(l[J],n,r,J);if(s){const J=U(s)?s.call(r):s;Reflect.ownKeys(J).forEach($=>{cc($,J[$])})}f&&oi(f,e,"c");function ne(J,$){B($)?$.forEach(Ae=>J(Ae.bind(r))):$&&J($.bind(r))}if(ne(Ka,u),ne(Eo,p),ne(Ja,m),ne(Va,g),ne(wa,b),ne(Ga,L),ne(Xa,Y),ne(Qa,te),ne(Ya,re),ne(Wa,k),ne(Ro,D),ne(qa,ut),B(A))if(A.length){const J=e.exposed||(e.exposed={});A.forEach($=>{Object.defineProperty(J,$,{get:()=>r[$],set:Ae=>r[$]=Ae})})}else e.exposed||(e.exposed={});G&&e.render===Me&&(e.render=G),Je!=null&&(e.inheritAttrs=Je),je&&(e.components=je),Ve&&(e.directives=Ve)}function rc(e,t,r=Me){B(e)&&(e=rn(e));for(const n in e){const i=e[n];let o;ee(i)?"default"in i?o=hr(i.from||n,i.default,!0):o=hr(i.from||n):o=hr(i),de(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[n]=o}}function oi(e,t,r){Ie(B(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function ko(e,t,r,n){const i=n.includes(".")?To(r,n):()=>r[n];if(se(e)){const o=t[e];U(o)&&Nr(i,o)}else if(U(e))Nr(i,e.bind(r));else if(ee(e))if(B(e))e.forEach(o=>ko(o,t,r,n));else{const o=U(e.handler)?e.handler.bind(r):t[e.handler];U(o)&&Nr(i,o,e)}}function Fn(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,l=o.get(t);let s;return l?s=l:!i.length&&!r&&!n?s=t:(s={},i.length&&i.forEach(c=>Tr(s,c,a,!0)),Tr(s,t,a)),ee(t)&&o.set(t,s),s}function Tr(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&Tr(e,o,r,!0),i&&i.forEach(a=>Tr(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const l=nc[a]||r&&r[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const nc={data:si,props:ai,emits:ai,methods:Ut,computed:Ut,beforeCreate:me,created:me,beforeMount:me,mounted:me,beforeUpdate:me,updated:me,beforeDestroy:me,beforeUnmount:me,destroyed:me,unmounted:me,activated:me,deactivated:me,errorCaptured:me,serverPrefetch:me,components:Ut,directives:Ut,watch:oc,provide:si,inject:ic};function si(e,t){return t?e?function(){return ie(U(e)?e.call(this,this):e,U(t)?t.call(this,this):t)}:t:e}function ic(e,t){return Ut(rn(e),rn(t))}function rn(e){if(B(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function me(e,t){return e?[...new Set([].concat(e,t))]:t}function Ut(e,t){return e?ie(Object.create(null),e,t):t}function ai(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:ie(Object.create(null),ii(e),ii(t??{})):t}function oc(e,t){if(!e)return t;if(!t)return e;const r=ie(Object.create(null),e);for(const n in t)r[n]=me(e[n],t[n]);return r}function Oo(){return{app:null,config:{isNativeTag:Os,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sc=0;function ac(e,t){return function(n,i=null){U(n)||(n=ie({},n)),i!=null&&!ee(i)&&(i=null);const o=Oo(),a=new Set;let l=!1;const s=o.app={_uid:sc++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Lc,get config(){return o.config},set config(c){},use(c,...f){return a.has(c)||(c&&U(c.install)?(a.add(c),c.install(s,...f)):U(c)&&(a.add(c),c(s,...f))),s},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),s},component(c,f){return f?(o.components[c]=f,s):o.components[c]},directive(c,f){return f?(o.directives[c]=f,s):o.directives[c]},mount(c,f,u){if(!l){const p=lt(n,i);return p.appContext=o,f&&t?t(p,c):e(p,c,u),l=!0,s._container=c,c.__vue_app__=s,Br(p.component)||p.component.proxy}},unmount(){l&&(e(null,s._container),delete s._container.__vue_app__)},provide(c,f){return o.provides[c]=f,s},runWithContext(c){Pr=s;try{return c()}finally{Pr=null}}};return s}}let Pr=null;function cc(e,t){if(pe){let r=pe.provides;const n=pe.parent&&pe.parent.provides;n===r&&(r=pe.provides=Object.create(n)),r[e]=t}}function hr(e,t,r=!1){const n=pe||Oe;if(n||Pr){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Pr._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&U(t)?t.call(n&&n.proxy):t}}function lc(e,t,r,n=!1){const i={},o={};br(o,Fr,1),e.propsDefaults=Object.create(null),Do(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:_a(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function fc(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,l=H(i),[s]=e.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let u=0;u<f.length;u++){let p=f[u];if(Ir(e.emitsOptions,p))continue;const m=t[p];if(s)if(z(o,p))m!==o[p]&&(o[p]=m,c=!0);else{const g=St(p);i[g]=nn(s,l,g,m,e,!1)}else m!==o[p]&&(o[p]=m,c=!0)}}}else{Do(e,t,i,o)&&(c=!0);let f;for(const u in l)(!t||!z(t,u)&&((f=Et(u))===u||!z(t,f)))&&(s?r&&(r[u]!==void 0||r[f]!==void 0)&&(i[u]=nn(s,l,u,void 0,e,!0)):delete i[u]);if(o!==l)for(const u in o)(!t||!z(t,u))&&(delete o[u],c=!0)}c&&He(e,"set","$attrs")}function Do(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,l;if(t)for(let s in t){if(ur(s))continue;const c=t[s];let f;i&&z(i,f=St(s))?!o||!o.includes(f)?r[f]=c:(l||(l={}))[f]=c:Ir(e.emitsOptions,s)||(!(s in n)||c!==n[s])&&(n[s]=c,a=!0)}if(o){const s=H(r),c=l||q;for(let f=0;f<o.length;f++){const u=o[f];r[u]=nn(i,s,u,c[u],e,!z(c,u))}}return a}function nn(e,t,r,n,i,o){const a=e[r];if(a!=null){const l=z(a,"default");if(l&&n===void 0){const s=a.default;if(a.type!==Function&&!a.skipFactory&&U(s)){const{propsDefaults:c}=i;r in c?n=c[r]:(xt(i),n=c[r]=s.call(null,t),ft())}else n=s}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===Et(r))&&(n=!0))}return n}function Mo(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},l=[];let s=!1;if(!U(e)){const f=u=>{s=!0;const[p,m]=Mo(u,t,!0);ie(a,p),m&&l.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!s)return ee(e)&&n.set(e,_t),_t;if(B(o))for(let f=0;f<o.length;f++){const u=St(o[f]);ci(u)&&(a[u]=q)}else if(o)for(const f in o){const u=St(f);if(ci(u)){const p=o[f],m=a[u]=B(p)||U(p)?{type:p}:ie({},p);if(m){const g=ui(Boolean,m.type),b=ui(String,m.type);m[0]=g>-1,m[1]=b<0||g<b,(g>-1||z(m,"default"))&&l.push(u)}}}const c=[a,l];return ee(e)&&n.set(e,c),c}function ci(e){return e[0]!=="$"}function li(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function fi(e,t){return li(e)===li(t)}function ui(e,t){return B(t)?t.findIndex(r=>fi(r,e)):U(t)&&fi(t,e)?0:-1}const Io=e=>e[0]==="_"||e==="$stable",Bn=e=>B(e)?e.map(Le):[Le(e)],uc=(e,t,r)=>{if(t._n)return t;const n=ja((...i)=>Bn(t(...i)),r);return n._c=!1,n},jo=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Io(i))continue;const o=e[i];if(U(o))t[i]=uc(i,o,n);else if(o!=null){const a=Bn(o);t[i]=()=>a}}},Ao=(e,t)=>{const r=Bn(t);e.slots.default=()=>r},pc=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=H(t),br(t,"_",r)):jo(t,e.slots={})}else e.slots={},t&&Ao(e,t);br(e.slots,Fr,1)},dc=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=q;if(n.shapeFlag&32){const l=t._;l?r&&l===1?o=!1:(ie(i,t),!r&&l===1&&delete i._):(o=!t.$stable,jo(t,i)),a=t}else t&&(Ao(e,t),a={default:1});if(o)for(const l in i)!Io(l)&&!(l in a)&&delete i[l]};function on(e,t,r,n,i=!1){if(B(e)){e.forEach((p,m)=>on(p,t&&(B(t)?t[m]:t),r,n,i));return}if(dr(n)&&!i)return;const o=n.shapeFlag&4?Br(n.component)||n.component.proxy:n.el,a=i?null:o,{i:l,r:s}=e,c=t&&t.r,f=l.refs===q?l.refs={}:l.refs,u=l.setupState;if(c!=null&&c!==s&&(se(c)?(f[c]=null,z(u,c)&&(u[c]=null)):de(c)&&(c.value=null)),U(s))Xe(s,l,12,[a,f]);else{const p=se(s),m=de(s);if(p||m){const g=()=>{if(e.f){const b=p?z(u,s)?u[s]:f[s]:s.value;i?B(b)&&_n(b,o):B(b)?b.includes(o)||b.push(o):p?(f[s]=[o],z(u,s)&&(u[s]=f[s])):(s.value=[o],e.k&&(f[e.k]=s.value))}else p?(f[s]=a,z(u,s)&&(u[s]=a)):m&&(s.value=a,e.k&&(f[e.k]=a))};a?(g.id=-1,ve(g,r)):g()}}}const ve=$a;function hc(e){return mc(e)}function mc(e,t){const r=Wr();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:l,createComment:s,setText:c,setElementText:f,parentNode:u,nextSibling:p,setScopeId:m=Me,insertStaticContent:g}=e,b=(d,h,v,_=null,y=null,T=null,x=!1,S=null,P=!!h.dynamicChildren)=>{if(d===h)return;d&&!At(d,h)&&(_=dt(d),Ce(d,y,T,!0),d=null),h.patchFlag===-2&&(P=!1,h.dynamicChildren=null);const{type:C,ref:M,shapeFlag:O}=h;switch(C){case Ar:L(d,h,v,_);break;case Yt:E(d,h,v,_);break;case wr:d==null&&k(h,v,_,x);break;case we:je(d,h,v,_,y,T,x,S,P);break;default:O&1?G(d,h,v,_,y,T,x,S,P):O&6?Ve(d,h,v,_,y,T,x,S,P):(O&64||O&128)&&C.process(d,h,v,_,y,T,x,S,P,Q)}M!=null&&y&&on(M,d&&d.ref,T,h||d,!h)},L=(d,h,v,_)=>{if(d==null)n(h.el=l(h.children),v,_);else{const y=h.el=d.el;h.children!==d.children&&c(y,h.children)}},E=(d,h,v,_)=>{d==null?n(h.el=s(h.children||""),v,_):h.el=d.el},k=(d,h,v,_)=>{[d.el,d.anchor]=g(d.children,h,v,_,d.el,d.anchor)},w=({el:d,anchor:h},v,_)=>{let y;for(;d&&d!==h;)y=p(d),n(d,v,_),d=y;n(h,v,_)},D=({el:d,anchor:h})=>{let v;for(;d&&d!==h;)v=p(d),i(d),d=v;i(h)},G=(d,h,v,_,y,T,x,S,P)=>{x=x||h.type==="svg",d==null?te(h,v,_,y,T,x,S,P):ut(d,h,y,T,x,S,P)},te=(d,h,v,_,y,T,x,S)=>{let P,C;const{type:M,props:O,shapeFlag:I,transition:F,dirs:N}=d;if(P=d.el=a(d.type,T,O&&O.is,O),I&8?f(P,d.children):I&16&&Y(d.children,P,null,_,y,T&&M!=="foreignObject",x,S),N&&tt(d,null,_,"created"),re(P,d,d.scopeId,x,_),O){for(const V in O)V!=="value"&&!ur(V)&&o(P,V,null,O[V],T,d.children,_,y,le);"value"in O&&o(P,"value",null,O.value),(C=O.onVnodeBeforeMount)&&Be(C,_,d)}N&&tt(d,null,_,"beforeMount");const W=(!y||y&&!y.pendingBranch)&&F&&!F.persisted;W&&F.beforeEnter(P),n(P,h,v),((C=O&&O.onVnodeMounted)||W||N)&&ve(()=>{C&&Be(C,_,d),W&&F.enter(P),N&&tt(d,null,_,"mounted")},y)},re=(d,h,v,_,y)=>{if(v&&m(d,v),_)for(let T=0;T<_.length;T++)m(d,_[T]);if(y){let T=y.subTree;if(h===T){const x=y.vnode;re(d,x,x.scopeId,x.slotScopeIds,y.parent)}}},Y=(d,h,v,_,y,T,x,S,P=0)=>{for(let C=P;C<d.length;C++){const M=d[C]=S?Ye(d[C]):Le(d[C]);b(null,M,h,v,_,y,T,x,S)}},ut=(d,h,v,_,y,T,x)=>{const S=h.el=d.el;let{patchFlag:P,dynamicChildren:C,dirs:M}=h;P|=d.patchFlag&16;const O=d.props||q,I=h.props||q;let F;v&&rt(v,!1),(F=I.onVnodeBeforeUpdate)&&Be(F,v,h,d),M&&tt(h,d,v,"beforeUpdate"),v&&rt(v,!0);const N=y&&h.type!=="foreignObject";if(C?A(d.dynamicChildren,C,S,v,_,N,T):x||$(d,h,S,null,v,_,N,T,!1),P>0){if(P&16)Je(S,h,O,I,v,_,y);else if(P&2&&O.class!==I.class&&o(S,"class",null,I.class,y),P&4&&o(S,"style",O.style,I.style,y),P&8){const W=h.dynamicProps;for(let V=0;V<W.length;V++){const Z=W[V],xe=O[Z],mt=I[Z];(mt!==xe||Z==="value")&&o(S,Z,xe,mt,y,d.children,v,_,le)}}P&1&&d.children!==h.children&&f(S,h.children)}else!x&&C==null&&Je(S,h,O,I,v,_,y);((F=I.onVnodeUpdated)||M)&&ve(()=>{F&&Be(F,v,h,d),M&&tt(h,d,v,"updated")},_)},A=(d,h,v,_,y,T,x)=>{for(let S=0;S<h.length;S++){const P=d[S],C=h[S],M=P.el&&(P.type===we||!At(P,C)||P.shapeFlag&70)?u(P.el):v;b(P,C,M,null,_,y,T,x,!0)}},Je=(d,h,v,_,y,T,x)=>{if(v!==_){if(v!==q)for(const S in v)!ur(S)&&!(S in _)&&o(d,S,v[S],null,x,h.children,y,T,le);for(const S in _){if(ur(S))continue;const P=_[S],C=v[S];P!==C&&S!=="value"&&o(d,S,C,P,x,h.children,y,T,le)}"value"in _&&o(d,"value",v.value,_.value)}},je=(d,h,v,_,y,T,x,S,P)=>{const C=h.el=d?d.el:l(""),M=h.anchor=d?d.anchor:l("");let{patchFlag:O,dynamicChildren:I,slotScopeIds:F}=h;F&&(S=S?S.concat(F):F),d==null?(n(C,v,_),n(M,v,_),Y(h.children,v,M,y,T,x,S,P)):O>0&&O&64&&I&&d.dynamicChildren?(A(d.dynamicChildren,I,v,y,T,x,S),(h.key!=null||y&&h===y.subTree)&&Fo(d,h,!0)):$(d,h,v,M,y,T,x,S,P)},Ve=(d,h,v,_,y,T,x,S,P)=>{h.slotScopeIds=S,d==null?h.shapeFlag&512?y.ctx.activate(h,v,_,x,P):be(h,v,_,y,T,x,P):pt(d,h,P)},be=(d,h,v,_,y,T,x)=>{const S=d.component=kc(d,_,y);if(Po(d)&&(S.ctx.renderer=Q),Oc(S),S.asyncDep){if(y&&y.registerDep(S,ne),!d.el){const P=S.subTree=lt(Yt);E(null,P,h,v)}return}ne(S,d,h,v,y,T,x)},pt=(d,h,v)=>{const _=h.component=d.component;if(Ba(d,h,v))if(_.asyncDep&&!_.asyncResolved){J(_,h,v);return}else _.next=h,Oa(_.update),_.update();else h.el=d.el,_.vnode=h},ne=(d,h,v,_,y,T,x)=>{const S=()=>{if(d.isMounted){let{next:M,bu:O,u:I,parent:F,vnode:N}=d,W=M,V;rt(d,!1),M?(M.el=N.el,J(d,M,x)):M=N,O&&pr(O),(V=M.props&&M.props.onVnodeBeforeUpdate)&&Be(V,F,M,N),rt(d,!0);const Z=$r(d),xe=d.subTree;d.subTree=Z,b(xe,Z,u(xe.el),dt(xe),d,y,T),M.el=Z.el,W===null&&La(d,Z.el),I&&ve(I,y),(V=M.props&&M.props.onVnodeUpdated)&&ve(()=>Be(V,F,M,N),y)}else{let M;const{el:O,props:I}=h,{bm:F,m:N,parent:W}=d,V=dr(h);if(rt(d,!1),F&&pr(F),!V&&(M=I&&I.onVnodeBeforeMount)&&Be(M,W,h),rt(d,!0),O&&It){const Z=()=>{d.subTree=$r(d),It(O,d.subTree,d,y,null)};V?h.type.__asyncLoader().then(()=>!d.isUnmounted&&Z()):Z()}else{const Z=d.subTree=$r(d);b(null,Z,v,_,d,y,T),h.el=Z.el}if(N&&ve(N,y),!V&&(M=I&&I.onVnodeMounted)){const Z=h;ve(()=>Be(M,W,Z),y)}(h.shapeFlag&256||W&&dr(W.vnode)&&W.vnode.shapeFlag&256)&&d.a&&ve(d.a,y),d.isMounted=!0,h=v=_=null}},P=d.effect=new xn(S,()=>An(C),d.scope),C=d.update=()=>P.run();C.id=d.uid,rt(d,!0),C()},J=(d,h,v)=>{h.component=d;const _=d.vnode.props;d.vnode=h,d.next=null,fc(d,h.props,_,v),dc(d,h.children,v),Rt(),ti(),kt()},$=(d,h,v,_,y,T,x,S,P=!1)=>{const C=d&&d.children,M=d?d.shapeFlag:0,O=h.children,{patchFlag:I,shapeFlag:F}=h;if(I>0){if(I&128){et(C,O,v,_,y,T,x,S,P);return}else if(I&256){Ae(C,O,v,_,y,T,x,S,P);return}}F&8?(M&16&&le(C,y,T),O!==C&&f(v,O)):M&16?F&16?et(C,O,v,_,y,T,x,S,P):le(C,y,T,!0):(M&8&&f(v,""),F&16&&Y(O,v,_,y,T,x,S,P))},Ae=(d,h,v,_,y,T,x,S,P)=>{d=d||_t,h=h||_t;const C=d.length,M=h.length,O=Math.min(C,M);let I;for(I=0;I<O;I++){const F=h[I]=P?Ye(h[I]):Le(h[I]);b(d[I],F,v,null,y,T,x,S,P)}C>M?le(d,y,T,!0,!1,O):Y(h,v,_,y,T,x,S,P,O)},et=(d,h,v,_,y,T,x,S,P)=>{let C=0;const M=h.length;let O=d.length-1,I=M-1;for(;C<=O&&C<=I;){const F=d[C],N=h[C]=P?Ye(h[C]):Le(h[C]);if(At(F,N))b(F,N,v,null,y,T,x,S,P);else break;C++}for(;C<=O&&C<=I;){const F=d[O],N=h[I]=P?Ye(h[I]):Le(h[I]);if(At(F,N))b(F,N,v,null,y,T,x,S,P);else break;O--,I--}if(C>O){if(C<=I){const F=I+1,N=F<M?h[F].el:_;for(;C<=I;)b(null,h[C]=P?Ye(h[C]):Le(h[C]),v,N,y,T,x,S,P),C++}}else if(C>I)for(;C<=O;)Ce(d[C],y,T,!0),C++;else{const F=C,N=C,W=new Map;for(C=N;C<=I;C++){const Se=h[C]=P?Ye(h[C]):Le(h[C]);Se.key!=null&&W.set(Se.key,C)}let V,Z=0;const xe=I-N+1;let mt=!1,Hn=0;const jt=new Array(xe);for(C=0;C<xe;C++)jt[C]=0;for(C=F;C<=O;C++){const Se=d[C];if(Z>=xe){Ce(Se,y,T,!0);continue}let Fe;if(Se.key!=null)Fe=W.get(Se.key);else for(V=N;V<=I;V++)if(jt[V-N]===0&&At(Se,h[V])){Fe=V;break}Fe===void 0?Ce(Se,y,T,!0):(jt[Fe-N]=C+1,Fe>=Hn?Hn=Fe:mt=!0,b(Se,h[Fe],v,null,y,T,x,S,P),Z++)}const Kn=mt?gc(jt):_t;for(V=Kn.length-1,C=xe-1;C>=0;C--){const Se=N+C,Fe=h[Se],Jn=Se+1<M?h[Se+1].el:_;jt[C]===0?b(null,Fe,v,Jn,y,T,x,S,P):mt&&(V<0||C!==Kn[V]?Pe(Fe,v,Jn,2):V--)}}},Pe=(d,h,v,_,y=null)=>{const{el:T,type:x,transition:S,children:P,shapeFlag:C}=d;if(C&6){Pe(d.component.subTree,h,v,_);return}if(C&128){d.suspense.move(h,v,_);return}if(C&64){x.move(d,h,v,Q);return}if(x===we){n(T,h,v);for(let O=0;O<P.length;O++)Pe(P[O],h,v,_);n(d.anchor,h,v);return}if(x===wr){w(d,h,v);return}if(_!==2&&C&1&&S)if(_===0)S.beforeEnter(T),n(T,h,v),ve(()=>S.enter(T),y);else{const{leave:O,delayLeave:I,afterLeave:F}=S,N=()=>n(T,h,v),W=()=>{O(T,()=>{N(),F&&F()})};I?I(T,N,W):W()}else n(T,h,v)},Ce=(d,h,v,_=!1,y=!1)=>{const{type:T,props:x,ref:S,children:P,dynamicChildren:C,shapeFlag:M,patchFlag:O,dirs:I}=d;if(S!=null&&on(S,null,v,d,!0),M&256){h.ctx.deactivate(d);return}const F=M&1&&I,N=!dr(d);let W;if(N&&(W=x&&x.onVnodeBeforeUnmount)&&Be(W,h,d),M&6)Mt(d.component,v,_);else{if(M&128){d.suspense.unmount(v,_);return}F&&tt(d,null,h,"beforeUnmount"),M&64?d.type.remove(d,h,v,y,Q,_):C&&(T!==we||O>0&&O&64)?le(C,h,v,!1,!0):(T===we&&O&384||!y&&M&16)&&le(P,h,v),_&&Dt(d)}(N&&(W=x&&x.onVnodeUnmounted)||F)&&ve(()=>{W&&Be(W,h,d),F&&tt(d,null,h,"unmounted")},v)},Dt=d=>{const{type:h,el:v,anchor:_,transition:y}=d;if(h===we){We(v,_);return}if(h===wr){D(d);return}const T=()=>{i(v),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(d.shapeFlag&1&&y&&!y.persisted){const{leave:x,delayLeave:S}=y,P=()=>x(v,T);S?S(d.el,T,P):P()}else T()},We=(d,h)=>{let v;for(;d!==h;)v=p(d),i(d),d=v;i(h)},Mt=(d,h,v)=>{const{bum:_,scope:y,update:T,subTree:x,um:S}=d;_&&pr(_),y.stop(),T&&(T.active=!1,Ce(x,d,h,v)),S&&ve(S,h),ve(()=>{d.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},le=(d,h,v,_=!1,y=!1,T=0)=>{for(let x=T;x<d.length;x++)Ce(d[x],h,v,_,y)},dt=d=>d.shapeFlag&6?dt(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el),tr=(d,h,v)=>{d==null?h._vnode&&Ce(h._vnode,null,null,!0):b(h._vnode||null,d,h,null,null,null,v),ti(),yo(),h._vnode=d},Q={p:b,um:Ce,m:Pe,r:Dt,mt:be,mc:Y,pc:$,pbc:A,n:dt,o:e};let ht,It;return t&&([ht,It]=t(Q)),{render:tr,hydrate:ht,createApp:ac(tr,ht)}}function rt({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Fo(e,t,r=!1){const n=e.children,i=t.children;if(B(n)&&B(i))for(let o=0;o<n.length;o++){const a=n[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=Ye(i[o]),l.el=a.el),r||Fo(a,l)),l.type===Ar&&(l.el=a.el)}}function gc(e){const t=e.slice(),r=[0];let n,i,o,a,l;const s=e.length;for(n=0;n<s;n++){const c=e[n];if(c!==0){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)l=o+a>>1,e[r[l]]<c?o=l+1:a=l;c<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const vc=e=>e.__isTeleport,we=Symbol.for("v-fgt"),Ar=Symbol.for("v-txt"),Yt=Symbol.for("v-cmt"),wr=Symbol.for("v-stc"),Ht=[];let De=null;function yc(e=!1){Ht.push(De=e?null:[])}function _c(){Ht.pop(),De=Ht[Ht.length-1]||null}let Qt=1;function pi(e){Qt+=e}function bc(e){return e.dynamicChildren=Qt>0?De||_t:null,_c(),Qt>0&&De&&De.push(e),e}function Cc(e,t,r,n,i,o){return bc(Te(e,t,r,n,i,o,!0))}function Sc(e){return e?e.__v_isVNode===!0:!1}function At(e,t){return e.type===t.type&&e.key===t.key}const Fr="__vInternal",Bo=({key:e})=>e??null,mr=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?se(e)||de(e)||U(e)?{i:Oe,r:e,k:t,f:!!r}:e:null);function Te(e,t=null,r=null,n=0,i=null,o=e===we?0:1,a=!1,l=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bo(t),ref:t&&mr(t),scopeId:Co,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Oe};return l?(Ln(s,r),o&128&&e.normalize(s)):r&&(s.shapeFlag|=se(r)?8:16),Qt>0&&!a&&De&&(s.patchFlag>0||o&6)&&s.patchFlag!==32&&De.push(s),s}const lt=Tc;function Tc(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===Za)&&(e=Yt),Sc(e)){const l=Pt(e,t,!0);return r&&Ln(l,r),Qt>0&&!o&&De&&(l.shapeFlag&6?De[De.indexOf(e)]=l:De.push(l)),l.patchFlag|=-2,l}if(jc(e)&&(e=e.__vccOpts),t){t=Pc(t);let{class:l,style:s}=t;l&&!se(l)&&(t.class=Tn(l)),ee(s)&&(uo(s)&&!B(s)&&(s=ie({},s)),t.style=Sn(s))}const a=se(e)?1:Ua(e)?128:vc(e)?64:ee(e)?4:U(e)?2:0;return Te(e,t,r,n,i,a,o,!0)}function Pc(e){return e?uo(e)||Fr in e?ie({},e):e:null}function Pt(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,l=t?xc(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Bo(l),ref:t&&t.ref?r&&i?B(i)?i.concat(mr(t)):[i,mr(t)]:mr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==we?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pt(e.ssContent),ssFallback:e.ssFallback&&Pt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function sn(e=" ",t=0){return lt(Ar,null,e,t)}function Le(e){return e==null||typeof e=="boolean"?lt(Yt):B(e)?lt(we,null,e.slice()):typeof e=="object"?Ye(e):lt(Ar,null,String(e))}function Ye(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pt(e)}function Ln(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(B(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Ln(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Fr in t)?t._ctx=Oe:i===3&&Oe&&(Oe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else U(t)?(t={default:t,_ctx:Oe},r=32):(t=String(t),n&64?(r=16,t=[sn(t)]):r=8);e.children=t,e.shapeFlag|=r}function xc(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Tn([t.class,n.class]));else if(i==="style")t.style=Sn([t.style,n.style]);else if(Rr(i)){const o=t[i],a=n[i];a&&o!==a&&!(B(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Be(e,t,r,n=null){Ie(e,t,7,[r,n])}const Ec=Oo();let Rc=0;function kc(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||Ec,o={uid:Rc++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mo(n,i),emitsOptions:bo(n,i),emit:null,emitted:null,propsDefaults:q,inheritAttrs:n.inheritAttrs,ctx:q,data:q,props:q,attrs:q,slots:q,refs:q,setupState:q,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Ia.bind(null,o),e.ce&&e.ce(o),o}let pe=null,Un,gt,di="__VUE_INSTANCE_SETTERS__";(gt=Wr()[di])||(gt=Wr()[di]=[]),gt.push(e=>pe=e),Un=e=>{gt.length>1?gt.forEach(t=>t(e)):gt[0](e)};const xt=e=>{Un(e),e.scope.on()},ft=()=>{pe&&pe.scope.off(),Un(null)};function Lo(e){return e.vnode.shapeFlag&4}let Xt=!1;function Oc(e,t=!1){Xt=t;const{props:r,children:n}=e.vnode,i=Lo(e);lc(e,r,i,t),pc(e,n);const o=i?Dc(e,t):void 0;return Xt=!1,o}function Dc(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Mn(new Proxy(e.ctx,ec));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?Ic(e):null;xt(e),Rt();const o=Xe(n,e,0,[e.props,i]);if(kt(),ft(),Yi(o)){if(o.then(ft,ft),t)return o.then(a=>{hi(e,a,t)}).catch(a=>{Mr(a,e,0)});e.asyncDep=o}else hi(e,o,t)}else Uo(e,t)}function hi(e,t,r){U(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ee(t)&&(e.setupState=mo(t)),Uo(e,r)}let mi;function Uo(e,t,r){const n=e.type;if(!e.render){if(!t&&mi&&!n.render){const i=n.template||Fn(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:l,compilerOptions:s}=n,c=ie(ie({isCustomElement:o,delimiters:l},a),s);n.render=mi(i,c)}}e.render=n.render||Me}xt(e),Rt(),tc(e),kt(),ft()}function Mc(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return _e(e,"get","$attrs"),t[r]}}))}function Ic(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return Mc(e)},slots:e.slots,emit:e.emit,expose:t}}function Br(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(mo(Mn(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Gt)return Gt[r](e)},has(t,r){return r in t||r in Gt}}))}function jc(e){return U(e)&&"__vccOpts"in e}const Ac=(e,t)=>xa(e,t,Xt),Fc=Symbol.for("v-scx"),Bc=()=>hr(Fc),Lc="3.3.4",Uc="http://www.w3.org/2000/svg",st=typeof document<"u"?document:null,gi=st&&st.createElement("template"),$c={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?st.createElementNS(Uc,e):st.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>st.createTextNode(e),createComment:e=>st.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>st.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{gi.innerHTML=n?`<svg>${e}</svg>`:e;const l=gi.content;if(n){const s=l.firstChild;for(;s.firstChild;)l.appendChild(s.firstChild);l.removeChild(s)}t.insertBefore(l,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function Nc(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function zc(e,t,r){const n=e.style,i=se(r);if(r&&!i){if(t&&!se(t))for(const o in t)r[o]==null&&an(n,o,"");for(const o in r)an(n,o,r[o])}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const vi=/\s*!important$/;function an(e,t,r){if(B(r))r.forEach(n=>an(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=wc(e,t);vi.test(r)?e.setProperty(Et(n),r.replace(vi,""),"important"):e[n]=r}}const yi=["Webkit","Moz","ms"],Gr={};function wc(e,t){const r=Gr[t];if(r)return r;let n=St(t);if(n!=="filter"&&n in e)return Gr[t]=n;n=Qi(n);for(let i=0;i<yi.length;i++){const o=yi[i]+n;if(o in e)return Gr[t]=o}return t}const _i="http://www.w3.org/1999/xlink";function Gc(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(_i,t.slice(6,t.length)):e.setAttributeNS(_i,t,r);else{const o=Gs(t);r==null||o&&!Xi(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function Hc(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=r;const c=l==="OPTION"?e.getAttribute("value"):e.value,f=r??"";c!==f&&(e.value=f),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const c=typeof e[t];c==="boolean"?r=Xi(r):r==null&&c==="string"?(r="",s=!0):c==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}function yt(e,t,r,n){e.addEventListener(t,r,n)}function Kc(e,t,r,n){e.removeEventListener(t,r,n)}function Jc(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[l,s]=Vc(t);if(n){const c=o[t]=Yc(n,i);yt(e,l,c,s)}else a&&(Kc(e,l,a,s),o[t]=void 0)}}const bi=/(?:Once|Passive|Capture)$/;function Vc(e){let t;if(bi.test(e)){t={};let n;for(;n=e.match(bi);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Et(e.slice(2)),t]}let Hr=0;const Wc=Promise.resolve(),qc=()=>Hr||(Wc.then(()=>Hr=0),Hr=Date.now());function Yc(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ie(Qc(n,r.value),t,5,[n])};return r.value=e,r.attached=qc(),r}function Qc(e,t){if(B(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Ci=/^on[a-z]/,Xc=(e,t,r,n,i=!1,o,a,l,s)=>{t==="class"?Nc(e,n,i):t==="style"?zc(e,r,n):Rr(t)?yn(t)||Jc(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Zc(e,t,n,i))?Hc(e,t,n,o,a,l,s):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Gc(e,t,n,i))};function Zc(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Ci.test(t)&&U(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Ci.test(t)&&se(r)?!1:t in e}const Si=e=>{const t=e.props["onUpdate:modelValue"]||!1;return B(t)?r=>pr(t,r):t};function el(e){e.target.composing=!0}function Ti(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pi={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Si(i);const o=n||i.props&&i.props.type==="number";yt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;r&&(l=l.trim()),o&&(l=Vr(l)),e._assign(l)}),r&&yt(e,"change",()=>{e.value=e.value.trim()}),t||(yt(e,"compositionstart",el),yt(e,"compositionend",Ti),yt(e,"change",Ti))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Si(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&Vr(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},tl=["ctrl","shift","alt","meta"],rl={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>tl.some(r=>e[`${r}Key`]&&!t.includes(r))},nl=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=rl[t[i]];if(o&&o(r,t))return}return e(r,...n)},il=ie({patchProp:Xc},$c);let xi;function ol(){return xi||(xi=hc(il))}const sl=(...e)=>{const t=ol().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=al(n);if(!i)return;const o=t._component;!U(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function al(e){return se(e)?document.querySelector(e):e}var cl=!1;/*!
  * pinia v2.1.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ll=Symbol();var Ei;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ei||(Ei={}));function fl(){const e=Hs(!0),t=e.run(()=>vt({}));let r=[],n=[];const i=Mn({install(o){i._a=o,o.provide(ll,i),o.config.globalProperties.$pinia=i,n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!cl?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return i}function $n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $o={exports:{}};(function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=t;var r=e.exports.BlobBuilder;typeof window<"u"&&(r=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function n(){this._pieces=[],this._parts=[]}n.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},n.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);t.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var i=new r,o=0,a=this._parts.length;o<a;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=n})($o);var No=$o.exports,ul=No.BufferBuilder,Ri=No.binaryFeatures,pl={unpack:function(e){var t=new ae(e);return t.unpack()},pack:function(e){var t=new ce;t.pack(e);var r=t.getBuffer();return r}},dl=pl;function ae(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}ae.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}};ae.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};ae.prototype.unpack_uint16=function(){var e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t};ae.prototype.unpack_uint32=function(){var e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t};ae.prototype.unpack_uint64=function(){var e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t};ae.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256};ae.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536};ae.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};ae.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};ae.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t};ae.prototype.unpack_string=function(e){for(var t=this.read(e),r=0,n="",i,o;r<e;)i=t[r],i<128?(n+=String.fromCharCode(i),r++):(i^192)<32?(o=(i^192)<<6|t[r+1]&63,n+=String.fromCharCode(o),r+=2):(o=(i&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,n+=String.fromCharCode(o),r+=3);return this.index+=e,n};ae.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t};ae.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t};ae.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,n=e&8388607|8388608;return(t===0?1:-1)*n*Math.pow(2,r-23)};ae.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,n=(e>>20&2047)-1023,i=e&1048575|1048576,o=i*Math.pow(2,n-20)+t*Math.pow(2,n-52);return(r===0?1:-1)*o};ae.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")};function ce(){this.bufferBuilder=new ul}ce.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};ce.prototype.pack=function(e){var t=typeof e;if(t==="string")this.pack_string(e);else if(t==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(t==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(t==="undefined")this.bufferBuilder.append(192);else if(t==="object")if(e===null)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(r==ArrayBuffer)Ri.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)Ri.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+r.toString()+'" not yet supported')}else throw new Error('Type "'+t+'" not yet supported');this.bufferBuilder.flush()};ce.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};ce.prototype.pack_string=function(e){var t=ml(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};ce.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(var r=0;r<t;r++)this.pack(e[r])};ce.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};ce.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),a=t<<31|r+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)};ce.prototype.pack_object=function(e){var t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))};ce.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};ce.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};ce.prototype.pack_uint32=function(e){var t=e&4294967295;this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};ce.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};ce.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};ce.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};ce.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};ce.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};function hl(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function ml(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,hl).length}const ki=$n(dl);let zo=!0,wo=!0;function $t(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Ot(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,l){if(a!==t)return i.apply(this,arguments);const s=c=>{const f=r(c);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,s),i.apply(this,[a,s])};const o=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const s=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,s])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function gl(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(zo=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function vl(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(wo=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Nn(){if(typeof window=="object"){if(zo)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Lr(e,t){wo&&console.warn(e+" is deprecated, please use "+t+" instead.")}function yl(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=$t(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=$t(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=$t(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=$t(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Oi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Go(e){return Oi(e)?Object.keys(e).reduce(function(t,r){const n=Oi(e[r]),i=n?Go(e[r]):e[r],o=n&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[r]:i})},{}):e}function cn(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?cn(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{cn(e,e.get(i),r)})}))}function Di(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(l=>{l.type===n&&l.trackId===a.id&&cn(e,l,i)})}),i}const Mi=Nn;function Ho(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const s={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const f=typeof l[c]=="object"?l[c]:{ideal:l[c]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const u=function(p,m){return p?p+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(f.ideal!==void 0){s.optional=s.optional||[];let p={};typeof f.ideal=="number"?(p[u("min",c)]=f.ideal,s.optional.push(p),p={},p[u("max",c)]=f.ideal,s.optional.push(p)):(p[u("",c)]=f.ideal,s.optional.push(p))}f.exact!==void 0&&typeof f.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",c)]=f.exact):["min","max"].forEach(p=>{f[p]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(p,c)]=f[p])})}),l.advanced&&(s.optional=(s.optional||[]).concat(l.advanced)),s},i=function(l,s){if(t.version>=61)return s(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(f,u,p){u in f&&!(p in f)&&(f[p]=f[u],delete f[u])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const f=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let u;if(c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(p=>{p=p.filter(g=>g.kind==="videoinput");let m=p.find(g=>u.some(b=>g.label.toLowerCase().includes(b)));return!m&&p.length&&u.includes("back")&&(m=p[p.length-1]),m&&(l.video.deviceId=c.exact?{exact:m.deviceId}:{ideal:m.deviceId}),l.video=n(l.video),Mi("chrome: "+JSON.stringify(l)),s(l)})}l.video=n(l.video)}return Mi("chrome: "+JSON.stringify(l)),s(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,s,c){i(l,f=>{r.webkitGetUserMedia(f,s,u=>{c&&c(o(u))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,c=>l(c).then(f=>{if(c.audio&&!f.getAudioTracks().length||c.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function _l(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(i=>{const o=n.video&&n.video.width,a=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(n.video.mandatory.maxWidth=o),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)})}}}function Ko(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Jo(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ot(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Vo(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,s){let c=i.apply(this,arguments);return c||(c=t(this,l),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const s=this._senders.indexOf(l);s!==-1&&this._senders.splice(s,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{const l=this._senders.find(s=>s.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Wo(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,i,o]=arguments;if(arguments.length>0&&typeof n=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof n!="function"))return t.apply(this,[]);const a=function(s){const c={};return s.result().forEach(u=>{const p={id:u.id,timestamp:u.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[u.type]||u.type};u.names().forEach(m=>{p[m]=u.stat(m)}),c[p.id]=p}),c},l=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){const s=function(c){i(l(a(c)))};return t.apply(this,[s,n])}return new Promise((s,c)=>{t.apply(this,[function(f){s(l(a(f)))},c])}).then(i,o)}}function qo(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>Di(a,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Ot(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Di(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,o,a;return this.getSenders().forEach(l=>{l.track===n&&(i?a=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===n&&(o?a=!0:o=l),l.track===n)),a||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Yo(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(s)===-1&&this._shimmedLocalStreams[l.id].push(s):this._shimmedLocalStreams[l.id]=[l,s],s};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const s=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(s)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const s=this._shimmedLocalStreams[l].indexOf(a);s!==-1&&this._shimmedLocalStreams[l].splice(s,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Qo(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Yo(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(u=>this._reverseStreams[u.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(u=>{if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const u=new e.MediaStream(f.getTracks());this._streams[f.id]=u,this._reverseStreams[u.id]=f,f=u}n.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(b=>b===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(b=>b.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[u.id];if(g)g.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const b=new e.MediaStream([f]);this._streams[u.id]=b,this._reverseStreams[b.id]=u,this.addStream(b)}return this.getSenders().find(b=>b.track===f)};function o(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:f.type,sdp:u})}function a(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:f.type,sdp:u})}["createOffer","createAnswer"].forEach(function(c){const f=e.RTCPeerConnection.prototype[c],u={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[g=>{const b=o(this,g);p[0].apply(null,[b])},g=>{p[1]&&p[1].apply(null,g)},arguments[2]]):f.apply(this,arguments).then(g=>o(this,g))}};e.RTCPeerConnection.prototype[c]=u[c]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(b=>f.track===b)&&(p=this._streams[m])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ln(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function Xo(e,t){Ot(e,"negotiationneeded",r=>{const n=r.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const Ii=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Xo,shimAddTrackRemoveTrack:Qo,shimAddTrackRemoveTrackWithNative:Yo,shimGetDisplayMedia:_l,shimGetSendersWithDtmf:Vo,shimGetStats:Wo,shimGetUserMedia:Ho,shimMediaStream:Ko,shimOnTrack:Jo,shimPeerConnection:ln,shimSenderReceiverGetStats:qo},Symbol.toStringTag,{value:"Module"}));function bl(e,t){let r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(n=>{if(n&&(n.urls||n.url)){let i=n.urls||n.url;n.url&&!n.urls&&Lr("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(a=>{if(a.indexOf("stun:")===0)return!1;const l=a.startsWith("turn")&&!a.startsWith("turn:[")&&a.includes("transport=udp");return l&&!r?(r=!0,!0):l&&!r}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}var Zo={exports:{}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(function(n){return n.trim()})},t.splitSections=function(r){var n=r.split(`
m=`);return n.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},t.getDescription=function(r){var n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){var n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(function(i){return i.indexOf(n)===0})},t.parseCandidate=function(r){var n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");for(var i={foundation:n[0],component:parseInt(n[1],10),protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]},o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]=n[o+1];break}return i},t.writeCandidate=function(r){var n=[];n.push(r.foundation),n.push(r.component),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);var i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substr(14).split(" ")},t.parseRtpMap=function(r){var n=r.substr(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){var n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);var i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){var n=r.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},t.parseFmtp=function(r){for(var n={},i,o=r.substr(r.indexOf(" ")+1).split(";"),a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){var n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var o=[];Object.keys(r.parameters).forEach(function(a){r.parameters[a]?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){var n=r.substr(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){var n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(o){n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){var n=r.indexOf(" "),i={ssrc:parseInt(r.substr(7,n-7),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substr(n+1,o-n-1),i.value=r.substr(o+1)):i.attribute=r.substr(n+1),i},t.parseSsrcGroup=function(r){var n=r.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(function(i){return parseInt(i,10)})}},t.getMid=function(r){var n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(r){var n=r.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1]}},t.getDtlsParameters=function(r,n){var i=t.matchPrefix(r+n,"a=fingerprint:");return{role:"auto",fingerprints:i.map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){var i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){var n=r.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var n=r.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){var i=t.matchPrefix(r+n,"a=crypto:");return i.map(t.parseCryptoLine)},t.getIceParameters=function(r,n){var i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`},t.parseRtpParameters=function(r){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r),o=i[0].split(" "),a=3;a<o.length;a++){var l=o[a],s=t.matchPrefix(r,"a=rtpmap:"+l+" ")[0];if(s){var c=t.parseRtpMap(s),f=t.matchPrefix(r,"a=fmtp:"+l+" ");switch(c.parameters=f.length?t.parseFmtp(f[0]):{},c.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(r,"a=extmap:").forEach(function(u){n.headerExtensions.push(t.parseExtmap(u))}),n},t.writeRtpDescription=function(r,n){var i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map(function(a){return a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(function(a){i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});var o=0;return n.codecs.forEach(function(a){a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,n.headerExtensions&&n.headerExtensions.forEach(function(a){i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){var n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(r,"a=ssrc:").map(function(p){return t.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="cname"}),s=l.length>0&&l[0].ssrc,c,f=t.matchPrefix(r,"a=ssrc-group:FID").map(function(p){var m=p.substr(17).split(" ");return m.map(function(g){return parseInt(g,10)})});f.length>0&&f[0].length>1&&f[0][0]===s&&(c=f[0][1]),i.codecs.forEach(function(p){if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){var m={ssrc:s,codecPayloadType:parseInt(p.parameters.apt,10)};s&&c&&(m.rtx={ssrc:c}),n.push(m),o&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},n.push(m))}}),n.length===0&&s&&n.push({ssrc:s});var u=t.matchPrefix(r,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substr(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substr(5),10)*1e3*.95-50*40*8:u=void 0,n.forEach(function(p){p.maxBitrate=u})),n},t.parseRtcpParameters=function(r){var n={},i=t.matchPrefix(r,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;var a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.parseMsid=function(r){var n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};var o=t.matchPrefix(r,"a=ssrc:").map(function(a){return t.parseSsrcMedia(a)}).filter(function(a){return a.attribute==="msid"});if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(r){var n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:o};var l=t.matchPrefix(r,"a=sctpmap:");if(l.length>0){var s=t.matchPrefix(r,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){var i=[];return r.protocol!=="DTLS/SCTP"?i=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(r,n,i){var o,a=n!==void 0?n:2;r?o=r:o=t.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(r,n,i,o){var a=t.writeRtpDescription(r.kind,n);if(a+=t.writeIceParameters(r.iceGatherer.getLocalParameters()),a+=t.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),a+="a=mid:"+r.mid+`\r
`,r.direction?a+="a="+r.direction+`\r
`:r.rtpSender&&r.rtpReceiver?a+=`a=sendrecv\r
`:r.rtpSender?a+=`a=sendonly\r
`:r.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,r.rtpSender){var l="msid:"+o.id+" "+r.rtpSender.track.id+`\r
`;a+="a="+l,a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+l,r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),a},t.getDirection=function(r,n){for(var i=t.splitLines(r),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){var n=t.splitLines(r),i=n[0].split(" ");return i[0].substr(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){var n=t.splitLines(r),i=n[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(r){var n=t.matchPrefix(r,"o=")[0],i=n.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var n=t.splitLines(r),i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Zo);var es=Zo.exports;const gr=$n(es);var j=es;function Cl(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function ji(e,t,r,n,i){var o=j.writeRtpDescription(e.kind,t);if(o+=j.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=j.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":i||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var l="msid:"+(n?n.id:"-")+" "+a+`\r
`;o+="a="+l,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+j.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+j.localCName+`\r
`),o}function Sl(e,t){var r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(n){if(n&&(n.urls||n.url)){var i=n.urls||n.url;n.url&&!n.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(a){var l=a.indexOf("turn:")===0&&a.indexOf("transport=udp")!==-1&&a.indexOf("turn:[")===-1&&!r;return l?(r=!0,!0):a.indexOf("stun:")===0&&t>=14393&&a.indexOf("?transport=udp")===-1}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}function cr(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(o,a){o=parseInt(o,10);for(var l=0;l<a.length;l++)if(a[l].payloadType===o||a[l].preferredPayloadType===o)return a[l]},i=function(o,a,l,s){var c=n(o.parameters.apt,l),f=n(a.parameters.apt,s);return c&&f&&c.name.toLowerCase()===f.name.toLowerCase()};return e.codecs.forEach(function(o){for(var a=0;a<t.codecs.length;a++){var l=t.codecs[a];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,e.codecs,t.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),r.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(s){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===s.type&&o.rtcpFeedback[c].parameter===s.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var a=0;a<t.headerExtensions.length;a++){var l=t.headerExtensions[a];if(o.uri===l.uri){r.headerExtensions.push(l);break}}}),r}function Ai(e,t,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)!==-1}function Kr(e,t){var r=e.getRemoteCandidates().find(function(n){return t.foundation===n.foundation&&t.ip===n.ip&&t.port===n.port&&t.priority===n.priority&&t.protocol===n.protocol&&t.type===n.type});return r||e.addRemoteCandidate(t),!r}function fe(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var Tl=function(e,t){function r(s,c){c.addTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:s}))}function n(s,c){c.removeTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:s}))}function i(s,c,f,u){var p=new Event("track");p.track=c,p.receiver=f,p.transceiver={receiver:f},p.streams=u,e.setTimeout(function(){s._dispatchEvent("track",p)})}var o=function(s){var c=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){c[p]=f[p].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw fe("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=Sl(s.iceServers||[],t),this._iceGatherers=[],s.iceCandidatePoolSize)for(var u=s.iceCandidatePoolSize;u>0;u--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=j.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(s,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+s]=="function"&&this["on"+s](c))},o.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(s,c){var f=this.transceivers.length>0,u={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)u.iceTransport=this.transceivers[0].iceTransport,u.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();u.iceTransport=p.iceTransport,u.dtlsTransport=p.dtlsTransport}return c||this.transceivers.push(u),u},o.prototype.addTrack=function(s,c){if(this._isClosed)throw fe("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(m){return m.track===s});if(f)throw fe("InvalidAccessError","Track already exists.");for(var u,p=0;p<this.transceivers.length;p++)!this.transceivers[p].track&&this.transceivers[p].kind===s.kind&&(u=this.transceivers[p]);return u||(u=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),u.track=s,u.stream=c,u.rtpSender=new e.RTCRtpSender(s,u.dtlsTransport),u.rtpSender},o.prototype.addStream=function(s){var c=this;if(t>=15025)s.getTracks().forEach(function(u){c.addTrack(u,s)});else{var f=s.clone();s.getTracks().forEach(function(u,p){var m=f.getTracks()[p];u.addEventListener("enabled",function(g){m.enabled=g.enabled})}),f.getTracks().forEach(function(u){c.addTrack(u,f)})}},o.prototype.removeTrack=function(s){if(this._isClosed)throw fe("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(p){return p.rtpSender===s});if(!c)throw fe("InvalidAccessError","Sender was not created by this connection.");var f=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var u=this.transceivers.map(function(p){return p.stream});u.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(s){var c=this;s.getTracks().forEach(function(f){var u=c.getSenders().find(function(p){return p.track===f});u&&c.removeTrack(u)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},o.prototype._createIceGatherer=function(s,c){var f=this;if(c&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var u=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(u,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(p){var m=!p.candidate||Object.keys(p.candidate).length===0;u.state=m?"completed":"gathering",f.transceivers[s].bufferedCandidateEvents!==null&&f.transceivers[s].bufferedCandidateEvents.push(p)},u.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),u},o.prototype._gather=function(s,c){var f=this,u=this.transceivers[c].iceGatherer;if(!u.onlocalcandidate){var p=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,u.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),u.onlocalcandidate=function(m){if(!(f.usingBundle&&c>0)){var g=new Event("icecandidate");g.candidate={sdpMid:s,sdpMLineIndex:c};var b=m.candidate,L=!b||Object.keys(b).length===0;if(L)(u.state==="new"||u.state==="gathering")&&(u.state="completed");else{u.state==="new"&&(u.state="gathering"),b.component=1,b.ufrag=u.getLocalParameters().usernameFragment;var E=j.writeCandidate(b);g.candidate=Object.assign(g.candidate,j.parseCandidate(E)),g.candidate.candidate=E,g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}var k=j.getMediaSections(f._localDescription.sdp);L?k[g.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:k[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+`\r
`,f._localDescription.sdp=j.getDescription(f._localDescription.sdp)+k.join("");var w=f.transceivers.every(function(D){return D.iceGatherer&&D.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),L||f._dispatchEvent("icecandidate",g),w&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},e.setTimeout(function(){p.forEach(function(m){u.onlocalcandidate(m)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var s=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var f=new e.RTCDtlsTransport(c);return f.ondtlsstatechange=function(){s._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:c,dtlsTransport:f}},o.prototype._disposeIceAndDtlsTransports=function(s){var c=this.transceivers[s].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[s].iceGatherer);var f=this.transceivers[s].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[s].iceTransport);var u=this.transceivers[s].dtlsTransport;u&&(delete u.ondtlsstatechange,delete u.onerror,delete this.transceivers[s].dtlsTransport)},o.prototype._transceive=function(s,c,f){var u=cr(s.localCapabilities,s.remoteCapabilities);c&&s.rtpSender&&(u.encodings=s.sendEncodingParameters,u.rtcp={cname:j.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(u.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(u)),f&&s.rtpReceiver&&u.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&t<15019&&s.recvEncodingParameters.forEach(function(p){delete p.rtx}),s.recvEncodingParameters.length?u.encodings=s.recvEncodingParameters:u.encodings=[{}],u.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(u.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(u.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(u))},o.prototype.setLocalDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(fe("TypeError",'Unsupported type "'+s.type+'"'));if(!Ai("setLocalDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(fe("InvalidStateError","Can not set local "+s.type+" in state "+c.signalingState));var f,u;if(s.type==="offer")f=j.splitSections(s.sdp),u=f.shift(),f.forEach(function(m,g){var b=j.parseRtpParameters(m);c.transceivers[g].localCapabilities=b}),c.transceivers.forEach(function(m,g){c._gather(m.mid,g)});else if(s.type==="answer"){f=j.splitSections(c._remoteDescription.sdp),u=f.shift();var p=j.matchPrefix(u,"a=ice-lite").length>0;f.forEach(function(m,g){var b=c.transceivers[g],L=b.iceGatherer,E=b.iceTransport,k=b.dtlsTransport,w=b.localCapabilities,D=b.remoteCapabilities,G=j.isRejected(m)&&j.matchPrefix(m,"a=bundle-only").length===0;if(!G&&!b.rejected){var te=j.getIceParameters(m,u),re=j.getDtlsParameters(m,u);p&&(re.role="server"),(!c.usingBundle||g===0)&&(c._gather(b.mid,g),E.state==="new"&&E.start(L,te,p?"controlling":"controlled"),k.state==="new"&&k.start(re));var Y=cr(w,D);c._transceive(b,Y.codecs.length>0,!1)}})}return c._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(fe("TypeError",'Unsupported type "'+s.type+'"'));if(!Ai("setRemoteDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(fe("InvalidStateError","Can not set remote "+s.type+" in state "+c.signalingState));var f={};c.remoteStreams.forEach(function(E){f[E.id]=E});var u=[],p=j.splitSections(s.sdp),m=p.shift(),g=j.matchPrefix(m,"a=ice-lite").length>0,b=j.matchPrefix(m,"a=group:BUNDLE ").length>0;c.usingBundle=b;var L=j.matchPrefix(m,"a=ice-options:")[0];return L?c.canTrickleIceCandidates=L.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,p.forEach(function(E,k){var w=j.splitLines(E),D=j.getKind(E),G=j.isRejected(E)&&j.matchPrefix(E,"a=bundle-only").length===0,te=w[0].substr(2).split(" ")[2],re=j.getDirection(E,m),Y=j.parseMsid(E),ut=j.getMid(E)||j.generateIdentifier();if(G||D==="application"&&(te==="DTLS/SCTP"||te==="UDP/DTLS/SCTP")){c.transceivers[k]={mid:ut,kind:D,protocol:te,rejected:!0};return}!G&&c.transceivers[k]&&c.transceivers[k].rejected&&(c.transceivers[k]=c._createTransceiver(D,!0));var A,Je,je,Ve,be,pt,ne,J,$,Ae=j.parseRtpParameters(E),et,Pe;G||(et=j.getIceParameters(E,m),Pe=j.getDtlsParameters(E,m),Pe.role="client"),ne=j.parseRtpEncodingParameters(E);var Ce=j.parseRtcpParameters(E),Dt=j.matchPrefix(E,"a=end-of-candidates",m).length>0,We=j.matchPrefix(E,"a=candidate:").map(function(Q){return j.parseCandidate(Q)}).filter(function(Q){return Q.component===1});if((s.type==="offer"||s.type==="answer")&&!G&&b&&k>0&&c.transceivers[k]&&(c._disposeIceAndDtlsTransports(k),c.transceivers[k].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[k].iceTransport=c.transceivers[0].iceTransport,c.transceivers[k].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[k].rtpSender&&c.transceivers[k].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[k].rtpReceiver&&c.transceivers[k].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),s.type==="offer"&&!G){A=c.transceivers[k]||c._createTransceiver(D),A.mid=ut,A.iceGatherer||(A.iceGatherer=c._createIceGatherer(k,b)),We.length&&A.iceTransport.state==="new"&&(Dt&&(!b||k===0)?A.iceTransport.setRemoteCandidates(We):We.forEach(function(Q){Kr(A.iceTransport,Q)})),J=e.RTCRtpReceiver.getCapabilities(D),t<15019&&(J.codecs=J.codecs.filter(function(Q){return Q.name!=="rtx"})),pt=A.sendEncodingParameters||[{ssrc:(2*k+2)*1001}];var Mt=!1;if(re==="sendrecv"||re==="sendonly"){if(Mt=!A.rtpReceiver,be=A.rtpReceiver||new e.RTCRtpReceiver(A.dtlsTransport,D),Mt){var le;$=be.track,Y&&Y.stream==="-"||(Y?(f[Y.stream]||(f[Y.stream]=new e.MediaStream,Object.defineProperty(f[Y.stream],"id",{get:function(){return Y.stream}})),Object.defineProperty($,"id",{get:function(){return Y.track}}),le=f[Y.stream]):(f.default||(f.default=new e.MediaStream),le=f.default)),le&&(r($,le),A.associatedRemoteMediaStreams.push(le)),u.push([$,be,le])}}else A.rtpReceiver&&A.rtpReceiver.track&&(A.associatedRemoteMediaStreams.forEach(function(Q){var ht=Q.getTracks().find(function(It){return It.id===A.rtpReceiver.track.id});ht&&n(ht,Q)}),A.associatedRemoteMediaStreams=[]);A.localCapabilities=J,A.remoteCapabilities=Ae,A.rtpReceiver=be,A.rtcpParameters=Ce,A.sendEncodingParameters=pt,A.recvEncodingParameters=ne,c._transceive(c.transceivers[k],!1,Mt)}else if(s.type==="answer"&&!G){A=c.transceivers[k],Je=A.iceGatherer,je=A.iceTransport,Ve=A.dtlsTransport,be=A.rtpReceiver,pt=A.sendEncodingParameters,J=A.localCapabilities,c.transceivers[k].recvEncodingParameters=ne,c.transceivers[k].remoteCapabilities=Ae,c.transceivers[k].rtcpParameters=Ce,We.length&&je.state==="new"&&((g||Dt)&&(!b||k===0)?je.setRemoteCandidates(We):We.forEach(function(Q){Kr(A.iceTransport,Q)})),(!b||k===0)&&(je.state==="new"&&je.start(Je,et,"controlling"),Ve.state==="new"&&Ve.start(Pe));var dt=cr(A.localCapabilities,A.remoteCapabilities),tr=dt.codecs.filter(function(Q){return Q.name.toLowerCase()==="rtx"}).length;!tr&&A.sendEncodingParameters[0].rtx&&delete A.sendEncodingParameters[0].rtx,c._transceive(A,re==="sendrecv"||re==="recvonly",re==="sendrecv"||re==="sendonly"),be&&(re==="sendrecv"||re==="sendonly")?($=be.track,Y?(f[Y.stream]||(f[Y.stream]=new e.MediaStream),r($,f[Y.stream]),u.push([$,be,f[Y.stream]])):(f.default||(f.default=new e.MediaStream),r($,f.default),u.push([$,be,f.default]))):delete A.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=s.type==="offer"?"active":"passive"),c._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(f).forEach(function(E){var k=f[E];if(k.getTracks().length){if(c.remoteStreams.indexOf(k)===-1){c.remoteStreams.push(k);var w=new Event("addstream");w.stream=k,e.setTimeout(function(){c._dispatchEvent("addstream",w)})}u.forEach(function(D){var G=D[0],te=D[1];k.id===D[2].id&&i(c,G,te,[k])})}}),u.forEach(function(E){E[2]||i(c,E[0],E[1],[])}),e.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(E){E.iceTransport&&E.iceTransport.state==="new"&&E.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),E.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(s){this.signalingState=s;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var c=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var s,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&!u.rejected&&c[u.iceTransport.state]++}),s="new",c.failed>0?s="failed":c.checking>0?s="checking":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0?s="connected":c.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},o.prototype._updateConnectionState=function(){var s,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&u.dtlsTransport&&!u.rejected&&(c[u.iceTransport.state]++,c[u.dtlsTransport.state]++)}),c.connected+=c.completed,s="new",c.failed>0?s="failed":c.connecting>0?s="connecting":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},o.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(fe("InvalidStateError","Can not call createOffer after close"));var c=s.transceivers.filter(function(g){return g.kind==="audio"}).length,f=s.transceivers.filter(function(g){return g.kind==="video"}).length,u=arguments[0];if(u){if(u.mandatory||u.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");u.offerToReceiveAudio!==void 0&&(u.offerToReceiveAudio===!0?c=1:u.offerToReceiveAudio===!1?c=0:c=u.offerToReceiveAudio),u.offerToReceiveVideo!==void 0&&(u.offerToReceiveVideo===!0?f=1:u.offerToReceiveVideo===!1?f=0:f=u.offerToReceiveVideo)}for(s.transceivers.forEach(function(g){g.kind==="audio"?(c--,c<0&&(g.wantReceive=!1)):g.kind==="video"&&(f--,f<0&&(g.wantReceive=!1))});c>0||f>0;)c>0&&(s._createTransceiver("audio"),c--),f>0&&(s._createTransceiver("video"),f--);var p=j.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(g,b){var L=g.track,E=g.kind,k=g.mid||j.generateIdentifier();g.mid=k,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(b,s.usingBundle));var w=e.RTCRtpSender.getCapabilities(E);t<15019&&(w.codecs=w.codecs.filter(function(G){return G.name!=="rtx"})),w.codecs.forEach(function(G){G.name==="H264"&&G.parameters["level-asymmetry-allowed"]===void 0&&(G.parameters["level-asymmetry-allowed"]="1"),g.remoteCapabilities&&g.remoteCapabilities.codecs&&g.remoteCapabilities.codecs.forEach(function(te){G.name.toLowerCase()===te.name.toLowerCase()&&G.clockRate===te.clockRate&&(G.preferredPayloadType=te.payloadType)})}),w.headerExtensions.forEach(function(G){var te=g.remoteCapabilities&&g.remoteCapabilities.headerExtensions||[];te.forEach(function(re){G.uri===re.uri&&(G.id=re.id)})});var D=g.sendEncodingParameters||[{ssrc:(2*b+1)*1001}];L&&t>=15019&&E==="video"&&!D[0].rtx&&(D[0].rtx={ssrc:D[0].ssrc+1}),g.wantReceive&&(g.rtpReceiver=new e.RTCRtpReceiver(g.dtlsTransport,E)),g.localCapabilities=w,g.sendEncodingParameters=D}),s._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+s.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(g,b){p+=ji(g,g.localCapabilities,"offer",g.stream,s._dtlsRole),p+=`a=rtcp-rsize\r
`,g.iceGatherer&&s.iceGatheringState!=="new"&&(b===0||!s.usingBundle)&&(g.iceGatherer.getLocalCandidates().forEach(function(L){L.component=1,p+="a="+j.writeCandidate(L)+`\r
`}),g.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var m=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(m)},o.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(fe("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(fe("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var c=j.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(c+="a=group:BUNDLE "+s.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var f=j.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(p,m){if(!(m+1>f)){if(p.rejected){p.kind==="application"?p.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`;return}if(p.stream){var g;p.kind==="audio"?g=p.stream.getAudioTracks()[0]:p.kind==="video"&&(g=p.stream.getVideoTracks()[0]),g&&t>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1})}var b=cr(p.localCapabilities,p.remoteCapabilities),L=b.codecs.filter(function(E){return E.name.toLowerCase()==="rtx"}).length;!L&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,c+=ji(p,b,"answer",p.stream,s._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var u=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(u)},o.prototype.addIceCandidate=function(s){var c=this,f;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(u,p){if(c._remoteDescription)if(!s||s.candidate==="")for(var m=0;m<c.transceivers.length&&!(!c.transceivers[m].rejected&&(c.transceivers[m].iceTransport.addRemoteCandidate({}),f=j.getMediaSections(c._remoteDescription.sdp),f[m]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=j.getDescription(c._remoteDescription.sdp)+f.join(""),c.usingBundle));m++);else{var g=s.sdpMLineIndex;if(s.sdpMid){for(var b=0;b<c.transceivers.length;b++)if(c.transceivers[b].mid===s.sdpMid){g=b;break}}var L=c.transceivers[g];if(L){if(L.rejected)return u();var E=Object.keys(s.candidate).length>0?j.parseCandidate(s.candidate):{};if(E.protocol==="tcp"&&(E.port===0||E.port===9)||E.component&&E.component!==1)return u();if((g===0||g>0&&L.iceTransport!==c.transceivers[0].iceTransport)&&!Kr(L.iceTransport,E))return p(fe("OperationError","Can not add ICE candidate"));var k=s.candidate.trim();k.indexOf("a=")===0&&(k=k.substr(2)),f=j.getMediaSections(c._remoteDescription.sdp),f[g]+="a="+(E.type?k:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=j.getDescription(c._remoteDescription.sdp)+f.join("")}else return p(fe("OperationError","Can not add ICE candidate"))}else return p(fe("InvalidStateError","Can not add ICE candidate without a remote description"));u()})},o.prototype.getStats=function(s){if(s&&s instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(u){u.rtpSender&&u.rtpSender.track===s?c=u.rtpSender:u.rtpReceiver&&u.rtpReceiver.track===s&&(c=u.rtpReceiver)}),!c)throw fe("InvalidAccessError","Invalid selector.");return c.getStats()}var f=[];return this.transceivers.forEach(function(u){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){u[p]&&f.push(u[p].getStats())})}),Promise.all(f).then(function(u){var p=new Map;return u.forEach(function(m){m.forEach(function(g){p.set(g.id,g)})}),p})};var a=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];a.forEach(function(s){var c=e[s];if(c&&c.prototype&&c.prototype.getStats){var f=c.prototype.getStats;c.prototype.getStats=function(){return f.apply(this).then(function(u){var p=new Map;return Object.keys(u).forEach(function(m){u[m].type=Cl(u[m]),p.set(m,u[m])}),p})}}});var l=["createOffer","createAnswer"];return l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?c.apply(this,[arguments[2]]).then(function(u){typeof f[0]=="function"&&f[0].apply(null,[u])},function(u){typeof f[1]=="function"&&f[1].apply(null,[u])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(u){typeof f[2]=="function"&&f[2].apply(null,[u])}):c.apply(this,arguments)}}),["getStats"].forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):c.apply(this,arguments)}}),o};const Pl=$n(Tl);function ts(e){const t=e&&e.navigator,r=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return n(i).catch(o=>Promise.reject(r(o)))}}function rs(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function fn(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){n.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=Pl(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=bl(i.iceServers,t.version),Nn("ICE servers after filtering:",i.iceServers)),new r(i)},e.RTCPeerConnection.prototype=r.prototype}function ns(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const Fi=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:rs,shimGetUserMedia:ts,shimPeerConnection:fn,shimReplaceTrack:ns},Symbol.toStringTag,{value:"Module"}));function is(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){Lr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const i=function(a,l,s){l in a&&!(s in a)&&(a[s]=a[l],delete a[l])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function xl(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function os(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function un(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;return n.apply(this,[o||null]).then(s=>{if(t.version<53&&!a)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((f,u)=>{s.set(u,Object.assign({},f,{type:r[f.type]||f.type}))})}return s}).then(a,l)}}function ss(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function as(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Ot(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function cs(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){Lr("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function ls(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function fs(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:a}=o,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n.sendEncodings,a.sendEncodings=n.sendEncodings,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function us(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function ps(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function ds(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Bi=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:fs,shimCreateAnswer:ds,shimCreateOffer:ps,shimGetDisplayMedia:xl,shimGetParameters:us,shimGetUserMedia:is,shimOnTrack:os,shimPeerConnection:un,shimRTCDataChannel:ls,shimReceiverGetStats:as,shimRemoveStream:cs,shimSenderGetStats:ss},Symbol.toStringTag,{value:"Module"}));function hs(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>t.call(this,i,n)),n.getVideoTracks().forEach(i=>t.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const i=r.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function ms(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,n.dispatchEvent(a)})}),t.apply(n,arguments)}}}function gs(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p},t.createAnswer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p};let l=function(s,c,f){const u=i.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u};t.setLocalDescription=l,l=function(s,c,f){const u=o.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.setRemoteDescription=l,l=function(s,c,f){const u=a.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.addIceCandidate=l}function vs(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(ys(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,i,o){t.mediaDevices.getUserMedia(n).then(i,o)}).bind(t))}function ys(e){return e&&e.video!==void 0?Object.assign({},e,{video:Go(e.video)}):e}function _s(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const o=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(Lr("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(n.iceServers[a])}n.iceServers=o}return new t(n,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function bs(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Cs(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function Ss(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Li=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ss,shimCallbacksAPI:gs,shimConstraints:ys,shimCreateOfferLegacy:Cs,shimGetUserMedia:vs,shimLocalStreamsAPI:hs,shimRTCIceServerUrls:_s,shimRemoteStreamsAPI:ms,shimTrackEventTransceiver:bs},Symbol.toStringTag,{value:"Module"}));function vr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const i=new t(n),o=gr.parseCandidate(n.candidate),a=Object.assign(i,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,Ot(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Nt(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const s=gr.splitSections(l.sdp);return s.shift(),s.some(c=>{const f=gr.parseMLine(c);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(l){const s=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const c=parseInt(s[1],10);return c!==c?-1:c},i=function(l){let s=65536;return t.browser==="firefox"&&(t.version<57?l===-1?s=16384:s=2147483637:t.version<60?s=t.version===57?65535:65536:s=2147483637),s},o=function(l,s){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const f=gr.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?c=parseInt(f[0].substr(19),10):t.browser==="firefox"&&s!==-1&&(c=2147483637),c},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const s=n(arguments[0]),c=i(s),f=o(arguments[0],s);let u;c===0&&f===0?u=Number.POSITIVE_INFINITY:c===0||f===0?u=Math.max(c,f):u=Math.min(c,f);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return u}}),this._sctp=p}return a.apply(this,arguments)}}function zt(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){const o=n.send;n.send=function(){const l=arguments[0],s=l.length||l.size||l.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=r.apply(this,arguments);return t(i,this),i},Ot(e,"datachannel",n=>(t(n.channel,n.target),n))}function pn(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function dn(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return r.apply(this,arguments)}}function yr(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const El=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:dn,shimAddIceCandidateNullOrEmpty:yr,shimConnectionState:pn,shimMaxMessageSize:Nt,shimRTCIceCandidate:vr,shimSendThrowTypeError:zt},Symbol.toStringTag,{value:"Module"}));function Rl({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=Nn,n=yl(e),i={browserDetails:n,commonShim:El,extractVersion:$t,disableLog:gl,disableWarnings:vl};switch(n.browser){case"chrome":if(!Ii||!ln||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=Ii,yr(e,n),Ho(e,n),Ko(e),ln(e,n),Jo(e),Qo(e,n),Vo(e),Wo(e),qo(e),Xo(e,n),vr(e),pn(e),Nt(e,n),zt(e),dn(e,n);break;case"firefox":if(!Bi||!un||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=Bi,yr(e,n),is(e,n),un(e,n),os(e),cs(e),ss(e),as(e),ls(e),fs(e),us(e),ps(e),ds(e),vr(e),pn(e),Nt(e,n),zt(e);break;case"edge":if(!Fi||!fn||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),i;r("adapter.js shimming edge."),i.browserShim=Fi,ts(e),rs(e),fn(e,n),ns(e),Nt(e,n),zt(e);break;case"safari":if(!Li||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=Li,yr(e,n),_s(e),Cs(e),gs(e),hs(e),ms(e),bs(e),vs(e),Ss(e),vr(e),Nt(e,n),zt(e),dn(e,n);break;default:r("Unsupported browser!");break}return i}const Ui=Rl({window:typeof window>"u"?void 0:window});function $e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var Jr=Ui.default||Ui,Ft=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),r=this.getVersion(),n=this.supportedBrowsers.includes(t);return n?t==="chrome"?r>=this.minChromeVersion:t==="firefox"?r>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return Jr.browserDetails.browser},e.prototype.getVersion=function(){return Jr.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),r=Jr.browserDetails.version||0;if(t==="chrome"&&r<this.minChromeVersion)return!1;if(t==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),$i={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},kl=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=$i,this.browser=Ft.getBrowser(),this.browserVersion=Ft.getVersion(),this.supports=function(){var t={browser:Ft.isBrowserSupported(),webRTC:Ft.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;var r;try{r=new RTCPeerConnection($i),t.audioVideo=!0;var n=void 0;try{n=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!Ft.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{r&&r.close()}return t}(),this.pack=ki.pack,this.unpack=ki.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var r=[],n=t.size,i=Math.ceil(n/K.chunkedMTU),o=0,a=0;a<n;){var l=Math.min(n,a+K.chunkedMTU),s=t.slice(a,l),c={__peerData:this._dataCount,n:o,data:s,total:i};r.push(c),a=l,o++}return this._dataCount++,r},e.prototype.blobToArrayBuffer=function(t,r){var n=new FileReader;return n.onload=function(i){i.target&&r(i.target.result)},n.readAsArrayBuffer(t),n},e.prototype.binaryStringToArrayBuffer=function(t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n)&255;return r.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),K=new kl,Ts={};$e(Ts,"Peer",()=>gn,e=>gn=e);var er={},Ol=Object.prototype.hasOwnProperty,ge="~";function Zt(){}Object.create&&(Zt.prototype=Object.create(null),new Zt().__proto__||(ge=!1));function Dl(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Ps(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Dl(r,n||e,i),a=ge?ge+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function _r(e,t){--e._eventsCount===0?e._events=new Zt:delete e._events[t]}function he(){this._events=new Zt,this._eventsCount=0}he.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)Ol.call(r,n)&&t.push(ge?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};he.prototype.listeners=function(t){var r=ge?ge+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};he.prototype.listenerCount=function(t){var r=ge?ge+t:t,n=this._events[r];return n?n.fn?1:n.length:0};he.prototype.emit=function(t,r,n,i,o,a){var l=ge?ge+t:t;if(!this._events[l])return!1;var s=this._events[l],c=arguments.length,f,u;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,r),!0;case 3:return s.fn.call(s.context,r,n),!0;case 4:return s.fn.call(s.context,r,n,i),!0;case 5:return s.fn.call(s.context,r,n,i,o),!0;case 6:return s.fn.call(s.context,r,n,i,o,a),!0}for(u=1,f=new Array(c-1);u<c;u++)f[u-1]=arguments[u];s.fn.apply(s.context,f)}else{var p=s.length,m;for(u=0;u<p;u++)switch(s[u].once&&this.removeListener(t,s[u].fn,void 0,!0),c){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,r);break;case 3:s[u].fn.call(s[u].context,r,n);break;case 4:s[u].fn.call(s[u].context,r,n,i);break;default:if(!f)for(m=1,f=new Array(c-1);m<c;m++)f[m-1]=arguments[m];s[u].fn.apply(s[u].context,f)}}return!0};he.prototype.on=function(t,r,n){return Ps(this,t,r,n,!1)};he.prototype.once=function(t,r,n){return Ps(this,t,r,n,!0)};he.prototype.removeListener=function(t,r,n,i){var o=ge?ge+t:t;if(!this._events[o])return this;if(!r)return _r(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&_r(this,o);else{for(var l=0,s=[],c=a.length;l<c;l++)(a[l].fn!==r||i&&!a[l].once||n&&a[l].context!==n)&&s.push(a[l]);s.length?this._events[o]=s.length===1?s[0]:s:_r(this,o)}return this};he.prototype.removeAllListeners=function(t){var r;return t?(r=ge?ge+t:t,this._events[r]&&_r(this,r)):(this._events=new Zt,this._eventsCount=0),this};he.prototype.off=he.prototype.removeListener;he.prototype.addListener=he.prototype.on;he.prefixed=ge;he.EventEmitter=he;er=he;var R={};$e(R,"LogLevel",()=>ye,e=>ye=e);$e(R,"default",()=>Ni,e=>Ni=e);var nt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},it=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Ml="PeerJS: ",ye;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(ye||(ye={}));var Il=function(){function e(){this._logLevel=ye.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=ye.All&&this._print.apply(this,it([ye.All],nt(t),!1))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=ye.Warnings&&this._print.apply(this,it([ye.Warnings],nt(t),!1))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=ye.Errors&&this._print.apply(this,it([ye.Errors],nt(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=it([Ml],nt(r),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=ye.All?console.log.apply(console,it([],nt(i),!1)):t>=ye.Warnings?console.warn.apply(console,it(["WARNING"],nt(i),!1)):t>=ye.Errors&&console.error.apply(console,it(["ERROR"],nt(i),!1))},e}(),Ni=new Il,xs={};$e(xs,"Socket",()=>zi,e=>zi=e);var ke;(function(e){e.Data="data",e.Media="media"})(ke||(ke={}));var X;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(X||(X={}));var ze;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(ze||(ze={}));var Ge;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Ge||(Ge={}));var oe;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(oe||(oe={}));var zn={};zn=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var jl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Al=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Fl=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Bl=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zi=function(e){jl(t,e);function t(r,n,i,o,a,l){l===void 0&&(l=5e3);var s=e.call(this)||this;s.pingInterval=l,s._disconnected=!0,s._messagesQueue=[];var c=r?"wss://":"ws://";return s._baseUrl=c+n+":"+i+o+"peerjs?key="+a,s}return t.prototype.start=function(r,n){var i=this;this._id=r;var o="".concat(this._baseUrl,"&id=").concat(r,"&token=").concat(n);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+zn.version),this._disconnected=!1,this._socket.onmessage=function(a){var l;try{l=JSON.parse(a.data),R.default.log("Server message received:",l)}catch{R.default.log("Invalid server message",a.data);return}i.emit(Ge.Message,l)},this._socket.onclose=function(a){i._disconnected||(R.default.log("Socket closed.",a),i._cleanup(),i._disconnected=!0,i.emit(Ge.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),R.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var r=this;this._wsPingTimer=setTimeout(function(){r._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(!this._wsOpen()){R.default.log("Cannot send heartbeat, because socket closed");return}var r=JSON.stringify({type:oe.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()},t.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},t.prototype._sendQueuedMessages=function(){var r,n,i=Fl([],Al(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=Bl(i),a=o.next();!a.done;a=o.next()){var l=a.value;this.send(l)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.send=function(r){if(!this._disconnected){if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(Ge.Error,"Invalid message");return}if(this._wsOpen()){var n=JSON.stringify(r);this._socket.send(n)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(er.EventEmitter),hn={};$e(hn,"MediaConnection",()=>Hi,e=>Hi=e);var wn={};$e(wn,"Negotiator",()=>wi,e=>wi=e);var xr=function(){return xr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xr.apply(this,arguments)},lr=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},fr=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wi=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===ke.Media&&t._stream&&this._addTracksToConnection(t._stream,r),t.originator){if(this.connection.type===ke.Data){var n=this.connection,i={ordered:!!t.reliable},o=r.createDataChannel(n.label,i);n.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){R.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var r=this,n=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;R.default.log("Listening for ICE candidates."),t.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(R.default.log("Received ICE candidates for ".concat(n,":"),l.candidate),a.socket.send({type:oe.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":R.default.log("iceConnectionState is failed, closing connections to "+n),r.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),r.connection.close();break;case"closed":R.default.log("iceConnectionState is closed, closing connections to "+n),r.connection.emit("error",new Error("Connection to "+n+" closed.")),r.connection.close();break;case"disconnected":R.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=K.noop;break}r.connection.emit("iceStateChanged",t.iceConnectionState)},R.default.log("Listening for data channel"),t.ondatachannel=function(l){R.default.log("Received data channel");var s=l.channel,c=a.getConnection(n,i);c.initialize(s)},R.default.log("Listening for remote stream"),t.ontrack=function(l){R.default.log("Received remote stream");var s=l.streams[0],c=a.getConnection(n,i);if(c.type===ke.Media){var f=c;r._addStreamToMediaConnection(s,f)}}},e.prototype.cleanup=function(){R.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var r=t.signalingState!=="closed",n=!1;if(this.connection.type===ke.Data){var i=this.connection,o=i.dataChannel;o&&(n=!!o.readyState&&o.readyState!=="closed")}(r||n)&&t.close()}},e.prototype._makeOffer=function(){return lr(this,void 0,Promise,function(){var t,r,n,i,o,a,l;return fr(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),R.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return s.sent(),R.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:K.browser},this.connection.type===ke.Data&&(o=this.connection,i=xr(xr({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),r.socket.send({type:oe.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return a=s.sent(),a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(X.WebRTC,a),R.default.log("Failed to setLocalDescription, ",a)),[3,6];case 6:return[3,8];case 7:return l=s.sent(),r.emitError(X.WebRTC,l),R.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return lr(this,void 0,Promise,function(){var t,r,n,i,o;return fr(this,function(a){switch(a.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:n=a.sent(),R.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return a.sent(),R.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),r.socket.send({type:oe.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:K.browser},dst:this.connection.peer}),[3,6];case 5:return i=a.sent(),r.emitError(X.WebRTC,i),R.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=a.sent(),r.emitError(X.WebRTC,o),R.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,r){return lr(this,void 0,Promise,function(){var n,i,o,a;return fr(this,function(l){switch(l.label){case 0:r=new RTCSessionDescription(r),n=this.connection.peerConnection,i=this.connection.provider,R.default.log("Setting remote description",r),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,n.setRemoteDescription(r)];case 2:return l.sent(),R.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),t!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return a=l.sent(),i.emitError(X.WebRTC,a),R.default.log("Failed to setRemoteDescription, ",a),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return lr(this,void 0,Promise,function(){var r,n,i,o,a,l;return fr(this,function(s){switch(s.label){case 0:R.default.log("handleCandidate:",t),r=t.candidate,n=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,a=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:n,candidate:r}))];case 2:return s.sent(),R.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=s.sent(),a.emitError(X.WebRTC,l),R.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,r){if(R.default.log("add tracks from stream ".concat(t.id," to peer connection")),!r.addTrack)return R.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(n){r.addTrack(n,t)})},e.prototype._addStreamToMediaConnection=function(t,r){R.default.log("add stream ".concat(t.id," to media connection ").concat(r.connectionId)),r.addStream(t)},e}(),Gn={};$e(Gn,"BaseConnection",()=>Gi,e=>Gi=e);var Ll=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gi=function(e){Ll(t,e);function t(r,n,i){var o=e.call(this)||this;return o.peer=r,o.provider=n,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(er.EventEmitter),Ul=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Er=function(){return Er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Er.apply(this,arguments)},$l=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hi=function(e){Ul(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+K.randomToken(),o._negotiator=new wn.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return ke.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(r){R.default.log("Receiving stream",r),this._remoteStream=r,e.prototype.emit.call(this,"stream",r)},t.prototype.handleMessage=function(r){var n=r.type,i=r.payload;switch(r.type){case oe.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case oe.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:R.default.warn("Unrecognized message type:".concat(n," from peer:").concat(this.peer));break}},t.prototype.answer=function(r,n){var i,o;if(n===void 0&&(n={}),this._localStream){R.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection(Er(Er({},this.options._payload),{_stream:r}));var a=this.provider._getMessages(this.connectionId);try{for(var l=$l(a),s=l.next();!s.done;s=l.next()){var c=s.value;this.handleMessage(c)}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Gn.BaseConnection),mn={};$e(mn,"DataConnection",()=>Ji,e=>Ji=e);var Es={};$e(Es,"EncodingQueue",()=>Ki,e=>Ki=e);var Nl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(e){Nl(t,e);function t(){var r=e.call(this)||this;return r.fileReader=new FileReader,r._queue=[],r._processing=!1,r.fileReader.onload=function(n){r._processing=!1,n.target&&r.emit("done",n.target.result),r.doNextTask()},r.fileReader.onerror=function(n){R.default.error("EncodingQueue error:",n),r._processing=!1,r.destroy(),r.emit("error",n)},r}return Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(r){this.queue.push(r),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(er.EventEmitter),zl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wl=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ji=function(e){zl(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new Es.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+K.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||ze.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(a){o._bufferedSend(a)}),o._encodingQueue.on("error",function(){R.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new wn.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return ke.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r){this._dc=r,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var r=this;(!K.supports.binaryBlob||K.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){R.default.log("DC#".concat(r.connectionId," dc connection success")),r._open=!0,r.emit("open")},this.dataChannel.onmessage=function(n){R.default.log("DC#".concat(r.connectionId," dc onmessage:"),n.data),r._handleDataMessage(n)},this.dataChannel.onclose=function(){R.default.log("DC#".concat(r.connectionId," dc closed for:"),r.peer),r.close()}},t.prototype._handleDataMessage=function(r){var n=this,i=r.data,o=i.constructor,a=this.serialization===ze.Binary||this.serialization===ze.BinaryUTF8,l=i;if(a){if(o===Blob){K.blobToArrayBuffer(i,function(c){var f=K.unpack(c);n.emit("data",f)});return}else if(o===ArrayBuffer)l=K.unpack(i);else if(o===String){var s=K.binaryStringToArrayBuffer(i);l=K.unpack(s)}}else this.serialization===ze.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},t.prototype._handleChunk=function(r){var n=r.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:r.total};if(i.data[r.n]=r.data,i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(r,n){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===ze.JSON)this._bufferedSend(this.stringify(r));else if(this.serialization===ze.Binary||this.serialization===ze.BinaryUTF8){var i=K.pack(r);if(!n&&i.size>K.chunkedMTU){this._sendChunks(i);return}K.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(r)},t.prototype._bufferedSend=function(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(r){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(i){return R.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(r){var n,i,o=K.chunk(r);R.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var a=wl(o),l=a.next();!l.done;l=a.next()){var s=l.value;this.send(s,!0)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.handleMessage=function(r){var n=r.payload;switch(r.type){case oe.Answer:this._negotiator.handleSDP(r.type,n.sdp);break;case oe.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:R.default.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Gn.BaseConnection),Rs={};$e(Rs,"API",()=>qi,e=>qi=e);var Vi=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},Wi=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qi=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var r=this._options.secure?"https":"http",n=this._options,i=n.host,o=n.port,a=n.path,l=n.key,s=new URL("".concat(r,"://").concat(i,":").concat(o).concat(a).concat(l,"/").concat(t));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",zn.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return Vi(this,void 0,Promise,function(){var t,r,n;return Wi(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(t=i.sent(),t.status!==200)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw r=i.sent(),R.default.error("Error retrieving ID",r),n="",this._options.path==="/"&&this._options.host!==K.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return Vi(this,void 0,Promise,function(){var t,r,n;return Wi(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(t=i.sent(),t.status!==200)throw t.status===401?(r="",this._options.host===K.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw n=i.sent(),R.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}})})},e}(),Gl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kt=function(){return Kt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kt.apply(this,arguments)},Bt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hl=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},gn=function(e){Gl(t,e);function t(r,n){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return r&&r.constructor==Object?n=r:r&&(o=r.toString()),n=Kt({debug:0,host:K.CLOUD_HOST,port:K.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:K.randomToken(),config:K.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),i._options=n,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==K.CLOUD_HOST?i._options.secure=K.isSecure():i._options.host==K.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&R.default.setLogFunction(i._options.logFunction),R.default.logLevel=i._options.debug||0,i._api=new Rs.API(n),i._socket=i._createServerConnection(),!K.supports.audioVideo&&!K.supports.data?(i._delayedAbort(X.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!K.validateId(o)?(i._delayedAbort(X.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(a){return i._initialize(a)}).catch(function(a){return i._abort(X.ServerError,a)}),i)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var r,n,i=Object.create(null);try{for(var o=Bt(this._connections),a=o.next();!a.done;a=o.next()){var l=Hl(a.value,2),s=l[0],c=l[1];i[s]=c}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var r=this,n=new xs.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(Ge.Message,function(i){r._handleMessage(i)}),n.on(Ge.Error,function(i){r._abort(X.SocketError,i)}),n.on(Ge.Disconnected,function(){r.disconnected||(r.emitError(X.Network,"Lost connection to server."),r.disconnect())}),n.on(Ge.Close,function(){r.disconnected||r._abort(X.SocketClosed,"Underlying socket is already closed.")}),n},t.prototype._initialize=function(r){this._id=r,this.socket.start(r,this._options.token)},t.prototype._handleMessage=function(r){var n,i,o=r.type,a=r.payload,l=r.src;switch(o){case oe.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case oe.Error:this._abort(X.ServerError,a.msg);break;case oe.IdTaken:this._abort(X.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case oe.InvalidKey:this._abort(X.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case oe.Leave:R.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case oe.Expire:this.emitError(X.PeerUnavailable,"Could not connect to peer ".concat(l));break;case oe.Offer:var g=a.connectionId,b=this.getConnection(l,g);if(b&&(b.close(),R.default.warn("Offer received for existing Connection ID:".concat(g))),a.type===ke.Media){var s=new hn.MediaConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata});b=s,this._addConnection(l,b),this.emit("call",s)}else if(a.type===ke.Data){var c=new mn.DataConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata,label:a.label,serialization:a.serialization,reliable:a.reliable});b=c,this._addConnection(l,b),this.emit("connection",c)}else{R.default.warn("Received malformed connection type:".concat(a.type));return}var f=this._getMessages(g);try{for(var u=Bt(f),p=u.next();!p.done;p=u.next()){var m=p.value;b.handleMessage(m)}}catch(L){n={error:L}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}break;default:if(!a){R.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var g=a.connectionId,b=this.getConnection(l,g);b&&b.peerConnection?b.handleMessage(r):g?this._storeMessage(g,r):R.default.warn("You received an unrecognized message:",r);break}},t.prototype._storeMessage=function(r,n){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(n)},t.prototype._getMessages=function(r){var n=this._lostMessages.get(r);return n?(this._lostMessages.delete(r),n):[]},t.prototype.connect=function(r,n){if(n===void 0&&(n={}),this.disconnected){R.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(X.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new mn.DataConnection(r,this,n);return this._addConnection(r,i),i},t.prototype.call=function(r,n,i){if(i===void 0&&(i={}),this.disconnected){R.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(X.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){R.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new hn.MediaConnection(r,this,Kt(Kt({},i),{_stream:n}));return this._addConnection(r,o),o},t.prototype._addConnection=function(r,n){R.default.log("add connection ".concat(n.type,":").concat(n.connectionId," to peerId:").concat(r)),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(n)},t.prototype._removeConnection=function(r){var n=this._connections.get(r.peer);if(n){var i=n.indexOf(r);i!==-1&&n.splice(i,1)}this._lostMessages.delete(r.connectionId)},t.prototype.getConnection=function(r,n){var i,o,a=this._connections.get(r);if(!a)return null;try{for(var l=Bt(a),s=l.next();!s.done;s=l.next()){var c=s.value;if(c.connectionId===n)return c}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(r,n){var i=this;setTimeout(function(){i._abort(r,n)},0)},t.prototype._abort=function(r,n){R.default.error("Aborting!"),this.emitError(r,n),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(r,n){R.default.error("Error:",n);var i;typeof n=="string"?i=new Error(n):i=n,i.type=r,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(R.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var r,n;try{for(var i=Bt(this._connections.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;this._cleanupPeer(a),this._connections.delete(a)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(r){var n,i,o=this._connections.get(r);if(o)try{for(var a=Bt(o),l=a.next();!l.done;l=a.next()){var s=l.value;s.close()}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var r=this.id;R.default.log("Disconnect peer with ID:".concat(r)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)R.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)R.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},t.prototype.listAllPeers=function(r){var n=this;r===void 0&&(r=function(i){}),this._api.listAllPeers().then(function(i){return r(i)}).catch(function(i){return n._abort(X.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(er.EventEmitter);Ts.Peer;const Kl={class:"home"},Jl={class:"call-info"},Vl=Te("div",null,null,-1),Wl={class:"friend-video"},ql=["srcObject"],Yl={class:"my-video"},Ql=["srcObject"],Xl=za({__name:"App",setup(e){const t=vt(void 0),r=vt(void 0),n=vt(""),i=vt(""),o=vt(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia),a=new gn;Eo(()=>{o.value({video:!0,audio:!1},s=>{r.value=s}),a.on("open",s=>{n.value=s}),a.on("error",s=>{alert("error"),console.error(s)}),a.on("close",()=>{alert("close"),console.log("close")}),a.on("disconnected",s=>{alert("disconnected"),console.log(s)}),a.on("call",s=>{o.value({video:!0,audio:!0},c=>{s.answer(c),s.on("stream",f=>{console.log(f),console.log(t.value),t.value=f})},c=>{alert("Failed to get local stream"),console.log("Failed to get local stream",c)})})});function l(){o.value({video:!0,audio:!0},s=>{a.call(i.value,s).on("stream",f=>{t.value=f})},s=>{alert("Failed to get local stream"),console.error("Failed to get local stream",s)})}return(s,c)=>(yc(),Cc("div",Kl,[Te("div",Jl,[Te("div",null,[sn(" my id: "),ni(Te("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f)},null,512),[[Pi,n.value]])]),Te("div",null,[sn(" friend id: "),ni(Te("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=f=>i.value=f)},null,512),[[Pi,i.value]]),Te("button",{onClick:c[2]||(c[2]=nl(f=>l(),["prevent"]))},"Call")]),Vl]),Te("div",Wl,[Te("video",{width:"300",srcObject:t.value,autoplay:"",loop:"",playsInline:""},null,8,ql)]),Te("div",Yl,[Te("video",{width:"300",srcObject:r.value,autoplay:"",loop:"",muted:"",playsInline:""},null,8,Ql)])]))}}),ks=sl(Xl);ks.use(fl());ks.mount("#app");
