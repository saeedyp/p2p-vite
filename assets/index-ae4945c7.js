(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function _n(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const Y={},_t=[],Me=()=>{},Ms=()=>!1,Is=/^on[^a-z]/,Rr=e=>Is.test(e),bn=e=>e.startsWith("onUpdate:"),oe=Object.assign,Cn=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},js=Object.prototype.hasOwnProperty,w=(e,t)=>js.call(e,t),B=Array.isArray,Gt=e=>Or(e)==="[object Map]",As=e=>Or(e)==="[object Set]",$=e=>typeof e=="function",ae=e=>typeof e=="string",Sn=e=>typeof e=="symbol",te=e=>e!==null&&typeof e=="object",Xi=e=>te(e)&&$(e.then)&&$(e.catch),Fs=Object.prototype.toString,Or=e=>Fs.call(e),Bs=e=>Or(e).slice(8,-1),Ls=e=>Or(e)==="[object Object]",Tn=e=>ae(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,pr=_n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dr=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},$s=/-(\w)/g,St=Dr(e=>e.replace($s,(t,r)=>r?r.toUpperCase():"")),Us=/\B([A-Z])/g,kt=Dr(e=>e.replace(Us,"-$1").toLowerCase()),Zi=Dr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ur=Dr(e=>e?`on${Zi(e)}`:""),Jt=(e,t)=>!Object.is(e,t),dr=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Cr=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Yr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qn;const Qr=()=>qn||(qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xn(e){if(B(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=ae(n)?Gs(n):xn(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(ae(e))return e;if(te(e))return e}}const Ns=/;(?![^(]*\))/g,ws=/:([^]+)/,zs=/\/\*[^]*?\*\//g;function Gs(e){const t={};return e.replace(zs,"").split(Ns).forEach(r=>{if(r){const n=r.split(ws);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Pn(e){let t="";if(ae(e))t=e;else if(B(e))for(let r=0;r<e.length;r++){const n=Pn(e[r]);n&&(t+=n+" ")}else if(te(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Hs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ks=_n(Hs);function eo(e){return!!e||e===""}let ke;class to{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ke,!t&&ke&&(this.index=(ke.scopes||(ke.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=ke;try{return ke=this,t()}finally{ke=r}}}on(){ke=this}off(){ke=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Vs(e){return new to(e)}function Js(e,t=ke){t&&t.active&&t.effects.push(e)}function Ws(){return ke}const kn=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ro=e=>(e.w&Ze)>0,no=e=>(e.n&Ze)>0,qs=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ze},Ys=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];ro(i)&&!no(i)?i.delete(e):t[r++]=i,i.w&=~Ze,i.n&=~Ze}t.length=r}},Xr=new WeakMap;let $t=0,Ze=1;const Zr=30;let Ee;const lt=Symbol(""),en=Symbol("");class En{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Js(this,n)}run(){if(!this.active)return this.fn();let t=Ee,r=Qe;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ee,Ee=this,Qe=!0,Ze=1<<++$t,$t<=Zr?qs(this):Yn(this),this.fn()}finally{$t<=Zr&&Ys(this),Ze=1<<--$t,Ee=this.parent,Qe=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ee===this?this.deferStop=!0:this.active&&(Yn(this),this.onStop&&this.onStop(),this.active=!1)}}function Yn(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Qe=!0;const io=[];function Et(){io.push(Qe),Qe=!1}function Rt(){const e=io.pop();Qe=e===void 0?!0:e}function be(e,t,r){if(Qe&&Ee){let n=Xr.get(e);n||Xr.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=kn()),oo(i)}}function oo(e,t){let r=!1;$t<=Zr?no(e)||(e.n|=Ze,r=!ro(e)):r=!e.has(Ee),r&&(e.add(Ee),Ee.deps.push(e))}function He(e,t,r,n,i,o){const a=Xr.get(e);if(!a)return;let l=[];if(t==="clear")l=[...a.values()];else if(r==="length"&&B(e)){const s=Number(n);a.forEach((c,f)=>{(f==="length"||f>=s)&&l.push(c)})}else switch(r!==void 0&&l.push(a.get(r)),t){case"add":B(e)?Tn(r)&&l.push(a.get("length")):(l.push(a.get(lt)),Gt(e)&&l.push(a.get(en)));break;case"delete":B(e)||(l.push(a.get(lt)),Gt(e)&&l.push(a.get(en)));break;case"set":Gt(e)&&l.push(a.get(lt));break}if(l.length===1)l[0]&&tn(l[0]);else{const s=[];for(const c of l)c&&s.push(...c);tn(kn(s))}}function tn(e,t){const r=B(e)?e:[...e];for(const n of r)n.computed&&Qn(n);for(const n of r)n.computed||Qn(n)}function Qn(e,t){(e!==Ee||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Qs=_n("__proto__,__v_isRef,__isVue"),so=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Sn)),Xs=Rn(),Zs=Rn(!1,!0),ea=Rn(!0),Xn=ta();function ta(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=H(this);for(let o=0,a=this.length;o<a;o++)be(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(H)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Et();const n=H(this)[t].apply(this,r);return Rt(),n}}),e}function ra(e){const t=H(this);return be(t,"has",e),t.hasOwnProperty(e)}function Rn(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?ya:uo:t?fo:lo).get(n))return n;const a=B(n);if(!e){if(a&&w(Xn,i))return Reflect.get(Xn,i,o);if(i==="hasOwnProperty")return ra}const l=Reflect.get(n,i,o);return(Sn(i)?so.has(i):Qs(i))||(e||be(n,"get",i),t)?l:he(l)?a&&Tn(i)?l:l.value:te(l)?e?po(l):Mn(l):l}}const na=ao(),ia=ao(!0);function ao(e=!1){return function(r,n,i,o){let a=r[n];if(Tt(a)&&he(a)&&!he(i))return!1;if(!e&&(!Sr(i)&&!Tt(i)&&(a=H(a),i=H(i)),!B(r)&&he(a)&&!he(i)))return a.value=i,!0;const l=B(r)&&Tn(n)?Number(n)<r.length:w(r,n),s=Reflect.set(r,n,i,o);return r===H(o)&&(l?Jt(i,a)&&He(r,"set",n,i):He(r,"add",n,i)),s}}function oa(e,t){const r=w(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&He(e,"delete",t,void 0),n}function sa(e,t){const r=Reflect.has(e,t);return(!Sn(t)||!so.has(t))&&be(e,"has",t),r}function aa(e){return be(e,"iterate",B(e)?"length":lt),Reflect.ownKeys(e)}const co={get:Xs,set:na,deleteProperty:oa,has:sa,ownKeys:aa},ca={get:ea,set(e,t){return!0},deleteProperty(e,t){return!0}},la=oe({},co,{get:Zs,set:ia}),On=e=>e,Mr=e=>Reflect.getPrototypeOf(e);function nr(e,t,r=!1,n=!1){e=e.__v_raw;const i=H(e),o=H(t);r||(t!==o&&be(i,"get",t),be(i,"get",o));const{has:a}=Mr(i),l=n?On:r?An:Wt;if(a.call(i,t))return l(e.get(t));if(a.call(i,o))return l(e.get(o));e!==i&&e.get(t)}function ir(e,t=!1){const r=this.__v_raw,n=H(r),i=H(e);return t||(e!==i&&be(n,"has",e),be(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function or(e,t=!1){return e=e.__v_raw,!t&&be(H(e),"iterate",lt),Reflect.get(e,"size",e)}function Zn(e){e=H(e);const t=H(this);return Mr(t).has.call(t,e)||(t.add(e),He(t,"add",e,e)),this}function ei(e,t){t=H(t);const r=H(this),{has:n,get:i}=Mr(r);let o=n.call(r,e);o||(e=H(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Jt(t,a)&&He(r,"set",e,t):He(r,"add",e,t),this}function ti(e){const t=H(this),{has:r,get:n}=Mr(t);let i=r.call(t,e);i||(e=H(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&He(t,"delete",e,void 0),o}function ri(){const e=H(this),t=e.size!==0,r=e.clear();return t&&He(e,"clear",void 0,void 0),r}function sr(e,t){return function(n,i){const o=this,a=o.__v_raw,l=H(a),s=t?On:e?An:Wt;return!e&&be(l,"iterate",lt),a.forEach((c,f)=>n.call(i,s(c),s(f),o))}}function ar(e,t,r){return function(...n){const i=this.__v_raw,o=H(i),a=Gt(o),l=e==="entries"||e===Symbol.iterator&&a,s=e==="keys"&&a,c=i[e](...n),f=r?On:t?An:Wt;return!t&&be(o,"iterate",s?en:lt),{next(){const{value:u,done:p}=c.next();return p?{value:u,done:p}:{value:l?[f(u[0]),f(u[1])]:f(u),done:p}},[Symbol.iterator](){return this}}}}function qe(e){return function(...t){return e==="delete"?!1:this}}function fa(){const e={get(o){return nr(this,o)},get size(){return or(this)},has:ir,add:Zn,set:ei,delete:ti,clear:ri,forEach:sr(!1,!1)},t={get(o){return nr(this,o,!1,!0)},get size(){return or(this)},has:ir,add:Zn,set:ei,delete:ti,clear:ri,forEach:sr(!1,!0)},r={get(o){return nr(this,o,!0)},get size(){return or(this,!0)},has(o){return ir.call(this,o,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:sr(!0,!1)},n={get(o){return nr(this,o,!0,!0)},get size(){return or(this,!0)},has(o){return ir.call(this,o,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:sr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=ar(o,!1,!1),r[o]=ar(o,!0,!1),t[o]=ar(o,!1,!0),n[o]=ar(o,!0,!0)}),[e,r,t,n]}const[ua,pa,da,ha]=fa();function Dn(e,t){const r=t?e?ha:da:e?pa:ua;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(w(r,i)&&i in n?r:n,i,o)}const ma={get:Dn(!1,!1)},ga={get:Dn(!1,!0)},va={get:Dn(!0,!1)},lo=new WeakMap,fo=new WeakMap,uo=new WeakMap,ya=new WeakMap;function _a(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ba(e){return e.__v_skip||!Object.isExtensible(e)?0:_a(Bs(e))}function Mn(e){return Tt(e)?e:In(e,!1,co,ma,lo)}function Ca(e){return In(e,!1,la,ga,fo)}function po(e){return In(e,!0,ca,va,uo)}function In(e,t,r,n,i){if(!te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=ba(e);if(a===0)return e;const l=new Proxy(e,a===2?n:r);return i.set(e,l),l}function bt(e){return Tt(e)?bt(e.__v_raw):!!(e&&e.__v_isReactive)}function Tt(e){return!!(e&&e.__v_isReadonly)}function Sr(e){return!!(e&&e.__v_isShallow)}function ho(e){return bt(e)||Tt(e)}function H(e){const t=e&&e.__v_raw;return t?H(t):e}function jn(e){return Cr(e,"__v_skip",!0),e}const Wt=e=>te(e)?Mn(e):e,An=e=>te(e)?po(e):e;function mo(e){Qe&&Ee&&(e=H(e),oo(e.dep||(e.dep=kn())))}function go(e,t){e=H(e);const r=e.dep;r&&tn(r)}function he(e){return!!(e&&e.__v_isRef===!0)}function ot(e){return Sa(e,!1)}function Sa(e,t){return he(e)?e:new Ta(e,t)}class Ta{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:H(t),this._value=r?t:Wt(t)}get value(){return mo(this),this._value}set value(t){const r=this.__v_isShallow||Sr(t)||Tt(t);t=r?t:H(t),Jt(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Wt(t),go(this))}}function xa(e){return he(e)?e.value:e}const Pa={get:(e,t,r)=>xa(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return he(i)&&!he(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function vo(e){return bt(e)?e:new Proxy(e,Pa)}class ka{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new En(t,()=>{this._dirty||(this._dirty=!0,go(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=H(this);return mo(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ea(e,t,r=!1){let n,i;const o=$(e);return o?(n=e,i=Me):(n=e.get,i=e.set),new ka(n,i,o||!i,r)}function Xe(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){Ir(o,t,r)}return i}function Ie(e,t,r,n){if($(e)){const o=Xe(e,t,r,n);return o&&Xi(o)&&o.catch(a=>{Ir(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ie(e[o],t,r,n));return i}function Ir(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,l=r;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,a,l)===!1)return}o=o.parent}const s=t.appContext.config.errorHandler;if(s){Xe(s,null,10,[e,a,l]);return}}Ra(e,r,i,n)}function Ra(e,t,r,n=!0){console.error(e)}let qt=!1,rn=!1;const pe=[];let $e=0;const Ct=[];let Ne=null,st=0;const yo=Promise.resolve();let Fn=null;function Oa(e){const t=Fn||yo;return e?t.then(this?e.bind(this):e):t}function Da(e){let t=$e+1,r=pe.length;for(;t<r;){const n=t+r>>>1;Yt(pe[n])<e?t=n+1:r=n}return t}function Bn(e){(!pe.length||!pe.includes(e,qt&&e.allowRecurse?$e+1:$e))&&(e.id==null?pe.push(e):pe.splice(Da(e.id),0,e),_o())}function _o(){!qt&&!rn&&(rn=!0,Fn=yo.then(Co))}function Ma(e){const t=pe.indexOf(e);t>$e&&pe.splice(t,1)}function Ia(e){B(e)?Ct.push(...e):(!Ne||!Ne.includes(e,e.allowRecurse?st+1:st))&&Ct.push(e),_o()}function ni(e,t=qt?$e+1:0){for(;t<pe.length;t++){const r=pe[t];r&&r.pre&&(pe.splice(t,1),t--,r())}}function bo(e){if(Ct.length){const t=[...new Set(Ct)];if(Ct.length=0,Ne){Ne.push(...t);return}for(Ne=t,Ne.sort((r,n)=>Yt(r)-Yt(n)),st=0;st<Ne.length;st++)Ne[st]();Ne=null,st=0}}const Yt=e=>e.id==null?1/0:e.id,ja=(e,t)=>{const r=Yt(e)-Yt(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function Co(e){rn=!1,qt=!0,pe.sort(ja);const t=Me;try{for($e=0;$e<pe.length;$e++){const r=pe[$e];r&&r.active!==!1&&Xe(r,null,14)}}finally{$e=0,pe.length=0,bo(),qt=!1,Fn=null,(pe.length||Ct.length)&&Co()}}function Aa(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Y;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:p}=n[f]||Y;p&&(i=r.map(m=>ae(m)?m.trim():m)),u&&(i=r.map(Yr))}let l,s=n[l=Ur(t)]||n[l=Ur(St(t))];!s&&o&&(s=n[l=Ur(kt(t))]),s&&Ie(s,e,6,i);const c=n[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ie(c,e,6,i)}}function So(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},l=!1;if(!$(e)){const s=c=>{const f=So(c,t,!0);f&&(l=!0,oe(a,f))};!r&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!o&&!l?(te(e)&&n.set(e,null),null):(B(o)?o.forEach(s=>a[s]=null):oe(a,o),te(e)&&n.set(e,a),a)}function jr(e,t){return!e||!Rr(t)?!1:(t=t.slice(2).replace(/Once$/,""),w(e,t[0].toLowerCase()+t.slice(1))||w(e,kt(t))||w(e,t))}let Oe=null,To=null;function Tr(e){const t=Oe;return Oe=e,To=e&&e.type.__scopeId||null,t}function Fa(e,t=Oe,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&hi(-1);const o=Tr(t);let a;try{a=e(...i)}finally{Tr(o),n._d&&hi(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Nr(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:l,attrs:s,emit:c,render:f,renderCache:u,data:p,setupState:m,ctx:g,inheritAttrs:y}=e;let L,k;const R=Tr(e);try{if(r.shapeFlag&4){const D=i||n;L=Le(f.call(D,D,u,o,m,p,g)),k=s}else{const D=t;L=Le(D.length>1?D(o,{attrs:s,slots:l,emit:c}):D(o,null)),k=t.props?s:Ba(s)}}catch(D){Kt.length=0,Ir(D,e,1),L=ft(Qt)}let z=L;if(k&&y!==!1){const D=Object.keys(k),{shapeFlag:G}=z;D.length&&G&7&&(a&&D.some(bn)&&(k=La(k,a)),z=xt(z,k))}return r.dirs&&(z=xt(z),z.dirs=z.dirs?z.dirs.concat(r.dirs):r.dirs),r.transition&&(z.transition=r.transition),L=z,Tr(R),L}const Ba=e=>{let t;for(const r in e)(r==="class"||r==="style"||Rr(r))&&((t||(t={}))[r]=e[r]);return t},La=(e,t)=>{const r={};for(const n in e)(!bn(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function $a(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:l,patchFlag:s}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&s>=0){if(s&1024)return!0;if(s&16)return n?ii(n,a,c):!!a;if(s&8){const f=t.dynamicProps;for(let u=0;u<f.length;u++){const p=f[u];if(a[p]!==n[p]&&!jr(c,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?ii(n,a,c):!0:!!a;return!1}function ii(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!jr(r,o))return!0}return!1}function Ua({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Na=e=>e.__isSuspense;function wa(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):Ia(e)}const cr={};function wr(e,t,r){return xo(e,t,r)}function xo(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Y){var l;const s=Ws()===((l=de)==null?void 0:l.scope)?de:null;let c,f=!1,u=!1;if(he(e)?(c=()=>e.value,f=Sr(e)):bt(e)?(c=()=>e,n=!0):B(e)?(u=!0,f=e.some(D=>bt(D)||Sr(D)),c=()=>e.map(D=>{if(he(D))return D.value;if(bt(D))return ct(D);if($(D))return Xe(D,s,2)})):$(e)?t?c=()=>Xe(e,s,2):c=()=>{if(!(s&&s.isUnmounted))return p&&p(),Ie(e,s,3,[m])}:c=Me,t&&n){const D=c;c=()=>ct(D())}let p,m=D=>{p=R.onStop=()=>{Xe(D,s,4)}},g;if(Zt)if(m=Me,t?r&&Ie(t,s,3,[c(),u?[]:void 0,m]):c(),i==="sync"){const D=Lc();g=D.__watcherHandles||(D.__watcherHandles=[])}else return Me;let y=u?new Array(e.length).fill(cr):cr;const L=()=>{if(R.active)if(t){const D=R.run();(n||f||(u?D.some((G,re)=>Jt(G,y[re])):Jt(D,y)))&&(p&&p(),Ie(t,s,3,[D,y===cr?void 0:u&&y[0]===cr?[]:y,m]),y=D)}else R.run()};L.allowRecurse=!!t;let k;i==="sync"?k=L:i==="post"?k=()=>ye(L,s&&s.suspense):(L.pre=!0,s&&(L.id=s.uid),k=()=>Bn(L));const R=new En(c,k);t?r?L():y=R.run():i==="post"?ye(R.run.bind(R),s&&s.suspense):R.run();const z=()=>{R.stop(),s&&s.scope&&Cn(s.scope.effects,R)};return g&&g.push(z),z}function za(e,t,r){const n=this.proxy,i=ae(e)?e.includes(".")?Po(n,e):()=>n[e]:e.bind(n,n);let o;$(t)?o=t:(o=t.handler,r=t);const a=de;Pt(this);const l=xo(i,o.bind(n),r);return a?Pt(a):ut(),l}function Po(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function ct(e,t){if(!te(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),he(e))ct(e.value,t);else if(B(e))for(let r=0;r<e.length;r++)ct(e[r],t);else if(As(e)||Gt(e))e.forEach(r=>{ct(r,t)});else if(Ls(e))for(const r in e)ct(e[r],t);return e}function oi(e,t){const r=Oe;if(r===null)return e;const n=Lr(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,s,c=Y]=t[o];a&&($(a)&&(a={mounted:a,updated:a}),a.deep&&ct(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:s,modifiers:c}))}return e}function tt(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const l=i[a];o&&(l.oldValue=o[a].value);let s=l.dir[n];s&&(Et(),Ie(s,r,8,[e.el,l,e,t]),Rt())}}function Ga(e,t){return $(e)?(()=>oe({name:e.name},t,{setup:e}))():e}const hr=e=>!!e.type.__asyncLoader,ko=e=>e.type.__isKeepAlive;function Ha(e,t){Eo(e,"a",t)}function Ka(e,t){Eo(e,"da",t)}function Eo(e,t,r=de){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ar(t,n,r),r){let i=r.parent;for(;i&&i.parent;)ko(i.parent.vnode)&&Va(n,t,r,i),i=i.parent}}function Va(e,t,r,n){const i=Ar(t,e,n,!0);Oo(()=>{Cn(n[t],i)},r)}function Ar(e,t,r=de,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Et(),Pt(r);const l=Ie(t,r,e,a);return ut(),Rt(),l});return n?i.unshift(o):i.push(o),o}}const Ke=e=>(t,r=de)=>(!Zt||e==="sp")&&Ar(e,(...n)=>t(...n),r),Ja=Ke("bm"),Ro=Ke("m"),Wa=Ke("bu"),qa=Ke("u"),Ya=Ke("bum"),Oo=Ke("um"),Qa=Ke("sp"),Xa=Ke("rtg"),Za=Ke("rtc");function ec(e,t=de){Ar("ec",e,t)}const tc=Symbol.for("v-ndc"),nn=e=>e?Uo(e)?Lr(e)||e.proxy:nn(e.parent):null,Ht=oe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nn(e.parent),$root:e=>nn(e.root),$emit:e=>e.emit,$options:e=>Ln(e),$forceUpdate:e=>e.f||(e.f=()=>Bn(e.update)),$nextTick:e=>e.n||(e.n=Oa.bind(e.proxy)),$watch:e=>za.bind(e)}),zr=(e,t)=>e!==Y&&!e.__isScriptSetup&&w(e,t),rc={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:l,appContext:s}=e;let c;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(zr(n,t))return a[t]=1,n[t];if(i!==Y&&w(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&w(c,t))return a[t]=3,o[t];if(r!==Y&&w(r,t))return a[t]=4,r[t];on&&(a[t]=0)}}const f=Ht[t];let u,p;if(f)return t==="$attrs"&&be(e,"get",t),f(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(r!==Y&&w(r,t))return a[t]=4,r[t];if(p=s.config.globalProperties,w(p,t))return p[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return zr(i,t)?(i[t]=r,!0):n!==Y&&w(n,t)?(n[t]=r,!0):w(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let l;return!!r[a]||e!==Y&&w(e,a)||zr(t,a)||(l=o[0])&&w(l,a)||w(n,a)||w(Ht,a)||w(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:w(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function si(e){return B(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let on=!0;function nc(e){const t=Ln(e),r=e.proxy,n=e.ctx;on=!1,t.beforeCreate&&ai(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:l,provide:s,inject:c,created:f,beforeMount:u,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:L,beforeDestroy:k,beforeUnmount:R,destroyed:z,unmounted:D,render:G,renderTracked:re,renderTriggered:ne,errorCaptured:Q,serverPrefetch:pt,expose:A,inheritAttrs:Ve,components:je,directives:Je,filters:Ce}=t;if(c&&ic(c,n,null),a)for(const V in a){const U=a[V];$(U)&&(n[V]=U.bind(r))}if(i){const V=i.call(r,r);te(V)&&(e.data=Mn(V))}if(on=!0,o)for(const V in o){const U=o[V],Ae=$(U)?U.bind(r,r):$(U.get)?U.get.bind(r,r):Me,et=!$(U)&&$(U.set)?U.set.bind(r):Me,xe=Fc({get:Ae,set:et});Object.defineProperty(n,V,{enumerable:!0,configurable:!0,get:()=>xe.value,set:Se=>xe.value=Se})}if(l)for(const V in l)Do(l[V],n,r,V);if(s){const V=$(s)?s.call(r):s;Reflect.ownKeys(V).forEach(U=>{fc(U,V[U])})}f&&ai(f,e,"c");function ie(V,U){B(U)?U.forEach(Ae=>V(Ae.bind(r))):U&&V(U.bind(r))}if(ie(Ja,u),ie(Ro,p),ie(Wa,m),ie(qa,g),ie(Ha,y),ie(Ka,L),ie(ec,Q),ie(Za,re),ie(Xa,ne),ie(Ya,R),ie(Oo,D),ie(Qa,pt),B(A))if(A.length){const V=e.exposed||(e.exposed={});A.forEach(U=>{Object.defineProperty(V,U,{get:()=>r[U],set:Ae=>r[U]=Ae})})}else e.exposed||(e.exposed={});G&&e.render===Me&&(e.render=G),Ve!=null&&(e.inheritAttrs=Ve),je&&(e.components=je),Je&&(e.directives=Je)}function ic(e,t,r=Me){B(e)&&(e=sn(e));for(const n in e){const i=e[n];let o;te(i)?"default"in i?o=mr(i.from||n,i.default,!0):o=mr(i.from||n):o=mr(i),he(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[n]=o}}function ai(e,t,r){Ie(B(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Do(e,t,r,n){const i=n.includes(".")?Po(r,n):()=>r[n];if(ae(e)){const o=t[e];$(o)&&wr(i,o)}else if($(e))wr(i,e.bind(r));else if(te(e))if(B(e))e.forEach(o=>Do(o,t,r,n));else{const o=$(e.handler)?e.handler.bind(r):t[e.handler];$(o)&&wr(i,o,e)}}function Ln(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,l=o.get(t);let s;return l?s=l:!i.length&&!r&&!n?s=t:(s={},i.length&&i.forEach(c=>xr(s,c,a,!0)),xr(s,t,a)),te(t)&&o.set(t,s),s}function xr(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&xr(e,o,r,!0),i&&i.forEach(a=>xr(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const l=oc[a]||r&&r[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const oc={data:ci,props:li,emits:li,methods:Ut,computed:Ut,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:Ut,directives:Ut,watch:ac,provide:ci,inject:sc};function ci(e,t){return t?e?function(){return oe($(e)?e.call(this,this):e,$(t)?t.call(this,this):t)}:t:e}function sc(e,t){return Ut(sn(e),sn(t))}function sn(e){if(B(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function Ut(e,t){return e?oe(Object.create(null),e,t):t}function li(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:oe(Object.create(null),si(e),si(t??{})):t}function ac(e,t){if(!e)return t;if(!t)return e;const r=oe(Object.create(null),e);for(const n in t)r[n]=ge(e[n],t[n]);return r}function Mo(){return{app:null,config:{isNativeTag:Ms,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cc=0;function lc(e,t){return function(n,i=null){$(n)||(n=oe({},n)),i!=null&&!te(i)&&(i=null);const o=Mo(),a=new Set;let l=!1;const s=o.app={_uid:cc++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:$c,get config(){return o.config},set config(c){},use(c,...f){return a.has(c)||(c&&$(c.install)?(a.add(c),c.install(s,...f)):$(c)&&(a.add(c),c(s,...f))),s},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),s},component(c,f){return f?(o.components[c]=f,s):o.components[c]},directive(c,f){return f?(o.directives[c]=f,s):o.directives[c]},mount(c,f,u){if(!l){const p=ft(n,i);return p.appContext=o,f&&t?t(p,c):e(p,c,u),l=!0,s._container=c,c.__vue_app__=s,Lr(p.component)||p.component.proxy}},unmount(){l&&(e(null,s._container),delete s._container.__vue_app__)},provide(c,f){return o.provides[c]=f,s},runWithContext(c){Pr=s;try{return c()}finally{Pr=null}}};return s}}let Pr=null;function fc(e,t){if(de){let r=de.provides;const n=de.parent&&de.parent.provides;n===r&&(r=de.provides=Object.create(n)),r[e]=t}}function mr(e,t,r=!1){const n=de||Oe;if(n||Pr){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Pr._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&$(t)?t.call(n&&n.proxy):t}}function uc(e,t,r,n=!1){const i={},o={};Cr(o,Br,1),e.propsDefaults=Object.create(null),Io(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:Ca(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function pc(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,l=H(i),[s]=e.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let u=0;u<f.length;u++){let p=f[u];if(jr(e.emitsOptions,p))continue;const m=t[p];if(s)if(w(o,p))m!==o[p]&&(o[p]=m,c=!0);else{const g=St(p);i[g]=an(s,l,g,m,e,!1)}else m!==o[p]&&(o[p]=m,c=!0)}}}else{Io(e,t,i,o)&&(c=!0);let f;for(const u in l)(!t||!w(t,u)&&((f=kt(u))===u||!w(t,f)))&&(s?r&&(r[u]!==void 0||r[f]!==void 0)&&(i[u]=an(s,l,u,void 0,e,!0)):delete i[u]);if(o!==l)for(const u in o)(!t||!w(t,u))&&(delete o[u],c=!0)}c&&He(e,"set","$attrs")}function Io(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,l;if(t)for(let s in t){if(pr(s))continue;const c=t[s];let f;i&&w(i,f=St(s))?!o||!o.includes(f)?r[f]=c:(l||(l={}))[f]=c:jr(e.emitsOptions,s)||(!(s in n)||c!==n[s])&&(n[s]=c,a=!0)}if(o){const s=H(r),c=l||Y;for(let f=0;f<o.length;f++){const u=o[f];r[u]=an(i,s,u,c[u],e,!w(c,u))}}return a}function an(e,t,r,n,i,o){const a=e[r];if(a!=null){const l=w(a,"default");if(l&&n===void 0){const s=a.default;if(a.type!==Function&&!a.skipFactory&&$(s)){const{propsDefaults:c}=i;r in c?n=c[r]:(Pt(i),n=c[r]=s.call(null,t),ut())}else n=s}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===kt(r))&&(n=!0))}return n}function jo(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},l=[];let s=!1;if(!$(e)){const f=u=>{s=!0;const[p,m]=jo(u,t,!0);oe(a,p),m&&l.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!s)return te(e)&&n.set(e,_t),_t;if(B(o))for(let f=0;f<o.length;f++){const u=St(o[f]);fi(u)&&(a[u]=Y)}else if(o)for(const f in o){const u=St(f);if(fi(u)){const p=o[f],m=a[u]=B(p)||$(p)?{type:p}:oe({},p);if(m){const g=di(Boolean,m.type),y=di(String,m.type);m[0]=g>-1,m[1]=y<0||g<y,(g>-1||w(m,"default"))&&l.push(u)}}}const c=[a,l];return te(e)&&n.set(e,c),c}function fi(e){return e[0]!=="$"}function ui(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function pi(e,t){return ui(e)===ui(t)}function di(e,t){return B(t)?t.findIndex(r=>pi(r,e)):$(t)&&pi(t,e)?0:-1}const Ao=e=>e[0]==="_"||e==="$stable",$n=e=>B(e)?e.map(Le):[Le(e)],dc=(e,t,r)=>{if(t._n)return t;const n=Fa((...i)=>$n(t(...i)),r);return n._c=!1,n},Fo=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Ao(i))continue;const o=e[i];if($(o))t[i]=dc(i,o,n);else if(o!=null){const a=$n(o);t[i]=()=>a}}},Bo=(e,t)=>{const r=$n(t);e.slots.default=()=>r},hc=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=H(t),Cr(t,"_",r)):Fo(t,e.slots={})}else e.slots={},t&&Bo(e,t);Cr(e.slots,Br,1)},mc=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Y;if(n.shapeFlag&32){const l=t._;l?r&&l===1?o=!1:(oe(i,t),!r&&l===1&&delete i._):(o=!t.$stable,Fo(t,i)),a=t}else t&&(Bo(e,t),a={default:1});if(o)for(const l in i)!Ao(l)&&!(l in a)&&delete i[l]};function cn(e,t,r,n,i=!1){if(B(e)){e.forEach((p,m)=>cn(p,t&&(B(t)?t[m]:t),r,n,i));return}if(hr(n)&&!i)return;const o=n.shapeFlag&4?Lr(n.component)||n.component.proxy:n.el,a=i?null:o,{i:l,r:s}=e,c=t&&t.r,f=l.refs===Y?l.refs={}:l.refs,u=l.setupState;if(c!=null&&c!==s&&(ae(c)?(f[c]=null,w(u,c)&&(u[c]=null)):he(c)&&(c.value=null)),$(s))Xe(s,l,12,[a,f]);else{const p=ae(s),m=he(s);if(p||m){const g=()=>{if(e.f){const y=p?w(u,s)?u[s]:f[s]:s.value;i?B(y)&&Cn(y,o):B(y)?y.includes(o)||y.push(o):p?(f[s]=[o],w(u,s)&&(u[s]=f[s])):(s.value=[o],e.k&&(f[e.k]=s.value))}else p?(f[s]=a,w(u,s)&&(u[s]=a)):m&&(s.value=a,e.k&&(f[e.k]=a))};a?(g.id=-1,ye(g,r)):g()}}}const ye=wa;function gc(e){return vc(e)}function vc(e,t){const r=Qr();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:l,createComment:s,setText:c,setElementText:f,parentNode:u,nextSibling:p,setScopeId:m=Me,insertStaticContent:g}=e,y=(d,h,v,b=null,_=null,T=null,P=!1,S=null,x=!!h.dynamicChildren)=>{if(d===h)return;d&&!At(d,h)&&(b=ht(d),Se(d,_,T,!0),d=null),h.patchFlag===-2&&(x=!1,h.dynamicChildren=null);const{type:C,ref:M,shapeFlag:O}=h;switch(C){case Fr:L(d,h,v,b);break;case Qt:k(d,h,v,b);break;case Gr:d==null&&R(h,v,b,P);break;case ze:je(d,h,v,b,_,T,P,S,x);break;default:O&1?G(d,h,v,b,_,T,P,S,x):O&6?Je(d,h,v,b,_,T,P,S,x):(O&64||O&128)&&C.process(d,h,v,b,_,T,P,S,x,X)}M!=null&&_&&cn(M,d&&d.ref,T,h||d,!h)},L=(d,h,v,b)=>{if(d==null)n(h.el=l(h.children),v,b);else{const _=h.el=d.el;h.children!==d.children&&c(_,h.children)}},k=(d,h,v,b)=>{d==null?n(h.el=s(h.children||""),v,b):h.el=d.el},R=(d,h,v,b)=>{[d.el,d.anchor]=g(d.children,h,v,b,d.el,d.anchor)},z=({el:d,anchor:h},v,b)=>{let _;for(;d&&d!==h;)_=p(d),n(d,v,b),d=_;n(h,v,b)},D=({el:d,anchor:h})=>{let v;for(;d&&d!==h;)v=p(d),i(d),d=v;i(h)},G=(d,h,v,b,_,T,P,S,x)=>{P=P||h.type==="svg",d==null?re(h,v,b,_,T,P,S,x):pt(d,h,_,T,P,S,x)},re=(d,h,v,b,_,T,P,S)=>{let x,C;const{type:M,props:O,shapeFlag:I,transition:F,dirs:N}=d;if(x=d.el=a(d.type,T,O&&O.is,O),I&8?f(x,d.children):I&16&&Q(d.children,x,null,b,_,T&&M!=="foreignObject",P,S),N&&tt(d,null,b,"created"),ne(x,d,d.scopeId,P,b),O){for(const J in O)J!=="value"&&!pr(J)&&o(x,J,null,O[J],T,d.children,b,_,fe);"value"in O&&o(x,"value",null,O.value),(C=O.onVnodeBeforeMount)&&Be(C,b,d)}N&&tt(d,null,b,"beforeMount");const q=(!_||_&&!_.pendingBranch)&&F&&!F.persisted;q&&F.beforeEnter(x),n(x,h,v),((C=O&&O.onVnodeMounted)||q||N)&&ye(()=>{C&&Be(C,b,d),q&&F.enter(x),N&&tt(d,null,b,"mounted")},_)},ne=(d,h,v,b,_)=>{if(v&&m(d,v),b)for(let T=0;T<b.length;T++)m(d,b[T]);if(_){let T=_.subTree;if(h===T){const P=_.vnode;ne(d,P,P.scopeId,P.slotScopeIds,_.parent)}}},Q=(d,h,v,b,_,T,P,S,x=0)=>{for(let C=x;C<d.length;C++){const M=d[C]=S?Ye(d[C]):Le(d[C]);y(null,M,h,v,b,_,T,P,S)}},pt=(d,h,v,b,_,T,P)=>{const S=h.el=d.el;let{patchFlag:x,dynamicChildren:C,dirs:M}=h;x|=d.patchFlag&16;const O=d.props||Y,I=h.props||Y;let F;v&&rt(v,!1),(F=I.onVnodeBeforeUpdate)&&Be(F,v,h,d),M&&tt(h,d,v,"beforeUpdate"),v&&rt(v,!0);const N=_&&h.type!=="foreignObject";if(C?A(d.dynamicChildren,C,S,v,b,N,T):P||U(d,h,S,null,v,b,N,T,!1),x>0){if(x&16)Ve(S,h,O,I,v,b,_);else if(x&2&&O.class!==I.class&&o(S,"class",null,I.class,_),x&4&&o(S,"style",O.style,I.style,_),x&8){const q=h.dynamicProps;for(let J=0;J<q.length;J++){const ee=q[J],Pe=O[ee],gt=I[ee];(gt!==Pe||ee==="value")&&o(S,ee,Pe,gt,_,d.children,v,b,fe)}}x&1&&d.children!==h.children&&f(S,h.children)}else!P&&C==null&&Ve(S,h,O,I,v,b,_);((F=I.onVnodeUpdated)||M)&&ye(()=>{F&&Be(F,v,h,d),M&&tt(h,d,v,"updated")},b)},A=(d,h,v,b,_,T,P)=>{for(let S=0;S<h.length;S++){const x=d[S],C=h[S],M=x.el&&(x.type===ze||!At(x,C)||x.shapeFlag&70)?u(x.el):v;y(x,C,M,null,b,_,T,P,!0)}},Ve=(d,h,v,b,_,T,P)=>{if(v!==b){if(v!==Y)for(const S in v)!pr(S)&&!(S in b)&&o(d,S,v[S],null,P,h.children,_,T,fe);for(const S in b){if(pr(S))continue;const x=b[S],C=v[S];x!==C&&S!=="value"&&o(d,S,C,x,P,h.children,_,T,fe)}"value"in b&&o(d,"value",v.value,b.value)}},je=(d,h,v,b,_,T,P,S,x)=>{const C=h.el=d?d.el:l(""),M=h.anchor=d?d.anchor:l("");let{patchFlag:O,dynamicChildren:I,slotScopeIds:F}=h;F&&(S=S?S.concat(F):F),d==null?(n(C,v,b),n(M,v,b),Q(h.children,v,M,_,T,P,S,x)):O>0&&O&64&&I&&d.dynamicChildren?(A(d.dynamicChildren,I,v,_,T,P,S),(h.key!=null||_&&h===_.subTree)&&Lo(d,h,!0)):U(d,h,v,M,_,T,P,S,x)},Je=(d,h,v,b,_,T,P,S,x)=>{h.slotScopeIds=S,d==null?h.shapeFlag&512?_.ctx.activate(h,v,b,P,x):Ce(h,v,b,_,T,P,x):dt(d,h,x)},Ce=(d,h,v,b,_,T,P)=>{const S=d.component=Oc(d,b,_);if(ko(d)&&(S.ctx.renderer=X),Dc(S),S.asyncDep){if(_&&_.registerDep(S,ie),!d.el){const x=S.subTree=ft(Qt);k(null,x,h,v)}return}ie(S,d,h,v,_,T,P)},dt=(d,h,v)=>{const b=h.component=d.component;if($a(d,h,v))if(b.asyncDep&&!b.asyncResolved){V(b,h,v);return}else b.next=h,Ma(b.update),b.update();else h.el=d.el,b.vnode=h},ie=(d,h,v,b,_,T,P)=>{const S=()=>{if(d.isMounted){let{next:M,bu:O,u:I,parent:F,vnode:N}=d,q=M,J;rt(d,!1),M?(M.el=N.el,V(d,M,P)):M=N,O&&dr(O),(J=M.props&&M.props.onVnodeBeforeUpdate)&&Be(J,F,M,N),rt(d,!0);const ee=Nr(d),Pe=d.subTree;d.subTree=ee,y(Pe,ee,u(Pe.el),ht(Pe),d,_,T),M.el=ee.el,q===null&&Ua(d,ee.el),I&&ye(I,_),(J=M.props&&M.props.onVnodeUpdated)&&ye(()=>Be(J,F,M,N),_)}else{let M;const{el:O,props:I}=h,{bm:F,m:N,parent:q}=d,J=hr(h);if(rt(d,!1),F&&dr(F),!J&&(M=I&&I.onVnodeBeforeMount)&&Be(M,q,h),rt(d,!0),O&&It){const ee=()=>{d.subTree=Nr(d),It(O,d.subTree,d,_,null)};J?h.type.__asyncLoader().then(()=>!d.isUnmounted&&ee()):ee()}else{const ee=d.subTree=Nr(d);y(null,ee,v,b,d,_,T),h.el=ee.el}if(N&&ye(N,_),!J&&(M=I&&I.onVnodeMounted)){const ee=h;ye(()=>Be(M,q,ee),_)}(h.shapeFlag&256||q&&hr(q.vnode)&&q.vnode.shapeFlag&256)&&d.a&&ye(d.a,_),d.isMounted=!0,h=v=b=null}},x=d.effect=new En(S,()=>Bn(C),d.scope),C=d.update=()=>x.run();C.id=d.uid,rt(d,!0),C()},V=(d,h,v)=>{h.component=d;const b=d.vnode.props;d.vnode=h,d.next=null,pc(d,h.props,b,v),mc(d,h.children,v),Et(),ni(),Rt()},U=(d,h,v,b,_,T,P,S,x=!1)=>{const C=d&&d.children,M=d?d.shapeFlag:0,O=h.children,{patchFlag:I,shapeFlag:F}=h;if(I>0){if(I&128){et(C,O,v,b,_,T,P,S,x);return}else if(I&256){Ae(C,O,v,b,_,T,P,S,x);return}}F&8?(M&16&&fe(C,_,T),O!==C&&f(v,O)):M&16?F&16?et(C,O,v,b,_,T,P,S,x):fe(C,_,T,!0):(M&8&&f(v,""),F&16&&Q(O,v,b,_,T,P,S,x))},Ae=(d,h,v,b,_,T,P,S,x)=>{d=d||_t,h=h||_t;const C=d.length,M=h.length,O=Math.min(C,M);let I;for(I=0;I<O;I++){const F=h[I]=x?Ye(h[I]):Le(h[I]);y(d[I],F,v,null,_,T,P,S,x)}C>M?fe(d,_,T,!0,!1,O):Q(h,v,b,_,T,P,S,x,O)},et=(d,h,v,b,_,T,P,S,x)=>{let C=0;const M=h.length;let O=d.length-1,I=M-1;for(;C<=O&&C<=I;){const F=d[C],N=h[C]=x?Ye(h[C]):Le(h[C]);if(At(F,N))y(F,N,v,null,_,T,P,S,x);else break;C++}for(;C<=O&&C<=I;){const F=d[O],N=h[I]=x?Ye(h[I]):Le(h[I]);if(At(F,N))y(F,N,v,null,_,T,P,S,x);else break;O--,I--}if(C>O){if(C<=I){const F=I+1,N=F<M?h[F].el:b;for(;C<=I;)y(null,h[C]=x?Ye(h[C]):Le(h[C]),v,N,_,T,P,S,x),C++}}else if(C>I)for(;C<=O;)Se(d[C],_,T,!0),C++;else{const F=C,N=C,q=new Map;for(C=N;C<=I;C++){const Te=h[C]=x?Ye(h[C]):Le(h[C]);Te.key!=null&&q.set(Te.key,C)}let J,ee=0;const Pe=I-N+1;let gt=!1,Vn=0;const jt=new Array(Pe);for(C=0;C<Pe;C++)jt[C]=0;for(C=F;C<=O;C++){const Te=d[C];if(ee>=Pe){Se(Te,_,T,!0);continue}let Fe;if(Te.key!=null)Fe=q.get(Te.key);else for(J=N;J<=I;J++)if(jt[J-N]===0&&At(Te,h[J])){Fe=J;break}Fe===void 0?Se(Te,_,T,!0):(jt[Fe-N]=C+1,Fe>=Vn?Vn=Fe:gt=!0,y(Te,h[Fe],v,null,_,T,P,S,x),ee++)}const Jn=gt?yc(jt):_t;for(J=Jn.length-1,C=Pe-1;C>=0;C--){const Te=N+C,Fe=h[Te],Wn=Te+1<M?h[Te+1].el:b;jt[C]===0?y(null,Fe,v,Wn,_,T,P,S,x):gt&&(J<0||C!==Jn[J]?xe(Fe,v,Wn,2):J--)}}},xe=(d,h,v,b,_=null)=>{const{el:T,type:P,transition:S,children:x,shapeFlag:C}=d;if(C&6){xe(d.component.subTree,h,v,b);return}if(C&128){d.suspense.move(h,v,b);return}if(C&64){P.move(d,h,v,X);return}if(P===ze){n(T,h,v);for(let O=0;O<x.length;O++)xe(x[O],h,v,b);n(d.anchor,h,v);return}if(P===Gr){z(d,h,v);return}if(b!==2&&C&1&&S)if(b===0)S.beforeEnter(T),n(T,h,v),ye(()=>S.enter(T),_);else{const{leave:O,delayLeave:I,afterLeave:F}=S,N=()=>n(T,h,v),q=()=>{O(T,()=>{N(),F&&F()})};I?I(T,N,q):q()}else n(T,h,v)},Se=(d,h,v,b=!1,_=!1)=>{const{type:T,props:P,ref:S,children:x,dynamicChildren:C,shapeFlag:M,patchFlag:O,dirs:I}=d;if(S!=null&&cn(S,null,v,d,!0),M&256){h.ctx.deactivate(d);return}const F=M&1&&I,N=!hr(d);let q;if(N&&(q=P&&P.onVnodeBeforeUnmount)&&Be(q,h,d),M&6)Mt(d.component,v,b);else{if(M&128){d.suspense.unmount(v,b);return}F&&tt(d,null,h,"beforeUnmount"),M&64?d.type.remove(d,h,v,_,X,b):C&&(T!==ze||O>0&&O&64)?fe(C,h,v,!1,!0):(T===ze&&O&384||!_&&M&16)&&fe(x,h,v),b&&Dt(d)}(N&&(q=P&&P.onVnodeUnmounted)||F)&&ye(()=>{q&&Be(q,h,d),F&&tt(d,null,h,"unmounted")},v)},Dt=d=>{const{type:h,el:v,anchor:b,transition:_}=d;if(h===ze){We(v,b);return}if(h===Gr){D(d);return}const T=()=>{i(v),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(d.shapeFlag&1&&_&&!_.persisted){const{leave:P,delayLeave:S}=_,x=()=>P(v,T);S?S(d.el,T,x):x()}else T()},We=(d,h)=>{let v;for(;d!==h;)v=p(d),i(d),d=v;i(h)},Mt=(d,h,v)=>{const{bum:b,scope:_,update:T,subTree:P,um:S}=d;b&&dr(b),_.stop(),T&&(T.active=!1,Se(P,d,h,v)),S&&ye(S,h),ye(()=>{d.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},fe=(d,h,v,b=!1,_=!1,T=0)=>{for(let P=T;P<d.length;P++)Se(d[P],h,v,b,_)},ht=d=>d.shapeFlag&6?ht(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el),rr=(d,h,v)=>{d==null?h._vnode&&Se(h._vnode,null,null,!0):y(h._vnode||null,d,h,null,null,null,v),ni(),bo(),h._vnode=d},X={p:y,um:Se,m:xe,r:Dt,mt:Ce,mc:Q,pc:U,pbc:A,n:ht,o:e};let mt,It;return t&&([mt,It]=t(X)),{render:rr,hydrate:mt,createApp:lc(rr,mt)}}function rt({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Lo(e,t,r=!1){const n=e.children,i=t.children;if(B(n)&&B(i))for(let o=0;o<n.length;o++){const a=n[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=Ye(i[o]),l.el=a.el),r||Lo(a,l)),l.type===Fr&&(l.el=a.el)}}function yc(e){const t=e.slice(),r=[0];let n,i,o,a,l;const s=e.length;for(n=0;n<s;n++){const c=e[n];if(c!==0){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)l=o+a>>1,e[r[l]]<c?o=l+1:a=l;c<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const _c=e=>e.__isTeleport,ze=Symbol.for("v-fgt"),Fr=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),Gr=Symbol.for("v-stc"),Kt=[];let De=null;function Hr(e=!1){Kt.push(De=e?null:[])}function bc(){Kt.pop(),De=Kt[Kt.length-1]||null}let Xt=1;function hi(e){Xt+=e}function Cc(e){return e.dynamicChildren=Xt>0?De||_t:null,bc(),Xt>0&&De&&De.push(e),e}function Kr(e,t,r,n,i,o){return Cc(W(e,t,r,n,i,o,!0))}function Sc(e){return e?e.__v_isVNode===!0:!1}function At(e,t){return e.type===t.type&&e.key===t.key}const Br="__vInternal",$o=({key:e})=>e??null,gr=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?ae(e)||he(e)||$(e)?{i:Oe,r:e,k:t,f:!!r}:e:null);function W(e,t=null,r=null,n=0,i=null,o=e===ze?0:1,a=!1,l=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$o(t),ref:t&&gr(t),scopeId:To,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Oe};return l?(Un(s,r),o&128&&e.normalize(s)):r&&(s.shapeFlag|=ae(r)?8:16),Xt>0&&!a&&De&&(s.patchFlag>0||o&6)&&s.patchFlag!==32&&De.push(s),s}const ft=Tc;function Tc(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===tc)&&(e=Qt),Sc(e)){const l=xt(e,t,!0);return r&&Un(l,r),Xt>0&&!o&&De&&(l.shapeFlag&6?De[De.indexOf(e)]=l:De.push(l)),l.patchFlag|=-2,l}if(Ac(e)&&(e=e.__vccOpts),t){t=xc(t);let{class:l,style:s}=t;l&&!ae(l)&&(t.class=Pn(l)),te(s)&&(ho(s)&&!B(s)&&(s=oe({},s)),t.style=xn(s))}const a=ae(e)?1:Na(e)?128:_c(e)?64:te(e)?4:$(e)?2:0;return W(e,t,r,n,i,a,o,!0)}function xc(e){return e?ho(e)||Br in e?oe({},e):e:null}function xt(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,l=t?kc(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&$o(l),ref:t&&t.ref?r&&i?B(i)?i.concat(gr(t)):[i,gr(t)]:gr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&xt(e.ssContent),ssFallback:e.ssFallback&&xt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Pc(e=" ",t=0){return ft(Fr,null,e,t)}function Le(e){return e==null||typeof e=="boolean"?ft(Qt):B(e)?ft(ze,null,e.slice()):typeof e=="object"?Ye(e):ft(Fr,null,String(e))}function Ye(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:xt(e)}function Un(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(B(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Un(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Br in t)?t._ctx=Oe:i===3&&Oe&&(Oe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else $(t)?(t={default:t,_ctx:Oe},r=32):(t=String(t),n&64?(r=16,t=[Pc(t)]):r=8);e.children=t,e.shapeFlag|=r}function kc(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Pn([t.class,n.class]));else if(i==="style")t.style=xn([t.style,n.style]);else if(Rr(i)){const o=t[i],a=n[i];a&&o!==a&&!(B(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Be(e,t,r,n=null){Ie(e,t,7,[r,n])}const Ec=Mo();let Rc=0;function Oc(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||Ec,o={uid:Rc++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new to(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jo(n,i),emitsOptions:So(n,i),emit:null,emitted:null,propsDefaults:Y,inheritAttrs:n.inheritAttrs,ctx:Y,data:Y,props:Y,attrs:Y,slots:Y,refs:Y,setupState:Y,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Aa.bind(null,o),e.ce&&e.ce(o),o}let de=null,Nn,vt,mi="__VUE_INSTANCE_SETTERS__";(vt=Qr()[mi])||(vt=Qr()[mi]=[]),vt.push(e=>de=e),Nn=e=>{vt.length>1?vt.forEach(t=>t(e)):vt[0](e)};const Pt=e=>{Nn(e),e.scope.on()},ut=()=>{de&&de.scope.off(),Nn(null)};function Uo(e){return e.vnode.shapeFlag&4}let Zt=!1;function Dc(e,t=!1){Zt=t;const{props:r,children:n}=e.vnode,i=Uo(e);uc(e,r,i,t),hc(e,n);const o=i?Mc(e,t):void 0;return Zt=!1,o}function Mc(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=jn(new Proxy(e.ctx,rc));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?jc(e):null;Pt(e),Et();const o=Xe(n,e,0,[e.props,i]);if(Rt(),ut(),Xi(o)){if(o.then(ut,ut),t)return o.then(a=>{gi(e,a,t)}).catch(a=>{Ir(a,e,0)});e.asyncDep=o}else gi(e,o,t)}else No(e,t)}function gi(e,t,r){$(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:te(t)&&(e.setupState=vo(t)),No(e,r)}let vi;function No(e,t,r){const n=e.type;if(!e.render){if(!t&&vi&&!n.render){const i=n.template||Ln(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:l,compilerOptions:s}=n,c=oe(oe({isCustomElement:o,delimiters:l},a),s);n.render=vi(i,c)}}e.render=n.render||Me}Pt(e),Et(),nc(e),Rt(),ut()}function Ic(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return be(e,"get","$attrs"),t[r]}}))}function jc(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return Ic(e)},slots:e.slots,emit:e.emit,expose:t}}function Lr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(vo(jn(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Ht)return Ht[r](e)},has(t,r){return r in t||r in Ht}}))}function Ac(e){return $(e)&&"__vccOpts"in e}const Fc=(e,t)=>Ea(e,t,Zt),Bc=Symbol.for("v-scx"),Lc=()=>mr(Bc),$c="3.3.4",Uc="http://www.w3.org/2000/svg",at=typeof document<"u"?document:null,yi=at&&at.createElement("template"),Nc={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?at.createElementNS(Uc,e):at.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>at.createTextNode(e),createComment:e=>at.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>at.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{yi.innerHTML=n?`<svg>${e}</svg>`:e;const l=yi.content;if(n){const s=l.firstChild;for(;s.firstChild;)l.appendChild(s.firstChild);l.removeChild(s)}t.insertBefore(l,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function wc(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function zc(e,t,r){const n=e.style,i=ae(r);if(r&&!i){if(t&&!ae(t))for(const o in t)r[o]==null&&ln(n,o,"");for(const o in r)ln(n,o,r[o])}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const _i=/\s*!important$/;function ln(e,t,r){if(B(r))r.forEach(n=>ln(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Gc(e,t);_i.test(r)?e.setProperty(kt(n),r.replace(_i,""),"important"):e[n]=r}}const bi=["Webkit","Moz","ms"],Vr={};function Gc(e,t){const r=Vr[t];if(r)return r;let n=St(t);if(n!=="filter"&&n in e)return Vr[t]=n;n=Zi(n);for(let i=0;i<bi.length;i++){const o=bi[i]+n;if(o in e)return Vr[t]=o}return t}const Ci="http://www.w3.org/1999/xlink";function Hc(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Ci,t.slice(6,t.length)):e.setAttributeNS(Ci,t,r);else{const o=Ks(t);r==null||o&&!eo(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function Kc(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=r;const c=l==="OPTION"?e.getAttribute("value"):e.value,f=r??"";c!==f&&(e.value=f),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const c=typeof e[t];c==="boolean"?r=eo(r):r==null&&c==="string"?(r="",s=!0):c==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}function yt(e,t,r,n){e.addEventListener(t,r,n)}function Vc(e,t,r,n){e.removeEventListener(t,r,n)}function Jc(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[l,s]=Wc(t);if(n){const c=o[t]=Qc(n,i);yt(e,l,c,s)}else a&&(Vc(e,l,a,s),o[t]=void 0)}}const Si=/(?:Once|Passive|Capture)$/;function Wc(e){let t;if(Si.test(e)){t={};let n;for(;n=e.match(Si);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):kt(e.slice(2)),t]}let Jr=0;const qc=Promise.resolve(),Yc=()=>Jr||(qc.then(()=>Jr=0),Jr=Date.now());function Qc(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ie(Xc(n,r.value),t,5,[n])};return r.value=e,r.attached=Yc(),r}function Xc(e,t){if(B(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Ti=/^on[a-z]/,Zc=(e,t,r,n,i=!1,o,a,l,s)=>{t==="class"?wc(e,n,i):t==="style"?zc(e,r,n):Rr(t)?bn(t)||Jc(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):el(e,t,n,i))?Kc(e,t,n,o,a,l,s):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Hc(e,t,n,i))};function el(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Ti.test(t)&&$(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Ti.test(t)&&ae(r)?!1:t in e}const xi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return B(t)?r=>dr(t,r):t};function tl(e){e.target.composing=!0}function Pi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ki={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=xi(i);const o=n||i.props&&i.props.type==="number";yt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;r&&(l=l.trim()),o&&(l=Yr(l)),e._assign(l)}),r&&yt(e,"change",()=>{e.value=e.value.trim()}),t||(yt(e,"compositionstart",tl),yt(e,"compositionend",Pi),yt(e,"change",Pi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=xi(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&Yr(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},rl=["ctrl","shift","alt","meta"],nl={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>rl.some(r=>e[`${r}Key`]&&!t.includes(r))},Ft=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=nl[t[i]];if(o&&o(r,t))return}return e(r,...n)},il=oe({patchProp:Zc},Nc);let Ei;function ol(){return Ei||(Ei=gc(il))}const sl=(...e)=>{const t=ol().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=al(n);if(!i)return;const o=t._component;!$(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function al(e){return ae(e)?document.querySelector(e):e}var cl=!1;/*!
  * pinia v2.1.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ll=Symbol();var Ri;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ri||(Ri={}));function fl(){const e=Vs(!0),t=e.run(()=>ot({}));let r=[],n=[];const i=jn({install(o){i._a=o,o.provide(ll,i),o.config.globalProperties.$pinia=i,n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!cl?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return i}function wn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wo={exports:{}};(function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=t;var r=e.exports.BlobBuilder;typeof window<"u"&&(r=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function n(){this._pieces=[],this._parts=[]}n.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},n.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);t.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var i=new r,o=0,a=this._parts.length;o<a;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=n})(wo);var zo=wo.exports,ul=zo.BufferBuilder,Oi=zo.binaryFeatures,pl={unpack:function(e){var t=new ce(e);return t.unpack()},pack:function(e){var t=new le;t.pack(e);var r=t.getBuffer();return r}},dl=pl;function ce(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}ce.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}};ce.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};ce.prototype.unpack_uint16=function(){var e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t};ce.prototype.unpack_uint32=function(){var e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t};ce.prototype.unpack_uint64=function(){var e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t};ce.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256};ce.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536};ce.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};ce.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};ce.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t};ce.prototype.unpack_string=function(e){for(var t=this.read(e),r=0,n="",i,o;r<e;)i=t[r],i<128?(n+=String.fromCharCode(i),r++):(i^192)<32?(o=(i^192)<<6|t[r+1]&63,n+=String.fromCharCode(o),r+=2):(o=(i&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,n+=String.fromCharCode(o),r+=3);return this.index+=e,n};ce.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t};ce.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t};ce.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,n=e&8388607|8388608;return(t===0?1:-1)*n*Math.pow(2,r-23)};ce.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,n=(e>>20&2047)-1023,i=e&1048575|1048576,o=i*Math.pow(2,n-20)+t*Math.pow(2,n-52);return(r===0?1:-1)*o};ce.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")};function le(){this.bufferBuilder=new ul}le.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};le.prototype.pack=function(e){var t=typeof e;if(t==="string")this.pack_string(e);else if(t==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(t==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(t==="undefined")this.bufferBuilder.append(192);else if(t==="object")if(e===null)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(r==ArrayBuffer)Oi.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)Oi.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+r.toString()+'" not yet supported')}else throw new Error('Type "'+t+'" not yet supported');this.bufferBuilder.flush()};le.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};le.prototype.pack_string=function(e){var t=ml(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};le.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(var r=0;r<t;r++)this.pack(e[r])};le.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};le.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),a=t<<31|r+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)};le.prototype.pack_object=function(e){var t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))};le.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};le.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};le.prototype.pack_uint32=function(e){var t=e&4294967295;this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};le.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};le.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};le.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};le.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};le.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};function hl(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function ml(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,hl).length}const Di=wn(dl);let Go=!0,Ho=!0;function Nt(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Ot(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,l){if(a!==t)return i.apply(this,arguments);const s=c=>{const f=r(c);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,s),i.apply(this,[a,s])};const o=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const s=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,s])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function gl(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Go=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function vl(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ho=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function zn(){if(typeof window=="object"){if(Go)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $r(e,t){Ho&&console.warn(e+" is deprecated, please use "+t+" instead.")}function yl(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=Nt(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Nt(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Nt(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Nt(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Mi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ko(e){return Mi(e)?Object.keys(e).reduce(function(t,r){const n=Mi(e[r]),i=n?Ko(e[r]):e[r],o=n&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[r]:i})},{}):e}function fn(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?fn(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{fn(e,e.get(i),r)})}))}function Ii(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(l=>{l.type===n&&l.trackId===a.id&&fn(e,l,i)})}),i}const ji=zn;function Vo(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const s={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const f=typeof l[c]=="object"?l[c]:{ideal:l[c]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const u=function(p,m){return p?p+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(f.ideal!==void 0){s.optional=s.optional||[];let p={};typeof f.ideal=="number"?(p[u("min",c)]=f.ideal,s.optional.push(p),p={},p[u("max",c)]=f.ideal,s.optional.push(p)):(p[u("",c)]=f.ideal,s.optional.push(p))}f.exact!==void 0&&typeof f.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",c)]=f.exact):["min","max"].forEach(p=>{f[p]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(p,c)]=f[p])})}),l.advanced&&(s.optional=(s.optional||[]).concat(l.advanced)),s},i=function(l,s){if(t.version>=61)return s(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(f,u,p){u in f&&!(p in f)&&(f[p]=f[u],delete f[u])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const f=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let u;if(c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(p=>{p=p.filter(g=>g.kind==="videoinput");let m=p.find(g=>u.some(y=>g.label.toLowerCase().includes(y)));return!m&&p.length&&u.includes("back")&&(m=p[p.length-1]),m&&(l.video.deviceId=c.exact?{exact:m.deviceId}:{ideal:m.deviceId}),l.video=n(l.video),ji("chrome: "+JSON.stringify(l)),s(l)})}l.video=n(l.video)}return ji("chrome: "+JSON.stringify(l)),s(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,s,c){i(l,f=>{r.webkitGetUserMedia(f,s,u=>{c&&c(o(u))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,c=>l(c).then(f=>{if(c.audio&&!f.getAudioTracks().length||c.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function _l(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(i=>{const o=n.video&&n.video.width,a=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(n.video.mandatory.maxWidth=o),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)})}}}function Jo(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Wo(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ot(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function qo(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,s){let c=i.apply(this,arguments);return c||(c=t(this,l),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const s=this._senders.indexOf(l);s!==-1&&this._senders.splice(s,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{const l=this._senders.find(s=>s.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Yo(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,i,o]=arguments;if(arguments.length>0&&typeof n=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof n!="function"))return t.apply(this,[]);const a=function(s){const c={};return s.result().forEach(u=>{const p={id:u.id,timestamp:u.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[u.type]||u.type};u.names().forEach(m=>{p[m]=u.stat(m)}),c[p.id]=p}),c},l=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){const s=function(c){i(l(a(c)))};return t.apply(this,[s,n])}return new Promise((s,c)=>{t.apply(this,[function(f){s(l(a(f)))},c])}).then(i,o)}}function Qo(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>Ii(a,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Ot(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Ii(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,o,a;return this.getSenders().forEach(l=>{l.track===n&&(i?a=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===n&&(o?a=!0:o=l),l.track===n)),a||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Xo(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(s)===-1&&this._shimmedLocalStreams[l.id].push(s):this._shimmedLocalStreams[l.id]=[l,s],s};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const s=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(s)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const s=this._shimmedLocalStreams[l].indexOf(a);s!==-1&&this._shimmedLocalStreams[l].splice(s,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Zo(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Xo(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(u=>this._reverseStreams[u.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(u=>{if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const u=new e.MediaStream(f.getTracks());this._streams[f.id]=u,this._reverseStreams[u.id]=f,f=u}n.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(y=>y===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[u.id];if(g)g.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new e.MediaStream([f]);this._streams[u.id]=y,this._reverseStreams[y.id]=u,this.addStream(y)}return this.getSenders().find(y=>y.track===f)};function o(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:f.type,sdp:u})}function a(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:f.type,sdp:u})}["createOffer","createAnswer"].forEach(function(c){const f=e.RTCPeerConnection.prototype[c],u={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[g=>{const y=o(this,g);p[0].apply(null,[y])},g=>{p[1]&&p[1].apply(null,g)},arguments[2]]):f.apply(this,arguments).then(g=>o(this,g))}};e.RTCPeerConnection.prototype[c]=u[c]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(y=>f.track===y)&&(p=this._streams[m])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function un(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function es(e,t){Ot(e,"negotiationneeded",r=>{const n=r.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const Ai=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:es,shimAddTrackRemoveTrack:Zo,shimAddTrackRemoveTrackWithNative:Xo,shimGetDisplayMedia:_l,shimGetSendersWithDtmf:qo,shimGetStats:Yo,shimGetUserMedia:Vo,shimMediaStream:Jo,shimOnTrack:Wo,shimPeerConnection:un,shimSenderReceiverGetStats:Qo},Symbol.toStringTag,{value:"Module"}));function bl(e,t){let r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(n=>{if(n&&(n.urls||n.url)){let i=n.urls||n.url;n.url&&!n.urls&&$r("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(a=>{if(a.indexOf("stun:")===0)return!1;const l=a.startsWith("turn")&&!a.startsWith("turn:[")&&a.includes("transport=udp");return l&&!r?(r=!0,!0):l&&!r}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}var ts={exports:{}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(function(n){return n.trim()})},t.splitSections=function(r){var n=r.split(`
m=`);return n.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},t.getDescription=function(r){var n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){var n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(function(i){return i.indexOf(n)===0})},t.parseCandidate=function(r){var n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");for(var i={foundation:n[0],component:parseInt(n[1],10),protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]},o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]=n[o+1];break}return i},t.writeCandidate=function(r){var n=[];n.push(r.foundation),n.push(r.component),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);var i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substr(14).split(" ")},t.parseRtpMap=function(r){var n=r.substr(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){var n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);var i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){var n=r.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},t.parseFmtp=function(r){for(var n={},i,o=r.substr(r.indexOf(" ")+1).split(";"),a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){var n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var o=[];Object.keys(r.parameters).forEach(function(a){r.parameters[a]?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){var n=r.substr(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){var n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(o){n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){var n=r.indexOf(" "),i={ssrc:parseInt(r.substr(7,n-7),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substr(n+1,o-n-1),i.value=r.substr(o+1)):i.attribute=r.substr(n+1),i},t.parseSsrcGroup=function(r){var n=r.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(function(i){return parseInt(i,10)})}},t.getMid=function(r){var n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(r){var n=r.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1]}},t.getDtlsParameters=function(r,n){var i=t.matchPrefix(r+n,"a=fingerprint:");return{role:"auto",fingerprints:i.map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){var i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){var n=r.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var n=r.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){var i=t.matchPrefix(r+n,"a=crypto:");return i.map(t.parseCryptoLine)},t.getIceParameters=function(r,n){var i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`},t.parseRtpParameters=function(r){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r),o=i[0].split(" "),a=3;a<o.length;a++){var l=o[a],s=t.matchPrefix(r,"a=rtpmap:"+l+" ")[0];if(s){var c=t.parseRtpMap(s),f=t.matchPrefix(r,"a=fmtp:"+l+" ");switch(c.parameters=f.length?t.parseFmtp(f[0]):{},c.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(r,"a=extmap:").forEach(function(u){n.headerExtensions.push(t.parseExtmap(u))}),n},t.writeRtpDescription=function(r,n){var i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map(function(a){return a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(function(a){i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});var o=0;return n.codecs.forEach(function(a){a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,n.headerExtensions&&n.headerExtensions.forEach(function(a){i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){var n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(r,"a=ssrc:").map(function(p){return t.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="cname"}),s=l.length>0&&l[0].ssrc,c,f=t.matchPrefix(r,"a=ssrc-group:FID").map(function(p){var m=p.substr(17).split(" ");return m.map(function(g){return parseInt(g,10)})});f.length>0&&f[0].length>1&&f[0][0]===s&&(c=f[0][1]),i.codecs.forEach(function(p){if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){var m={ssrc:s,codecPayloadType:parseInt(p.parameters.apt,10)};s&&c&&(m.rtx={ssrc:c}),n.push(m),o&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},n.push(m))}}),n.length===0&&s&&n.push({ssrc:s});var u=t.matchPrefix(r,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substr(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substr(5),10)*1e3*.95-50*40*8:u=void 0,n.forEach(function(p){p.maxBitrate=u})),n},t.parseRtcpParameters=function(r){var n={},i=t.matchPrefix(r,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;var a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.parseMsid=function(r){var n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};var o=t.matchPrefix(r,"a=ssrc:").map(function(a){return t.parseSsrcMedia(a)}).filter(function(a){return a.attribute==="msid"});if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(r){var n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:o};var l=t.matchPrefix(r,"a=sctpmap:");if(l.length>0){var s=t.matchPrefix(r,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){var i=[];return r.protocol!=="DTLS/SCTP"?i=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(r,n,i){var o,a=n!==void 0?n:2;r?o=r:o=t.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(r,n,i,o){var a=t.writeRtpDescription(r.kind,n);if(a+=t.writeIceParameters(r.iceGatherer.getLocalParameters()),a+=t.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),a+="a=mid:"+r.mid+`\r
`,r.direction?a+="a="+r.direction+`\r
`:r.rtpSender&&r.rtpReceiver?a+=`a=sendrecv\r
`:r.rtpSender?a+=`a=sendonly\r
`:r.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,r.rtpSender){var l="msid:"+o.id+" "+r.rtpSender.track.id+`\r
`;a+="a="+l,a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+l,r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),a},t.getDirection=function(r,n){for(var i=t.splitLines(r),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){var n=t.splitLines(r),i=n[0].split(" ");return i[0].substr(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){var n=t.splitLines(r),i=n[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(r){var n=t.matchPrefix(r,"o=")[0],i=n.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var n=t.splitLines(r),i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(ts);var rs=ts.exports;const vr=wn(rs);var j=rs;function Cl(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function Fi(e,t,r,n,i){var o=j.writeRtpDescription(e.kind,t);if(o+=j.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=j.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":i||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var l="msid:"+(n?n.id:"-")+" "+a+`\r
`;o+="a="+l,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+j.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+j.localCName+`\r
`),o}function Sl(e,t){var r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(n){if(n&&(n.urls||n.url)){var i=n.urls||n.url;n.url&&!n.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(a){var l=a.indexOf("turn:")===0&&a.indexOf("transport=udp")!==-1&&a.indexOf("turn:[")===-1&&!r;return l?(r=!0,!0):a.indexOf("stun:")===0&&t>=14393&&a.indexOf("?transport=udp")===-1}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}function lr(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(o,a){o=parseInt(o,10);for(var l=0;l<a.length;l++)if(a[l].payloadType===o||a[l].preferredPayloadType===o)return a[l]},i=function(o,a,l,s){var c=n(o.parameters.apt,l),f=n(a.parameters.apt,s);return c&&f&&c.name.toLowerCase()===f.name.toLowerCase()};return e.codecs.forEach(function(o){for(var a=0;a<t.codecs.length;a++){var l=t.codecs[a];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,e.codecs,t.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),r.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(s){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===s.type&&o.rtcpFeedback[c].parameter===s.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var a=0;a<t.headerExtensions.length;a++){var l=t.headerExtensions[a];if(o.uri===l.uri){r.headerExtensions.push(l);break}}}),r}function Bi(e,t,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)!==-1}function Wr(e,t){var r=e.getRemoteCandidates().find(function(n){return t.foundation===n.foundation&&t.ip===n.ip&&t.port===n.port&&t.priority===n.priority&&t.protocol===n.protocol&&t.type===n.type});return r||e.addRemoteCandidate(t),!r}function ue(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var Tl=function(e,t){function r(s,c){c.addTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:s}))}function n(s,c){c.removeTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:s}))}function i(s,c,f,u){var p=new Event("track");p.track=c,p.receiver=f,p.transceiver={receiver:f},p.streams=u,e.setTimeout(function(){s._dispatchEvent("track",p)})}var o=function(s){var c=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){c[p]=f[p].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw ue("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=Sl(s.iceServers||[],t),this._iceGatherers=[],s.iceCandidatePoolSize)for(var u=s.iceCandidatePoolSize;u>0;u--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=j.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(s,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+s]=="function"&&this["on"+s](c))},o.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(s,c){var f=this.transceivers.length>0,u={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)u.iceTransport=this.transceivers[0].iceTransport,u.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();u.iceTransport=p.iceTransport,u.dtlsTransport=p.dtlsTransport}return c||this.transceivers.push(u),u},o.prototype.addTrack=function(s,c){if(this._isClosed)throw ue("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(m){return m.track===s});if(f)throw ue("InvalidAccessError","Track already exists.");for(var u,p=0;p<this.transceivers.length;p++)!this.transceivers[p].track&&this.transceivers[p].kind===s.kind&&(u=this.transceivers[p]);return u||(u=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),u.track=s,u.stream=c,u.rtpSender=new e.RTCRtpSender(s,u.dtlsTransport),u.rtpSender},o.prototype.addStream=function(s){var c=this;if(t>=15025)s.getTracks().forEach(function(u){c.addTrack(u,s)});else{var f=s.clone();s.getTracks().forEach(function(u,p){var m=f.getTracks()[p];u.addEventListener("enabled",function(g){m.enabled=g.enabled})}),f.getTracks().forEach(function(u){c.addTrack(u,f)})}},o.prototype.removeTrack=function(s){if(this._isClosed)throw ue("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(p){return p.rtpSender===s});if(!c)throw ue("InvalidAccessError","Sender was not created by this connection.");var f=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var u=this.transceivers.map(function(p){return p.stream});u.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(s){var c=this;s.getTracks().forEach(function(f){var u=c.getSenders().find(function(p){return p.track===f});u&&c.removeTrack(u)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},o.prototype._createIceGatherer=function(s,c){var f=this;if(c&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var u=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(u,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(p){var m=!p.candidate||Object.keys(p.candidate).length===0;u.state=m?"completed":"gathering",f.transceivers[s].bufferedCandidateEvents!==null&&f.transceivers[s].bufferedCandidateEvents.push(p)},u.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),u},o.prototype._gather=function(s,c){var f=this,u=this.transceivers[c].iceGatherer;if(!u.onlocalcandidate){var p=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,u.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),u.onlocalcandidate=function(m){if(!(f.usingBundle&&c>0)){var g=new Event("icecandidate");g.candidate={sdpMid:s,sdpMLineIndex:c};var y=m.candidate,L=!y||Object.keys(y).length===0;if(L)(u.state==="new"||u.state==="gathering")&&(u.state="completed");else{u.state==="new"&&(u.state="gathering"),y.component=1,y.ufrag=u.getLocalParameters().usernameFragment;var k=j.writeCandidate(y);g.candidate=Object.assign(g.candidate,j.parseCandidate(k)),g.candidate.candidate=k,g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}var R=j.getMediaSections(f._localDescription.sdp);L?R[g.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:R[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+`\r
`,f._localDescription.sdp=j.getDescription(f._localDescription.sdp)+R.join("");var z=f.transceivers.every(function(D){return D.iceGatherer&&D.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),L||f._dispatchEvent("icecandidate",g),z&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},e.setTimeout(function(){p.forEach(function(m){u.onlocalcandidate(m)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var s=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var f=new e.RTCDtlsTransport(c);return f.ondtlsstatechange=function(){s._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:c,dtlsTransport:f}},o.prototype._disposeIceAndDtlsTransports=function(s){var c=this.transceivers[s].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[s].iceGatherer);var f=this.transceivers[s].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[s].iceTransport);var u=this.transceivers[s].dtlsTransport;u&&(delete u.ondtlsstatechange,delete u.onerror,delete this.transceivers[s].dtlsTransport)},o.prototype._transceive=function(s,c,f){var u=lr(s.localCapabilities,s.remoteCapabilities);c&&s.rtpSender&&(u.encodings=s.sendEncodingParameters,u.rtcp={cname:j.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(u.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(u)),f&&s.rtpReceiver&&u.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&t<15019&&s.recvEncodingParameters.forEach(function(p){delete p.rtx}),s.recvEncodingParameters.length?u.encodings=s.recvEncodingParameters:u.encodings=[{}],u.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(u.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(u.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(u))},o.prototype.setLocalDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(ue("TypeError",'Unsupported type "'+s.type+'"'));if(!Bi("setLocalDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(ue("InvalidStateError","Can not set local "+s.type+" in state "+c.signalingState));var f,u;if(s.type==="offer")f=j.splitSections(s.sdp),u=f.shift(),f.forEach(function(m,g){var y=j.parseRtpParameters(m);c.transceivers[g].localCapabilities=y}),c.transceivers.forEach(function(m,g){c._gather(m.mid,g)});else if(s.type==="answer"){f=j.splitSections(c._remoteDescription.sdp),u=f.shift();var p=j.matchPrefix(u,"a=ice-lite").length>0;f.forEach(function(m,g){var y=c.transceivers[g],L=y.iceGatherer,k=y.iceTransport,R=y.dtlsTransport,z=y.localCapabilities,D=y.remoteCapabilities,G=j.isRejected(m)&&j.matchPrefix(m,"a=bundle-only").length===0;if(!G&&!y.rejected){var re=j.getIceParameters(m,u),ne=j.getDtlsParameters(m,u);p&&(ne.role="server"),(!c.usingBundle||g===0)&&(c._gather(y.mid,g),k.state==="new"&&k.start(L,re,p?"controlling":"controlled"),R.state==="new"&&R.start(ne));var Q=lr(z,D);c._transceive(y,Q.codecs.length>0,!1)}})}return c._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(ue("TypeError",'Unsupported type "'+s.type+'"'));if(!Bi("setRemoteDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(ue("InvalidStateError","Can not set remote "+s.type+" in state "+c.signalingState));var f={};c.remoteStreams.forEach(function(k){f[k.id]=k});var u=[],p=j.splitSections(s.sdp),m=p.shift(),g=j.matchPrefix(m,"a=ice-lite").length>0,y=j.matchPrefix(m,"a=group:BUNDLE ").length>0;c.usingBundle=y;var L=j.matchPrefix(m,"a=ice-options:")[0];return L?c.canTrickleIceCandidates=L.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,p.forEach(function(k,R){var z=j.splitLines(k),D=j.getKind(k),G=j.isRejected(k)&&j.matchPrefix(k,"a=bundle-only").length===0,re=z[0].substr(2).split(" ")[2],ne=j.getDirection(k,m),Q=j.parseMsid(k),pt=j.getMid(k)||j.generateIdentifier();if(G||D==="application"&&(re==="DTLS/SCTP"||re==="UDP/DTLS/SCTP")){c.transceivers[R]={mid:pt,kind:D,protocol:re,rejected:!0};return}!G&&c.transceivers[R]&&c.transceivers[R].rejected&&(c.transceivers[R]=c._createTransceiver(D,!0));var A,Ve,je,Je,Ce,dt,ie,V,U,Ae=j.parseRtpParameters(k),et,xe;G||(et=j.getIceParameters(k,m),xe=j.getDtlsParameters(k,m),xe.role="client"),ie=j.parseRtpEncodingParameters(k);var Se=j.parseRtcpParameters(k),Dt=j.matchPrefix(k,"a=end-of-candidates",m).length>0,We=j.matchPrefix(k,"a=candidate:").map(function(X){return j.parseCandidate(X)}).filter(function(X){return X.component===1});if((s.type==="offer"||s.type==="answer")&&!G&&y&&R>0&&c.transceivers[R]&&(c._disposeIceAndDtlsTransports(R),c.transceivers[R].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[R].iceTransport=c.transceivers[0].iceTransport,c.transceivers[R].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[R].rtpSender&&c.transceivers[R].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[R].rtpReceiver&&c.transceivers[R].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),s.type==="offer"&&!G){A=c.transceivers[R]||c._createTransceiver(D),A.mid=pt,A.iceGatherer||(A.iceGatherer=c._createIceGatherer(R,y)),We.length&&A.iceTransport.state==="new"&&(Dt&&(!y||R===0)?A.iceTransport.setRemoteCandidates(We):We.forEach(function(X){Wr(A.iceTransport,X)})),V=e.RTCRtpReceiver.getCapabilities(D),t<15019&&(V.codecs=V.codecs.filter(function(X){return X.name!=="rtx"})),dt=A.sendEncodingParameters||[{ssrc:(2*R+2)*1001}];var Mt=!1;if(ne==="sendrecv"||ne==="sendonly"){if(Mt=!A.rtpReceiver,Ce=A.rtpReceiver||new e.RTCRtpReceiver(A.dtlsTransport,D),Mt){var fe;U=Ce.track,Q&&Q.stream==="-"||(Q?(f[Q.stream]||(f[Q.stream]=new e.MediaStream,Object.defineProperty(f[Q.stream],"id",{get:function(){return Q.stream}})),Object.defineProperty(U,"id",{get:function(){return Q.track}}),fe=f[Q.stream]):(f.default||(f.default=new e.MediaStream),fe=f.default)),fe&&(r(U,fe),A.associatedRemoteMediaStreams.push(fe)),u.push([U,Ce,fe])}}else A.rtpReceiver&&A.rtpReceiver.track&&(A.associatedRemoteMediaStreams.forEach(function(X){var mt=X.getTracks().find(function(It){return It.id===A.rtpReceiver.track.id});mt&&n(mt,X)}),A.associatedRemoteMediaStreams=[]);A.localCapabilities=V,A.remoteCapabilities=Ae,A.rtpReceiver=Ce,A.rtcpParameters=Se,A.sendEncodingParameters=dt,A.recvEncodingParameters=ie,c._transceive(c.transceivers[R],!1,Mt)}else if(s.type==="answer"&&!G){A=c.transceivers[R],Ve=A.iceGatherer,je=A.iceTransport,Je=A.dtlsTransport,Ce=A.rtpReceiver,dt=A.sendEncodingParameters,V=A.localCapabilities,c.transceivers[R].recvEncodingParameters=ie,c.transceivers[R].remoteCapabilities=Ae,c.transceivers[R].rtcpParameters=Se,We.length&&je.state==="new"&&((g||Dt)&&(!y||R===0)?je.setRemoteCandidates(We):We.forEach(function(X){Wr(A.iceTransport,X)})),(!y||R===0)&&(je.state==="new"&&je.start(Ve,et,"controlling"),Je.state==="new"&&Je.start(xe));var ht=lr(A.localCapabilities,A.remoteCapabilities),rr=ht.codecs.filter(function(X){return X.name.toLowerCase()==="rtx"}).length;!rr&&A.sendEncodingParameters[0].rtx&&delete A.sendEncodingParameters[0].rtx,c._transceive(A,ne==="sendrecv"||ne==="recvonly",ne==="sendrecv"||ne==="sendonly"),Ce&&(ne==="sendrecv"||ne==="sendonly")?(U=Ce.track,Q?(f[Q.stream]||(f[Q.stream]=new e.MediaStream),r(U,f[Q.stream]),u.push([U,Ce,f[Q.stream]])):(f.default||(f.default=new e.MediaStream),r(U,f.default),u.push([U,Ce,f.default]))):delete A.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=s.type==="offer"?"active":"passive"),c._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(f).forEach(function(k){var R=f[k];if(R.getTracks().length){if(c.remoteStreams.indexOf(R)===-1){c.remoteStreams.push(R);var z=new Event("addstream");z.stream=R,e.setTimeout(function(){c._dispatchEvent("addstream",z)})}u.forEach(function(D){var G=D[0],re=D[1];R.id===D[2].id&&i(c,G,re,[R])})}}),u.forEach(function(k){k[2]||i(c,k[0],k[1],[])}),e.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(k){k.iceTransport&&k.iceTransport.state==="new"&&k.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),k.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(s){this.signalingState=s;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var c=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var s,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&!u.rejected&&c[u.iceTransport.state]++}),s="new",c.failed>0?s="failed":c.checking>0?s="checking":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0?s="connected":c.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},o.prototype._updateConnectionState=function(){var s,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&u.dtlsTransport&&!u.rejected&&(c[u.iceTransport.state]++,c[u.dtlsTransport.state]++)}),c.connected+=c.completed,s="new",c.failed>0?s="failed":c.connecting>0?s="connecting":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},o.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(ue("InvalidStateError","Can not call createOffer after close"));var c=s.transceivers.filter(function(g){return g.kind==="audio"}).length,f=s.transceivers.filter(function(g){return g.kind==="video"}).length,u=arguments[0];if(u){if(u.mandatory||u.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");u.offerToReceiveAudio!==void 0&&(u.offerToReceiveAudio===!0?c=1:u.offerToReceiveAudio===!1?c=0:c=u.offerToReceiveAudio),u.offerToReceiveVideo!==void 0&&(u.offerToReceiveVideo===!0?f=1:u.offerToReceiveVideo===!1?f=0:f=u.offerToReceiveVideo)}for(s.transceivers.forEach(function(g){g.kind==="audio"?(c--,c<0&&(g.wantReceive=!1)):g.kind==="video"&&(f--,f<0&&(g.wantReceive=!1))});c>0||f>0;)c>0&&(s._createTransceiver("audio"),c--),f>0&&(s._createTransceiver("video"),f--);var p=j.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(g,y){var L=g.track,k=g.kind,R=g.mid||j.generateIdentifier();g.mid=R,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(y,s.usingBundle));var z=e.RTCRtpSender.getCapabilities(k);t<15019&&(z.codecs=z.codecs.filter(function(G){return G.name!=="rtx"})),z.codecs.forEach(function(G){G.name==="H264"&&G.parameters["level-asymmetry-allowed"]===void 0&&(G.parameters["level-asymmetry-allowed"]="1"),g.remoteCapabilities&&g.remoteCapabilities.codecs&&g.remoteCapabilities.codecs.forEach(function(re){G.name.toLowerCase()===re.name.toLowerCase()&&G.clockRate===re.clockRate&&(G.preferredPayloadType=re.payloadType)})}),z.headerExtensions.forEach(function(G){var re=g.remoteCapabilities&&g.remoteCapabilities.headerExtensions||[];re.forEach(function(ne){G.uri===ne.uri&&(G.id=ne.id)})});var D=g.sendEncodingParameters||[{ssrc:(2*y+1)*1001}];L&&t>=15019&&k==="video"&&!D[0].rtx&&(D[0].rtx={ssrc:D[0].ssrc+1}),g.wantReceive&&(g.rtpReceiver=new e.RTCRtpReceiver(g.dtlsTransport,k)),g.localCapabilities=z,g.sendEncodingParameters=D}),s._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+s.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(g,y){p+=Fi(g,g.localCapabilities,"offer",g.stream,s._dtlsRole),p+=`a=rtcp-rsize\r
`,g.iceGatherer&&s.iceGatheringState!=="new"&&(y===0||!s.usingBundle)&&(g.iceGatherer.getLocalCandidates().forEach(function(L){L.component=1,p+="a="+j.writeCandidate(L)+`\r
`}),g.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var m=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(m)},o.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(ue("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(ue("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var c=j.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(c+="a=group:BUNDLE "+s.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var f=j.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(p,m){if(!(m+1>f)){if(p.rejected){p.kind==="application"?p.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`;return}if(p.stream){var g;p.kind==="audio"?g=p.stream.getAudioTracks()[0]:p.kind==="video"&&(g=p.stream.getVideoTracks()[0]),g&&t>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1})}var y=lr(p.localCapabilities,p.remoteCapabilities),L=y.codecs.filter(function(k){return k.name.toLowerCase()==="rtx"}).length;!L&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,c+=Fi(p,y,"answer",p.stream,s._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var u=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(u)},o.prototype.addIceCandidate=function(s){var c=this,f;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(u,p){if(c._remoteDescription)if(!s||s.candidate==="")for(var m=0;m<c.transceivers.length&&!(!c.transceivers[m].rejected&&(c.transceivers[m].iceTransport.addRemoteCandidate({}),f=j.getMediaSections(c._remoteDescription.sdp),f[m]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=j.getDescription(c._remoteDescription.sdp)+f.join(""),c.usingBundle));m++);else{var g=s.sdpMLineIndex;if(s.sdpMid){for(var y=0;y<c.transceivers.length;y++)if(c.transceivers[y].mid===s.sdpMid){g=y;break}}var L=c.transceivers[g];if(L){if(L.rejected)return u();var k=Object.keys(s.candidate).length>0?j.parseCandidate(s.candidate):{};if(k.protocol==="tcp"&&(k.port===0||k.port===9)||k.component&&k.component!==1)return u();if((g===0||g>0&&L.iceTransport!==c.transceivers[0].iceTransport)&&!Wr(L.iceTransport,k))return p(ue("OperationError","Can not add ICE candidate"));var R=s.candidate.trim();R.indexOf("a=")===0&&(R=R.substr(2)),f=j.getMediaSections(c._remoteDescription.sdp),f[g]+="a="+(k.type?R:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=j.getDescription(c._remoteDescription.sdp)+f.join("")}else return p(ue("OperationError","Can not add ICE candidate"))}else return p(ue("InvalidStateError","Can not add ICE candidate without a remote description"));u()})},o.prototype.getStats=function(s){if(s&&s instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(u){u.rtpSender&&u.rtpSender.track===s?c=u.rtpSender:u.rtpReceiver&&u.rtpReceiver.track===s&&(c=u.rtpReceiver)}),!c)throw ue("InvalidAccessError","Invalid selector.");return c.getStats()}var f=[];return this.transceivers.forEach(function(u){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){u[p]&&f.push(u[p].getStats())})}),Promise.all(f).then(function(u){var p=new Map;return u.forEach(function(m){m.forEach(function(g){p.set(g.id,g)})}),p})};var a=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];a.forEach(function(s){var c=e[s];if(c&&c.prototype&&c.prototype.getStats){var f=c.prototype.getStats;c.prototype.getStats=function(){return f.apply(this).then(function(u){var p=new Map;return Object.keys(u).forEach(function(m){u[m].type=Cl(u[m]),p.set(m,u[m])}),p})}}});var l=["createOffer","createAnswer"];return l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?c.apply(this,[arguments[2]]).then(function(u){typeof f[0]=="function"&&f[0].apply(null,[u])},function(u){typeof f[1]=="function"&&f[1].apply(null,[u])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(u){typeof f[2]=="function"&&f[2].apply(null,[u])}):c.apply(this,arguments)}}),["getStats"].forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):c.apply(this,arguments)}}),o};const xl=wn(Tl);function ns(e){const t=e&&e.navigator,r=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return n(i).catch(o=>Promise.reject(r(o)))}}function is(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function pn(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){n.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=xl(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=bl(i.iceServers,t.version),zn("ICE servers after filtering:",i.iceServers)),new r(i)},e.RTCPeerConnection.prototype=r.prototype}function os(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const Li=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:is,shimGetUserMedia:ns,shimPeerConnection:pn,shimReplaceTrack:os},Symbol.toStringTag,{value:"Module"}));function ss(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){$r("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const i=function(a,l,s){l in a&&!(s in a)&&(a[s]=a[l],delete a[l])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function Pl(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function as(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function dn(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;return n.apply(this,[o||null]).then(s=>{if(t.version<53&&!a)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((f,u)=>{s.set(u,Object.assign({},f,{type:r[f.type]||f.type}))})}return s}).then(a,l)}}function cs(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ls(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Ot(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function fs(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){$r("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function us(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ps(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:a}=o,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n.sendEncodings,a.sendEncodings=n.sendEncodings,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function ds(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function hs(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function ms(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const $i=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:ps,shimCreateAnswer:ms,shimCreateOffer:hs,shimGetDisplayMedia:Pl,shimGetParameters:ds,shimGetUserMedia:ss,shimOnTrack:as,shimPeerConnection:dn,shimRTCDataChannel:us,shimReceiverGetStats:ls,shimRemoveStream:fs,shimSenderGetStats:cs},Symbol.toStringTag,{value:"Module"}));function gs(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>t.call(this,i,n)),n.getVideoTracks().forEach(i=>t.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const i=r.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function vs(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,n.dispatchEvent(a)})}),t.apply(n,arguments)}}}function ys(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p},t.createAnswer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p};let l=function(s,c,f){const u=i.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u};t.setLocalDescription=l,l=function(s,c,f){const u=o.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.setRemoteDescription=l,l=function(s,c,f){const u=a.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.addIceCandidate=l}function _s(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(bs(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,i,o){t.mediaDevices.getUserMedia(n).then(i,o)}).bind(t))}function bs(e){return e&&e.video!==void 0?Object.assign({},e,{video:Ko(e.video)}):e}function Cs(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const o=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?($r("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(n.iceServers[a])}n.iceServers=o}return new t(n,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Ss(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ts(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function xs(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Ui=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:xs,shimCallbacksAPI:ys,shimConstraints:bs,shimCreateOfferLegacy:Ts,shimGetUserMedia:_s,shimLocalStreamsAPI:gs,shimRTCIceServerUrls:Cs,shimRemoteStreamsAPI:vs,shimTrackEventTransceiver:Ss},Symbol.toStringTag,{value:"Module"}));function yr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const i=new t(n),o=vr.parseCandidate(n.candidate),a=Object.assign(i,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,Ot(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function wt(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const s=vr.splitSections(l.sdp);return s.shift(),s.some(c=>{const f=vr.parseMLine(c);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(l){const s=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const c=parseInt(s[1],10);return c!==c?-1:c},i=function(l){let s=65536;return t.browser==="firefox"&&(t.version<57?l===-1?s=16384:s=2147483637:t.version<60?s=t.version===57?65535:65536:s=2147483637),s},o=function(l,s){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const f=vr.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?c=parseInt(f[0].substr(19),10):t.browser==="firefox"&&s!==-1&&(c=2147483637),c},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const s=n(arguments[0]),c=i(s),f=o(arguments[0],s);let u;c===0&&f===0?u=Number.POSITIVE_INFINITY:c===0||f===0?u=Math.max(c,f):u=Math.min(c,f);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return u}}),this._sctp=p}return a.apply(this,arguments)}}function zt(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){const o=n.send;n.send=function(){const l=arguments[0],s=l.length||l.size||l.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=r.apply(this,arguments);return t(i,this),i},Ot(e,"datachannel",n=>(t(n.channel,n.target),n))}function hn(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function mn(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return r.apply(this,arguments)}}function _r(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const kl=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:mn,shimAddIceCandidateNullOrEmpty:_r,shimConnectionState:hn,shimMaxMessageSize:wt,shimRTCIceCandidate:yr,shimSendThrowTypeError:zt},Symbol.toStringTag,{value:"Module"}));function El({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=zn,n=yl(e),i={browserDetails:n,commonShim:kl,extractVersion:Nt,disableLog:gl,disableWarnings:vl};switch(n.browser){case"chrome":if(!Ai||!un||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=Ai,_r(e,n),Vo(e,n),Jo(e),un(e,n),Wo(e),Zo(e,n),qo(e),Yo(e),Qo(e),es(e,n),yr(e),hn(e),wt(e,n),zt(e),mn(e,n);break;case"firefox":if(!$i||!dn||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=$i,_r(e,n),ss(e,n),dn(e,n),as(e),fs(e),cs(e),ls(e),us(e),ps(e),ds(e),hs(e),ms(e),yr(e),hn(e),wt(e,n),zt(e);break;case"edge":if(!Li||!pn||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),i;r("adapter.js shimming edge."),i.browserShim=Li,ns(e),is(e),pn(e,n),os(e),wt(e,n),zt(e);break;case"safari":if(!Ui||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=Ui,_r(e,n),Cs(e),Ts(e),ys(e),gs(e),vs(e),Ss(e),_s(e),xs(e),yr(e),wt(e,n),zt(e),mn(e,n);break;default:r("Unsupported browser!");break}return i}const Ni=El({window:typeof window>"u"?void 0:window});function Ue(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var qr=Ni.default||Ni,Bt=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),r=this.getVersion(),n=this.supportedBrowsers.includes(t);return n?t==="chrome"?r>=this.minChromeVersion:t==="firefox"?r>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return qr.browserDetails.browser},e.prototype.getVersion=function(){return qr.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),r=qr.browserDetails.version||0;if(t==="chrome"&&r<this.minChromeVersion)return!1;if(t==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),wi={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Rl=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=wi,this.browser=Bt.getBrowser(),this.browserVersion=Bt.getVersion(),this.supports=function(){var t={browser:Bt.isBrowserSupported(),webRTC:Bt.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;var r;try{r=new RTCPeerConnection(wi),t.audioVideo=!0;var n=void 0;try{n=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!Bt.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{r&&r.close()}return t}(),this.pack=Di.pack,this.unpack=Di.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var r=[],n=t.size,i=Math.ceil(n/K.chunkedMTU),o=0,a=0;a<n;){var l=Math.min(n,a+K.chunkedMTU),s=t.slice(a,l),c={__peerData:this._dataCount,n:o,data:s,total:i};r.push(c),a=l,o++}return this._dataCount++,r},e.prototype.blobToArrayBuffer=function(t,r){var n=new FileReader;return n.onload=function(i){i.target&&r(i.target.result)},n.readAsArrayBuffer(t),n},e.prototype.binaryStringToArrayBuffer=function(t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n)&255;return r.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),K=new Rl,Ps={};Ue(Ps,"Peer",()=>yn,e=>yn=e);var tr={},Ol=Object.prototype.hasOwnProperty,ve="~";function er(){}Object.create&&(er.prototype=Object.create(null),new er().__proto__||(ve=!1));function Dl(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function ks(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Dl(r,n||e,i),a=ve?ve+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function br(e,t){--e._eventsCount===0?e._events=new er:delete e._events[t]}function me(){this._events=new er,this._eventsCount=0}me.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)Ol.call(r,n)&&t.push(ve?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};me.prototype.listeners=function(t){var r=ve?ve+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};me.prototype.listenerCount=function(t){var r=ve?ve+t:t,n=this._events[r];return n?n.fn?1:n.length:0};me.prototype.emit=function(t,r,n,i,o,a){var l=ve?ve+t:t;if(!this._events[l])return!1;var s=this._events[l],c=arguments.length,f,u;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,r),!0;case 3:return s.fn.call(s.context,r,n),!0;case 4:return s.fn.call(s.context,r,n,i),!0;case 5:return s.fn.call(s.context,r,n,i,o),!0;case 6:return s.fn.call(s.context,r,n,i,o,a),!0}for(u=1,f=new Array(c-1);u<c;u++)f[u-1]=arguments[u];s.fn.apply(s.context,f)}else{var p=s.length,m;for(u=0;u<p;u++)switch(s[u].once&&this.removeListener(t,s[u].fn,void 0,!0),c){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,r);break;case 3:s[u].fn.call(s[u].context,r,n);break;case 4:s[u].fn.call(s[u].context,r,n,i);break;default:if(!f)for(m=1,f=new Array(c-1);m<c;m++)f[m-1]=arguments[m];s[u].fn.apply(s[u].context,f)}}return!0};me.prototype.on=function(t,r,n){return ks(this,t,r,n,!1)};me.prototype.once=function(t,r,n){return ks(this,t,r,n,!0)};me.prototype.removeListener=function(t,r,n,i){var o=ve?ve+t:t;if(!this._events[o])return this;if(!r)return br(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&br(this,o);else{for(var l=0,s=[],c=a.length;l<c;l++)(a[l].fn!==r||i&&!a[l].once||n&&a[l].context!==n)&&s.push(a[l]);s.length?this._events[o]=s.length===1?s[0]:s:br(this,o)}return this};me.prototype.removeAllListeners=function(t){var r;return t?(r=ve?ve+t:t,this._events[r]&&br(this,r)):(this._events=new er,this._eventsCount=0),this};me.prototype.off=me.prototype.removeListener;me.prototype.addListener=me.prototype.on;me.prefixed=ve;me.EventEmitter=me;tr=me;var E={};Ue(E,"LogLevel",()=>_e,e=>_e=e);Ue(E,"default",()=>zi,e=>zi=e);var nt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},it=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Ml="PeerJS: ",_e;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(_e||(_e={}));var Il=function(){function e(){this._logLevel=_e.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=_e.All&&this._print.apply(this,it([_e.All],nt(t),!1))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=_e.Warnings&&this._print.apply(this,it([_e.Warnings],nt(t),!1))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=_e.Errors&&this._print.apply(this,it([_e.Errors],nt(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=it([Ml],nt(r),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=_e.All?console.log.apply(console,it([],nt(i),!1)):t>=_e.Warnings?console.warn.apply(console,it(["WARNING"],nt(i),!1)):t>=_e.Errors&&console.error.apply(console,it(["ERROR"],nt(i),!1))},e}(),zi=new Il,Es={};Ue(Es,"Socket",()=>Gi,e=>Gi=e);var Re;(function(e){e.Data="data",e.Media="media"})(Re||(Re={}));var Z;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(Z||(Z={}));var we;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(we||(we={}));var Ge;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Ge||(Ge={}));var se;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(se||(se={}));var Gn={};Gn=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var jl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Al=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Fl=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Bl=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gi=function(e){jl(t,e);function t(r,n,i,o,a,l){l===void 0&&(l=5e3);var s=e.call(this)||this;s.pingInterval=l,s._disconnected=!0,s._messagesQueue=[];var c=r?"wss://":"ws://";return s._baseUrl=c+n+":"+i+o+"peerjs?key="+a,s}return t.prototype.start=function(r,n){var i=this;this._id=r;var o="".concat(this._baseUrl,"&id=").concat(r,"&token=").concat(n);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Gn.version),this._disconnected=!1,this._socket.onmessage=function(a){var l;try{l=JSON.parse(a.data),E.default.log("Server message received:",l)}catch{E.default.log("Invalid server message",a.data);return}i.emit(Ge.Message,l)},this._socket.onclose=function(a){i._disconnected||(E.default.log("Socket closed.",a),i._cleanup(),i._disconnected=!0,i.emit(Ge.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),E.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var r=this;this._wsPingTimer=setTimeout(function(){r._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(!this._wsOpen()){E.default.log("Cannot send heartbeat, because socket closed");return}var r=JSON.stringify({type:se.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()},t.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},t.prototype._sendQueuedMessages=function(){var r,n,i=Fl([],Al(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=Bl(i),a=o.next();!a.done;a=o.next()){var l=a.value;this.send(l)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.send=function(r){if(!this._disconnected){if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(Ge.Error,"Invalid message");return}if(this._wsOpen()){var n=JSON.stringify(r);this._socket.send(n)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(tr.EventEmitter),gn={};Ue(gn,"MediaConnection",()=>Vi,e=>Vi=e);var Hn={};Ue(Hn,"Negotiator",()=>Hi,e=>Hi=e);var kr=function(){return kr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kr.apply(this,arguments)},fr=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},ur=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Hi=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Re.Media&&t._stream&&this._addTracksToConnection(t._stream,r),t.originator){if(this.connection.type===Re.Data){var n=this.connection,i={ordered:!!t.reliable},o=r.createDataChannel(n.label,i);n.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){E.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var r=this,n=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;E.default.log("Listening for ICE candidates."),t.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(E.default.log("Received ICE candidates for ".concat(n,":"),l.candidate),a.socket.send({type:se.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":E.default.log("iceConnectionState is failed, closing connections to "+n),r.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),r.connection.close();break;case"closed":E.default.log("iceConnectionState is closed, closing connections to "+n),r.connection.emit("error",new Error("Connection to "+n+" closed.")),r.connection.close();break;case"disconnected":E.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=K.noop;break}r.connection.emit("iceStateChanged",t.iceConnectionState)},E.default.log("Listening for data channel"),t.ondatachannel=function(l){E.default.log("Received data channel");var s=l.channel,c=a.getConnection(n,i);c.initialize(s)},E.default.log("Listening for remote stream"),t.ontrack=function(l){E.default.log("Received remote stream");var s=l.streams[0],c=a.getConnection(n,i);if(c.type===Re.Media){var f=c;r._addStreamToMediaConnection(s,f)}}},e.prototype.cleanup=function(){E.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var r=t.signalingState!=="closed",n=!1;if(this.connection.type===Re.Data){var i=this.connection,o=i.dataChannel;o&&(n=!!o.readyState&&o.readyState!=="closed")}(r||n)&&t.close()}},e.prototype._makeOffer=function(){return fr(this,void 0,Promise,function(){var t,r,n,i,o,a,l;return ur(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),E.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return s.sent(),E.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:K.browser},this.connection.type===Re.Data&&(o=this.connection,i=kr(kr({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),r.socket.send({type:se.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return a=s.sent(),a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(Z.WebRTC,a),E.default.log("Failed to setLocalDescription, ",a)),[3,6];case 6:return[3,8];case 7:return l=s.sent(),r.emitError(Z.WebRTC,l),E.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return fr(this,void 0,Promise,function(){var t,r,n,i,o;return ur(this,function(a){switch(a.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:n=a.sent(),E.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return a.sent(),E.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),r.socket.send({type:se.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:K.browser},dst:this.connection.peer}),[3,6];case 5:return i=a.sent(),r.emitError(Z.WebRTC,i),E.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=a.sent(),r.emitError(Z.WebRTC,o),E.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,r){return fr(this,void 0,Promise,function(){var n,i,o,a;return ur(this,function(l){switch(l.label){case 0:r=new RTCSessionDescription(r),n=this.connection.peerConnection,i=this.connection.provider,E.default.log("Setting remote description",r),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,n.setRemoteDescription(r)];case 2:return l.sent(),E.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),t!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return a=l.sent(),i.emitError(Z.WebRTC,a),E.default.log("Failed to setRemoteDescription, ",a),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return fr(this,void 0,Promise,function(){var r,n,i,o,a,l;return ur(this,function(s){switch(s.label){case 0:E.default.log("handleCandidate:",t),r=t.candidate,n=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,a=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:n,candidate:r}))];case 2:return s.sent(),E.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=s.sent(),a.emitError(Z.WebRTC,l),E.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,r){if(E.default.log("add tracks from stream ".concat(t.id," to peer connection")),!r.addTrack)return E.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(n){r.addTrack(n,t)})},e.prototype._addStreamToMediaConnection=function(t,r){E.default.log("add stream ".concat(t.id," to media connection ").concat(r.connectionId)),r.addStream(t)},e}(),Kn={};Ue(Kn,"BaseConnection",()=>Ki,e=>Ki=e);var Ll=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(e){Ll(t,e);function t(r,n,i){var o=e.call(this)||this;return o.peer=r,o.provider=n,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(tr.EventEmitter),$l=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Er=function(){return Er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Er.apply(this,arguments)},Ul=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Vi=function(e){$l(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+K.randomToken(),o._negotiator=new Hn.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Re.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(r){E.default.log("Receiving stream",r),this._remoteStream=r,e.prototype.emit.call(this,"stream",r)},t.prototype.handleMessage=function(r){var n=r.type,i=r.payload;switch(r.type){case se.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case se.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:E.default.warn("Unrecognized message type:".concat(n," from peer:").concat(this.peer));break}},t.prototype.answer=function(r,n){var i,o;if(n===void 0&&(n={}),this._localStream){E.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection(Er(Er({},this.options._payload),{_stream:r}));var a=this.provider._getMessages(this.connectionId);try{for(var l=Ul(a),s=l.next();!s.done;s=l.next()){var c=s.value;this.handleMessage(c)}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Kn.BaseConnection),vn={};Ue(vn,"DataConnection",()=>Wi,e=>Wi=e);var Rs={};Ue(Rs,"EncodingQueue",()=>Ji,e=>Ji=e);var Nl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ji=function(e){Nl(t,e);function t(){var r=e.call(this)||this;return r.fileReader=new FileReader,r._queue=[],r._processing=!1,r.fileReader.onload=function(n){r._processing=!1,n.target&&r.emit("done",n.target.result),r.doNextTask()},r.fileReader.onerror=function(n){E.default.error("EncodingQueue error:",n),r._processing=!1,r.destroy(),r.emit("error",n)},r}return Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(r){this.queue.push(r),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(tr.EventEmitter),wl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zl=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wi=function(e){wl(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new Rs.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+K.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||we.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(a){o._bufferedSend(a)}),o._encodingQueue.on("error",function(){E.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new Hn.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Re.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r){this._dc=r,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var r=this;(!K.supports.binaryBlob||K.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){E.default.log("DC#".concat(r.connectionId," dc connection success")),r._open=!0,r.emit("open")},this.dataChannel.onmessage=function(n){E.default.log("DC#".concat(r.connectionId," dc onmessage:"),n.data),r._handleDataMessage(n)},this.dataChannel.onclose=function(){E.default.log("DC#".concat(r.connectionId," dc closed for:"),r.peer),r.close()}},t.prototype._handleDataMessage=function(r){var n=this,i=r.data,o=i.constructor,a=this.serialization===we.Binary||this.serialization===we.BinaryUTF8,l=i;if(a){if(o===Blob){K.blobToArrayBuffer(i,function(c){var f=K.unpack(c);n.emit("data",f)});return}else if(o===ArrayBuffer)l=K.unpack(i);else if(o===String){var s=K.binaryStringToArrayBuffer(i);l=K.unpack(s)}}else this.serialization===we.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},t.prototype._handleChunk=function(r){var n=r.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:r.total};if(i.data[r.n]=r.data,i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(r,n){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===we.JSON)this._bufferedSend(this.stringify(r));else if(this.serialization===we.Binary||this.serialization===we.BinaryUTF8){var i=K.pack(r);if(!n&&i.size>K.chunkedMTU){this._sendChunks(i);return}K.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(r)},t.prototype._bufferedSend=function(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(r){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(i){return E.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(r){var n,i,o=K.chunk(r);E.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var a=zl(o),l=a.next();!l.done;l=a.next()){var s=l.value;this.send(s,!0)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.handleMessage=function(r){var n=r.payload;switch(r.type){case se.Answer:this._negotiator.handleSDP(r.type,n.sdp);break;case se.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:E.default.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Kn.BaseConnection),Os={};Ue(Os,"API",()=>Qi,e=>Qi=e);var qi=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},Yi=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Qi=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var r=this._options.secure?"https":"http",n=this._options,i=n.host,o=n.port,a=n.path,l=n.key,s=new URL("".concat(r,"://").concat(i,":").concat(o).concat(a).concat(l,"/").concat(t));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Gn.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return qi(this,void 0,Promise,function(){var t,r,n;return Yi(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(t=i.sent(),t.status!==200)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw r=i.sent(),E.default.error("Error retrieving ID",r),n="",this._options.path==="/"&&this._options.host!==K.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return qi(this,void 0,Promise,function(){var t,r,n;return Yi(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(t=i.sent(),t.status!==200)throw t.status===401?(r="",this._options.host===K.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw n=i.sent(),E.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}})})},e}(),Gl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vt=function(){return Vt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Vt.apply(this,arguments)},Lt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hl=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},yn=function(e){Gl(t,e);function t(r,n){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return r&&r.constructor==Object?n=r:r&&(o=r.toString()),n=Vt({debug:0,host:K.CLOUD_HOST,port:K.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:K.randomToken(),config:K.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),i._options=n,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==K.CLOUD_HOST?i._options.secure=K.isSecure():i._options.host==K.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&E.default.setLogFunction(i._options.logFunction),E.default.logLevel=i._options.debug||0,i._api=new Os.API(n),i._socket=i._createServerConnection(),!K.supports.audioVideo&&!K.supports.data?(i._delayedAbort(Z.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!K.validateId(o)?(i._delayedAbort(Z.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(a){return i._initialize(a)}).catch(function(a){return i._abort(Z.ServerError,a)}),i)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var r,n,i=Object.create(null);try{for(var o=Lt(this._connections),a=o.next();!a.done;a=o.next()){var l=Hl(a.value,2),s=l[0],c=l[1];i[s]=c}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var r=this,n=new Es.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(Ge.Message,function(i){r._handleMessage(i)}),n.on(Ge.Error,function(i){r._abort(Z.SocketError,i)}),n.on(Ge.Disconnected,function(){r.disconnected||(r.emitError(Z.Network,"Lost connection to server."),r.disconnect())}),n.on(Ge.Close,function(){r.disconnected||r._abort(Z.SocketClosed,"Underlying socket is already closed.")}),n},t.prototype._initialize=function(r){this._id=r,this.socket.start(r,this._options.token)},t.prototype._handleMessage=function(r){var n,i,o=r.type,a=r.payload,l=r.src;switch(o){case se.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case se.Error:this._abort(Z.ServerError,a.msg);break;case se.IdTaken:this._abort(Z.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case se.InvalidKey:this._abort(Z.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case se.Leave:E.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case se.Expire:this.emitError(Z.PeerUnavailable,"Could not connect to peer ".concat(l));break;case se.Offer:var g=a.connectionId,y=this.getConnection(l,g);if(y&&(y.close(),E.default.warn("Offer received for existing Connection ID:".concat(g))),a.type===Re.Media){var s=new gn.MediaConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata});y=s,this._addConnection(l,y),this.emit("call",s)}else if(a.type===Re.Data){var c=new vn.DataConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata,label:a.label,serialization:a.serialization,reliable:a.reliable});y=c,this._addConnection(l,y),this.emit("connection",c)}else{E.default.warn("Received malformed connection type:".concat(a.type));return}var f=this._getMessages(g);try{for(var u=Lt(f),p=u.next();!p.done;p=u.next()){var m=p.value;y.handleMessage(m)}}catch(L){n={error:L}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}break;default:if(!a){E.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var g=a.connectionId,y=this.getConnection(l,g);y&&y.peerConnection?y.handleMessage(r):g?this._storeMessage(g,r):E.default.warn("You received an unrecognized message:",r);break}},t.prototype._storeMessage=function(r,n){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(n)},t.prototype._getMessages=function(r){var n=this._lostMessages.get(r);return n?(this._lostMessages.delete(r),n):[]},t.prototype.connect=function(r,n){if(n===void 0&&(n={}),this.disconnected){E.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Z.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new vn.DataConnection(r,this,n);return this._addConnection(r,i),i},t.prototype.call=function(r,n,i){if(i===void 0&&(i={}),this.disconnected){E.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Z.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){E.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new gn.MediaConnection(r,this,Vt(Vt({},i),{_stream:n}));return this._addConnection(r,o),o},t.prototype._addConnection=function(r,n){E.default.log("add connection ".concat(n.type,":").concat(n.connectionId," to peerId:").concat(r)),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(n)},t.prototype._removeConnection=function(r){var n=this._connections.get(r.peer);if(n){var i=n.indexOf(r);i!==-1&&n.splice(i,1)}this._lostMessages.delete(r.connectionId)},t.prototype.getConnection=function(r,n){var i,o,a=this._connections.get(r);if(!a)return null;try{for(var l=Lt(a),s=l.next();!s.done;s=l.next()){var c=s.value;if(c.connectionId===n)return c}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(r,n){var i=this;setTimeout(function(){i._abort(r,n)},0)},t.prototype._abort=function(r,n){E.default.error("Aborting!"),this.emitError(r,n),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(r,n){E.default.error("Error:",n);var i;typeof n=="string"?i=new Error(n):i=n,i.type=r,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(E.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var r,n;try{for(var i=Lt(this._connections.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;this._cleanupPeer(a),this._connections.delete(a)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(r){var n,i,o=this._connections.get(r);if(o)try{for(var a=Lt(o),l=a.next();!l.done;l=a.next()){var s=l.value;s.close()}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var r=this.id;E.default.log("Disconnect peer with ID:".concat(r)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)E.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)E.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},t.prototype.listAllPeers=function(r){var n=this;r===void 0&&(r=function(i){}),this._api.listAllPeers().then(function(i){return r(i)}).catch(function(i){return n._abort(Z.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(tr.EventEmitter);Ps.Peer;const Kl={class:"home"},Vl={class:"call-info"},Jl=W("span",null,"My ID:",-1),Wl=W("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[W("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"})],-1),ql=[Wl],Yl=W("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[W("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"})],-1),Ql=[Yl],Xl=W("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[W("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3V15"})],-1),Zl=[Xl],ef=W("span",null,"Friend ID:",-1),tf=W("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},[W("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})],-1),rf=[tf],nf=W("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[W("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"})],-1),of=[nf],sf=W("div",null,null,-1),af={class:"friend-video"},cf=["srcObject"],lf={class:"my-video"},ff=["srcObject"],uf=Ga({__name:"App",setup(e){const t=ot(void 0),r=ot(void 0),n=ot(""),i=ot(""),o=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,a=ot(null),l=ot(!1);Ro(()=>{o({video:!0,audio:!0},m=>{r.value=m})});function s(){a.value=new yn(n.value),a.value.on("open",()=>{l.value=!0}),a.value.on("error",m=>{alert("error"),console.error(m)}),a.value.on("close",()=>{l.value=!1,console.log("close")}),a.value.on("disconnected",m=>{alert("disconnected"),console.log(m)}),a.value.on("call",m=>{o({video:!0,audio:!0},g=>{m.answer(g),m.on("stream",y=>{console.log(y),console.log(t.value),t.value=y})},g=>{alert("Failed to get local stream"),console.log("Failed to get local stream",g)})})}function c(){o({video:!0,audio:!0},m=>{a.value.call(i.value,m).on("stream",y=>{t.value=y})},m=>{alert("Failed to get local stream"),console.error("Failed to get local stream",m)})}function f(){a.value.destroy()}function u(){if(!("share"in navigator)){alert("Web Share API not supported.");return}navigator.share({text:n.value}).catch(m=>console.log("Error sharing:",m))}async function p(){navigator.clipboard.readText().then(m=>{i.value=m}).catch(()=>{alert("Can not read clipboard")})}return(m,g)=>(Hr(),Kr("div",Kl,[W("div",Vl,[W("div",null,[Jl,oi(W("input",{type:"text","onUpdate:modelValue":g[0]||(g[0]=y=>n.value=y)},null,512),[[ki,n.value]]),l.value?(Hr(),Kr("button",{key:1,onClick:g[2]||(g[2]=Ft(y=>f(),["prevent"])),class:"close-btn"},Ql)):(Hr(),Kr("button",{key:0,onClick:g[1]||(g[1]=Ft(y=>s(),["prevent"])),class:"start-btn"},ql)),W("button",{onClick:g[3]||(g[3]=Ft(y=>u(),["prevent"])),class:"share-btn"},Zl)]),W("div",null,[ef,oi(W("input",{type:"text","onUpdate:modelValue":g[4]||(g[4]=y=>i.value=y)},null,512),[[ki,i.value]]),W("button",{onClick:g[5]||(g[5]=Ft(y=>c(),["prevent"])),class:"call-btn"},rf),W("button",{onClick:g[6]||(g[6]=Ft(y=>p(),["prevent"])),class:"paste-btn"},of)]),sf]),W("div",af,[W("video",{srcObject:t.value,autoplay:"",loop:"",playsInline:""},null,8,cf)]),W("div",lf,[W("video",{srcObject:r.value,autoplay:"",loop:"",muted:"",playsInline:""},null,8,ff)])]))}}),Ds=sl(uf);Ds.use(fl());Ds.mount("#app");
